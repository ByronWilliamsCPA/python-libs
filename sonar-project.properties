# SonarCloud Configuration for Python Libs
# Documentation: https://docs.sonarsource.com/sonarqube-cloud/

# =============================================================================
# Project Identification
# =============================================================================
sonar.organization=ByronWilliamsCPA
sonar.projectKey=ByronWilliamsCPA_python-libs
sonar.projectName=Python Libs
sonar.projectVersion=0.1.0

# =============================================================================
# Source Code Configuration
# =============================================================================
# Source directories (comma-separated)
sonar.sources=src/,packages/

# Test directories (comma-separated)
sonar.tests=tests/,packages/*/tests/

# Python version
sonar.python.version=3.12

# =============================================================================
# Test Coverage Configuration
# =============================================================================
# Coverage report paths (Cobertura XML format)
# Generated by: pytest --cov=src --cov-report=xml
sonar.python.coverage.reportPaths=coverage.xml

# Branch coverage (recommended for thorough analysis)
# Enabled via pytest-cov: --cov-branch

# =============================================================================
# Exclusions
# =============================================================================
# Files to exclude from analysis
sonar.exclusions=\
  **/__pycache__/**,\
  **/.venv/**,\
  **/.pytest_cache/**,\
  **/.mypy_cache/**,\
  **/.ruff_cache/**,\
  **/dist/**,\
  **/build/**,\
  **/*.egg-info/**,\
  **/node_modules/**,\
  **/.git/**

# Test files to exclude from coverage
sonar.coverage.exclusions=\
  **/tests/**,\
  **/*_test.py,\
  **/test_*.py,\
  **/conftest.py

# Files to exclude from duplication detection
sonar.cpd.exclusions=\
  **/tests/**,\
  **/*_test.py,\
  **/test_*.py

# =============================================================================
# Quality Gate & New Code Definition
# =============================================================================
# Define what constitutes "new code" for analysis
# Options: previous_version, number_of_days, reference_branch
sonar.newCode.referenceBranch=main

# =============================================================================
# Issue Filtering (Optional)
# =============================================================================
# Ignore specific rules for certain files
# Format: sonar.issue.ignore.multicriteria.<key>.ruleKey=<rule>
#         sonar.issue.ignore.multicriteria.<key>.resourceKey=<pattern>

# Example: Ignore complexity warnings in __init__.py files
sonar.issue.ignore.multicriteria=e1,e2,e3

sonar.issue.ignore.multicriteria.e1.ruleKey=python:S1192
sonar.issue.ignore.multicriteria.e1.resourceKey=**/__init__.py

# Example: Ignore string duplication in test files
sonar.issue.ignore.multicriteria.e2.ruleKey=python:S1192
sonar.issue.ignore.multicriteria.e2.resourceKey=**/tests/**

# Example: Ignore too-many-arguments in test fixtures
sonar.issue.ignore.multicriteria.e3.ruleKey=python:S107
sonar.issue.ignore.multicriteria.e3.resourceKey=**/conftest.py

# =============================================================================
# Security Hotspot Exclusions for Test Files
# =============================================================================
# Test files intentionally use hardcoded IPs, HTTP URLs, etc. for testing
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5,e6,e7

# Ignore hardcoded IP addresses in test files (S1313)
sonar.issue.ignore.multicriteria.e4.ruleKey=python:S1313
sonar.issue.ignore.multicriteria.e4.resourceKey=**/tests/**

# Ignore HTTP protocol warnings in test files (S5332)
sonar.issue.ignore.multicriteria.e5.ruleKey=python:S5332
sonar.issue.ignore.multicriteria.e5.resourceKey=**/tests/**

# Ignore hardcoded credentials in test files (S2068)
sonar.issue.ignore.multicriteria.e6.ruleKey=python:S2068
sonar.issue.ignore.multicriteria.e6.resourceKey=**/tests/**

# Ignore hardcoded secrets in test files (S6418)
sonar.issue.ignore.multicriteria.e7.ruleKey=python:S6418
sonar.issue.ignore.multicriteria.e7.resourceKey=**/tests/**

# =============================================================================
# Additional Linter Reports (Optional)
# =============================================================================
# If using external linters, specify report paths
# sonar.python.pylint.reportPaths=pylint-report.txt
# sonar.python.bandit.reportPaths=bandit-report.json
# sonar.python.mypy.reportPaths=mypy-report.txt

# =============================================================================
# Performance & Debugging
# =============================================================================
# Enable verbose logging for debugging (set to false in production)
# sonar.verbose=false

# Scanner timeout (seconds)
# sonar.scanner.socketTimeout=300

# =============================================================================
# Links (displayed in SonarCloud UI)
# =============================================================================
sonar.links.homepage=https://github.com/ByronWilliamsCPA/python-libs
sonar.links.ci=https://github.com/ByronWilliamsCPA/python-libs/actions
sonar.links.issue=https://github.com/ByronWilliamsCPA/python-libs/issues
sonar.links.scm=https://github.com/ByronWilliamsCPA/python-libs
