# Python Libs - SonarCloud Analysis
# Continuous code quality and security analysis
#
# Uses reusable workflow from: ByronWilliamsCPA/.github
#
# Features:
#   - Code quality metrics (bugs, code smells, technical debt)
#   - Security vulnerability detection (OWASP Top 10)
#   - Test coverage tracking
#   - Quality gate enforcement
#   - Pull request decoration
#
# SonarCloud Dashboard: https://sonarcloud.io/dashboard?id=ByronWilliamsCPA_python-libs
# Documentation: https://docs.sonarsource.com/sonarqube-cloud/
name: SonarCloud

on:
  push:
    branches:
      - main
      - develop
  pull_request:
    types: [opened, synchronize, reopened]
    branches:
      - main
      - develop
  workflow_dispatch:

permissions:
  contents: read
  pull-requests: write

jobs:
  sonarcloud:
    uses: ByronWilliamsCPA/.github/.github/workflows/python-sonarcloud.yml@main
    with:
      sonar-organization: ByronWilliamsCPA
      sonar-project-key: ByronWilliamsCPA_python-libs
      python-version: '3.12'
      source-directory: 'src'
      coverage-paths: 'coverage.xml'
      fail-on-quality-gate: false
      skip-if-no-token: true
    secrets:
      SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
