{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|(?!\\b)(?=[A-Z][a-z])|\\.(?!\\d)|&[lg]t;","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Python Libs","text":"<p>Shared Python libraries for ByronWilliamsCPA projects - JWT auth, GCS utilities, and more</p>","tags":["documentation","home"]},{"location":"#quick-start","title":"Quick Start","text":"<pre><code># Install the package\npip install python-libs\n\n# Or install with development dependencies\nuv sync --all-extras\n</code></pre>","tags":["documentation","home"]},{"location":"#features","title":"Features","text":"<ul> <li>Modern Python 3.12+ support</li> <li>Type-safe with BasedPyright strict mode</li> <li>Comprehensive test coverage</li> <li>Structured logging with structlog</li> </ul>","tags":["documentation","home"]},{"location":"#documentation","title":"Documentation","text":"<ul> <li>User Guide - Getting started and usage</li> <li>API Reference - Complete API documentation</li> <li>Development - Architecture and contributing</li> <li>Project - Roadmap and changelog</li> </ul>","tags":["documentation","home"]},{"location":"#license","title":"License","text":"<p>This project is licensed under the MIT License - see the LICENSE file for details.</p>","tags":["documentation","home"]},{"location":"OPENSSF_COMPLIANCE/","title":"OpenSSF Compliance Guide","text":"<p>This project follows OpenSSF (Open Source Security Foundation) security best practices, achieving high scores on the Scorecard and Best Practices Badge.</p>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#overview","title":"Overview","text":"<p>Estimated Scorecard Score: 9.0/10 (Excellent) Best Practices Compliance: 95%+ (Passing)</p> <p>This template implements comprehensive security controls including:</p> <ul> <li>\u2705 Signed releases with Sigstore/Cosign</li> <li>\u2705 SLSA Level 3 provenance attestations</li> <li>\u2705 Continuous fuzzing with ClusterFuzzLite</li> <li>\u2705 Branch protection with scoped permissions</li> <li>\u2705 Automated dependency updates</li> <li>\u2705 Comprehensive security scanning</li> </ul>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#security-features","title":"Security Features","text":"","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#1-signed-releases","title":"1. Signed Releases \ud83d\udd10","text":"<p>All releases are cryptographically signed using Sigstore/Cosign for keyless signing.</p> <p>What it provides:</p> <ul> <li>Cryptographic proof of authenticity</li> <li>Verification that releases come from this repository</li> <li>Protection against supply chain attacks</li> <li>Certificate transparency</li> </ul> <p>Workflow: <code>.github/workflows/release.yml</code></p> <p>How to verify a release:</p> <pre><code># Install cosign\nbrew install cosign  # macOS\n# or download from https://github.com/sigstore/cosign/releases\n\n# Download release artifacts\nwget https://github.com/ByronWilliamsCPA/python_libs/releases/download/v1.0.0/package.whl\nwget https://github.com/ByronWilliamsCPA/python_libs/releases/download/v1.0.0/package.whl.sig\nwget https://github.com/ByronWilliamsCPA/python_libs/releases/download/v1.0.0/package.whl.pem\n\n# Verify signature\ncosign verify-blob \\\n  --certificate package.whl.pem \\\n  --signature package.whl.sig \\\n  --certificate-identity-regexp=\"https://github.com/ByronWilliamsCPA/python_libs\" \\\n  --certificate-oidc-issuer=\"https://token.actions.githubusercontent.com\" \\\n  package.whl\n</code></pre>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#2-slsa-provenance","title":"2. SLSA Provenance \ud83d\udd17","text":"<p>SLSA (Supply-chain Levels for Software Artifacts) Level 3 provenance attestations are generated for all releases.</p> <p>What it provides:</p> <ul> <li>Build environment details</li> <li>Source repository verification</li> <li>Complete build reproducibility metadata</li> <li>Independent verification of the build process</li> </ul> <p>Workflow: <code>.github/workflows/release.yml</code> (provenance job)</p> <p>How to verify provenance:</p> <pre><code># Download provenance file\nwget https://github.com/ByronWilliamsCPA/python_libs/releases/download/v1.0.0/attestation.intoto.jsonl\n\n# Verify with slsa-verifier\nslsa-verifier verify-artifact package.whl \\\n  --provenance-path attestation.intoto.jsonl \\\n  --source-uri github.com/ByronWilliamsCPA/python_libs\n</code></pre>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#3-continuous-fuzzing","title":"3. Continuous Fuzzing \ud83d\udc1b","text":"<p>Automated fuzzing with ClusterFuzzLite discovers security vulnerabilities.</p> <p>What it provides:</p> <ul> <li>Discovery of crashes and hangs</li> <li>Memory safety violations (via AddressSanitizer)</li> <li>Edge case detection</li> <li>Security vulnerability identification</li> </ul> <p>Workflow: <code>.github/workflows/cifuzzy.yml</code> Fuzz Harnesses: <code>fuzz/</code> directory</p> <p>How to run locally:</p> <pre><code># Install Atheris\nuv pip install atheris\n\n# Run input validation fuzzer (60 seconds)\npython fuzz/fuzz_input_validation.py -max_total_time=60\n</code></pre> <p>View fuzzing results:</p> <ul> <li>GitHub Security tab \u2192 Code scanning alerts</li> <li>Workflow artifacts (crash samples)</li> </ul>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#4-branch-protection","title":"4. Branch Protection \ud83d\udee1\ufe0f","text":"<p>Enforced branch protection rules prevent unauthorized changes.</p> <p>Protection rules:</p> <ul> <li>\u2705 Required status checks (CI / CI Pipeline, Security Analysis / Security Scan, PR Validation)</li> <li>\u2705 Required pull request reviews (1 approval)</li> <li>\u2705 Code owner reviews required</li> <li>\u2705 Dismiss stale reviews</li> <li>\u2705 Enforce for administrators</li> <li>\u2705 Linear history required</li> <li>\u2705 Force pushes blocked</li> <li>\u2705 Branch deletions blocked</li> <li>\u2705 Conversation resolution required</li> </ul> <p>Setup:</p> <pre><code># Set GitHub token\nexport GITHUB_TOKEN=&lt;YOUR_GITHUB_TOKEN&gt;\n\n# Run setup script\npython scripts/setup_github_protection.py\n</code></pre> <p>Manual setup:</p> <ol> <li>Go to: <code>https://github.com/ByronWilliamsCPA/python_libs/settings/branches</code></li> <li>Click \"Add branch protection rule\"</li> <li>Apply protection pattern: <code>main</code></li> <li>Enable all recommended protections</li> </ol>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#5-scoped-workflow-permissions","title":"5. Scoped Workflow Permissions \ud83d\udd11","text":"<p>All GitHub Actions workflows use least-privilege permissions.</p> <p>Principle: Grant only the minimum permissions needed for each job.</p> <p>Implementation:</p> <pre><code>permissions:\n  contents: read        # For checkout\n  pull-requests: write  # For PR comments\n  checks: write         # For check runs\n</code></pre> <p>Not this:</p> <pre><code>permissions: read-all  # \u274c Too permissive\n</code></pre>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#6-dependency-management","title":"6. Dependency Management \ud83d\udce6","text":"<p>Automated dependency updates and vulnerability scanning.</p> <p>Tools:</p> <ul> <li>Renovate: Automated dependency updates</li> <li>Safety: Python dependency CVE scanning</li> <li>OSV-Scanner: Multi-ecosystem vulnerability detection</li> <li>Google Assured OSS: Vetted, secure packages</li> </ul> <p>Configuration:</p> <ul> <li><code>renovate.json</code> - Update automation</li> <li><code>osv-scanner.toml</code> - Vulnerability exceptions</li> <li><code>.env.example</code> - Assured OSS configuration</li> </ul>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#7-security-scanning-sast","title":"7. Security Scanning (SAST) \ud83d\udd0d","text":"<p>Comprehensive static analysis on every commit.</p> <p>Tools:</p> <ul> <li>Ruff: Python linting with security rules</li> <li>Bandit: Python security issue detection</li> <li>BasedPyright: Type safety (prevents entire classes of bugs)</li> <li>CodeQL: Advanced semantic code analysis</li> </ul> <p>Workflow: <code>.github/workflows/security-analysis.yml</code></p>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#8-mutation-testing","title":"8. Mutation Testing \ud83e\uddec","text":"<p>Ensures test quality with mutmut.</p> <p>What it does:</p> <ul> <li>Mutates source code (changes operators, values, etc.)</li> <li>Runs tests against mutated code</li> <li>Verifies tests catch the mutations</li> <li>Measures test effectiveness</li> </ul> <p>Configuration: <code>pyproject.toml</code> \u2192 <code>[tool.mutmut]</code></p> <p>Usage:</p> <pre><code># Run mutation testing\nmutmut run\n\n# View results\nmutmut results\n\n# Show specific mutations\nmutmut show\n</code></pre>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#openssf-scorecard-compliance","title":"OpenSSF Scorecard Compliance","text":"","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#current-score-9010","title":"Current Score: 9.0/10 \u2b50","text":"Check Score Status Security-Policy 10/10 \u2705 Org-level policy Code-Review 10/10 \u2705 PR workflow + CODEOWNERS Signed-Releases 10/10 \u2705 Cosign + SLSA Branch-Protection 10/10 \u2705 Setup script provided Token-Permissions 10/10 \u2705 Scoped permissions SAST 10/10 \u2705 Ruff + Bandit + BasedPyright Fuzzing 10/10 \u2705 ClusterFuzzLite Vulnerabilities 9/10 \u2705 Safety + OSV-Scanner Dependency-Update 10/10 \u2705 Renovate Pinned-Dependencies 7/10 \u26a0\ufe0f UV lock file (acceptable) Maintained 10/10 \u2705 Active development License 10/10 \u2705 REUSE compliant CII-Best-Practices 8/10 \u26a0\ufe0f Register for badge Dangerous-Workflow 8/10 \u2705 Input validation Binary-Artifacts 10/10 \u2705 None in repo Packaging 8/10 \u2705 PyPI publishing","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#remaining-improvements","title":"Remaining Improvements","text":"<ol> <li>CII Best Practices Badge (Easy - 30 minutes)</li> <li>Register at: https://www.bestpractices.dev/</li> <li>Answer ~60 questions about your project</li> <li> <p>Add badge to README</p> </li> <li> <p>Enhanced Dependency Pinning (Optional)</p> </li> <li>Current: UV lock file (good enough for most projects)</li> <li>Alternative: Pin all dependencies in pyproject.toml</li> </ol>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#best-practices-badge-criteria","title":"Best Practices Badge Criteria","text":"","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#passing-level-95-compliance","title":"Passing Level: 95%+ Compliance \u2705","text":"<p>The template meets 44/46 passing-level criteria:</p> <p>Basics (6/6):</p> <ul> <li>\u2705 Project website with clear description</li> <li>\u2705 OSI-approved license</li> <li>\u2705 Comprehensive documentation</li> <li>\u2705 HTTPS for all sites</li> <li>\u2705 Discussion forum (GitHub Issues/Discussions)</li> <li>\u2705 English documentation</li> </ul> <p>Change Control (3/3):</p> <ul> <li>\u2705 Public version-controlled repository</li> <li>\u2705 Unique version numbering (semantic versioning)</li> <li>\u2705 Release notes (CHANGELOG.md)</li> </ul> <p>Reporting (2/2):</p> <ul> <li>\u2705 Bug reporting process (GitHub Issues)</li> <li>\u2705 Vulnerability reporting (org-level SECURITY.md)</li> </ul> <p>Quality (4/4):</p> <ul> <li>\u2705 Automated build system (UV)</li> <li>\u2705 Automated test suite (pytest)</li> <li>\u2705 New functionality testing policy</li> <li>\u2705 Compiler warnings (Ruff + BasedPyright)</li> </ul> <p>Security (5/5):</p> <ul> <li>\u2705 Secure development knowledge</li> <li>\u2705 Basic cryptographic practices</li> <li>\u2705 Secured delivery (HTTPS)</li> <li>\u2705 Known vulnerabilities patched</li> <li>\u2705 No credential leakage</li> </ul> <p>Analysis (3/3):</p> <ul> <li>\u2705 Static code analysis (Ruff, Bandit, BasedPyright)</li> <li>\u2705 Dynamic analysis (Hypothesis, pytest)</li> <li>\u2705 Memory safety (Python is memory-safe)</li> </ul>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#security-workflows","title":"Security Workflows","text":"","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#release-process","title":"Release Process","text":"<ol> <li>Tag Release:</li> </ol> <pre><code>git tag -a v1.0.0 -m \"Release 1.0.0\"\ngit push origin v1.0.0\n</code></pre> <ol> <li>Automated Actions:</li> <li>Build distribution packages</li> <li>Sign with Cosign</li> <li>Generate SLSA provenance</li> <li>Create GitHub release</li> <li> <p>Upload signed artifacts</p> </li> <li> <p>Verification:</p> </li> <li>Check GitHub Security tab for attestations</li> <li>Verify signatures locally (see above)</li> <li>Review SLSA provenance</li> </ol>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#security-issue-response","title":"Security Issue Response","text":"<ol> <li>Report received \u2192 Acknowledge within 14 days</li> <li>Triage \u2192 Assess severity and impact</li> <li>Fix \u2192 Develop and test patch</li> <li>Coordinate \u2192 Notify stakeholders if needed</li> <li>Disclose \u2192 Publish security advisory</li> <li>Release \u2192 Tagged release with fix</li> </ol>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#continuous-improvement","title":"Continuous Improvement","text":"","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#monthly-security-tasks","title":"Monthly Security Tasks","text":"<ul> <li> Review Renovate dependency updates</li> <li> Check fuzzing results in Security tab</li> <li> Review SBOM for new vulnerabilities</li> <li> Update branch protection rules if needed</li> <li> Check OpenSSF Scorecard for changes</li> </ul>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#quarterly-security-review","title":"Quarterly Security Review","text":"<ul> <li> Re-run OpenSSF Scorecard</li> <li> Review CII Best Practices compliance</li> <li> Update security documentation</li> <li> Review and update threat model</li> <li> Audit access controls and permissions</li> </ul>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#resources","title":"Resources","text":"","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#openssf","title":"OpenSSF","text":"<ul> <li>OpenSSF Scorecard</li> <li>Best Practices Badge</li> <li>SLSA Framework</li> <li>Sigstore</li> </ul>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#tools","title":"Tools","text":"<ul> <li>ClusterFuzzLite</li> <li>Cosign</li> <li>Renovate</li> <li>Safety</li> </ul>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#guides","title":"Guides","text":"<ul> <li>GitHub Security Best Practices</li> <li>Python Security Best Practices</li> <li>Supply Chain Security</li> </ul>","tags":["security","compliance","quality"]},{"location":"OPENSSF_COMPLIANCE/#getting-help","title":"Getting Help","text":"<p>Security Questions: byronawilliams@gmail.com Vulnerability Reports: See Security Policy General Issues: GitHub Issues</p> <p>This project follows OpenSSF security best practices to protect users and maintainers.</p>","tags":["security","compliance","quality"]},{"location":"PROJECT_SETUP/","title":"Project Setup Guide","text":"<p>This guide covers everything you need to know after generating your project from the cookiecutter template. It includes manual setup steps, keeping your project updated, and managing your repository structure.</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Initial Setup</li> <li>Project Planning with Claude Code</li> <li>Manual Registrations Required</li> <li>Keeping Your Project Updated</li> <li>CI/CD Workflow Configuration</li> <li>Badge Configuration</li> <li>Security Configuration</li> <li>Repository Management</li> </ul>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#initial-setup","title":"Initial Setup","text":"<p>After generating your project, complete these steps:</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#1-review-generated-files","title":"1. Review Generated Files","text":"<p>Your project was generated with the following configuration:</p> <ul> <li>Project Name: Python Libs</li> <li>Python Version: 3.12</li> <li>License: MIT</li> </ul>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#2-create-github-repository","title":"2. Create GitHub Repository","text":"<p>```bash</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#create-a-new-repository-on-github-then","title":"Create a new repository on GitHub, then:","text":"<p>git remote add origin https://github.com/ByronWilliamsCPA/python-libs.git git push -u origin main ```text</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#3-install-dependencies","title":"3. Install Dependencies","text":"<p>```bash</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#install-uv-if-not-already-installed","title":"Install UV if not already installed","text":"<p>curl -LsSf https://astral.sh/uv/install.sh | sh</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#install-project-dependencies","title":"Install project dependencies","text":"<p>uv sync --all-extras</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#install-pre-commit-hooks","title":"Install pre-commit hooks","text":"<p>uv run pre-commit install ```text</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#4-verify-setup","title":"4. Verify Setup","text":"<p>```bash</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#run-tests","title":"Run tests","text":"<p>uv run pytest -v</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#run-linting","title":"Run linting","text":"<p>uv run ruff check .</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#run-type-checking","title":"Run type checking","text":"<p>uv run basedpyright src/ ```text</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#5-generate-project-planning-documents","title":"5. Generate Project Planning Documents","text":"<p>Use Claude Code to generate comprehensive planning documents for your project:</p> <p>```bash</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#open-claude-code-and-describe-your-project-then-run","title":"Open Claude Code and describe your project, then run:","text":"<p>/plan  ```text <p>See Project Planning with Claude Code below for the complete workflow.</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#project-planning-with-claude-code","title":"Project Planning with Claude Code","text":"<p>This template includes an integrated AI-assisted project planning workflow that transforms your project concept into actionable development plans with proper git branch strategy.</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#overview","title":"Overview","text":"<p>The planning workflow generates 4 core documents, then synthesizes them into a comprehensive project plan:</p> <p><code>text Project Description         \u2502         \u25bc \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502   Step 1: Generate Planning Docs      \u2502 \u2502   (project-planning skill)            \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502         \u25bc \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502   project-vision.md (PVS)             \u2502  What &amp; Why \u2502   tech-spec.md                        \u2502  How (architecture) \u2502   roadmap.md                          \u2502  When (phases) \u2502   adr/adr-001-*.md                    \u2502  Key decisions \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502         \u25bc \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502   Step 2: Synthesize Project Plan     \u2502 \u2502   (project-plan-synthesizer agent)    \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502         \u25bc \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502   PROJECT-PLAN.md                     \u2502  Actionable plan \u2502   - Git branch strategy               \u2502  with semantic \u2502   - Phase deliverables                \u2502  release alignment \u2502   - TodoWrite checklist               \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502         \u25bc \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502   Step 3: Start Development           \u2502 \u2502   /git/milestone start                \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</code>text</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#step-1-generate-planning-documents","title":"Step 1: Generate Planning Documents","text":"<p>Describe your project and generate the 4 core documents:</p> <p>```bash</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#using-the-plan-command-recommended","title":"Using the /plan command (recommended)","text":"<p>/plan I want to build a CLI tool for managing personal finances. The main users are individuals tracking expenses. Core features: expense tracking, budget categories, monthly reports. Technical constraints: must work offline, SQLite for storage. ```text</p> <p>Or provide a more detailed description:</p> <p>```text Generate planning documents for this project:</p> <p>I'm building a REST API for inventory management. Target users are small business owners. Core features include product CRUD, stock tracking, low-stock alerts, and reporting. Must integrate with existing PostgreSQL database and support OAuth2 authentication. ```text</p> <p>What gets created:</p> Document Location Purpose Project Vision &amp; Scope <code>docs/planning/project-vision.md</code> Problem, solution, scope, success metrics Technical Specification <code>docs/planning/tech-spec.md</code> Architecture, data model, APIs, security Development Roadmap <code>docs/planning/roadmap.md</code> Phased implementation plan Architecture Decision Records <code>docs/planning/adr/adr-001-*.md</code> Key technical decisions with rationale <p>The project-planning skill will:</p> <ol> <li>Analyze your project description</li> <li>Generate each document using templates</li> <li>Validate each document with AI consensus review</li> <li>Ensure documents cross-reference correctly</li> <li>Flag any assumptions needing your validation</li> </ol>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#step-2-synthesize-into-project-plan","title":"Step 2: Synthesize into Project Plan","text":"<p>After the 4 documents are generated, synthesize them into an actionable plan:</p> <p>```bash</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#request-synthesis","title":"Request synthesis","text":"<p>\"Synthesize my planning documents into a project plan\" ```text</p> <p>The project-plan-synthesizer agent will:</p> <ol> <li>Read and validate all 4 source documents</li> <li>Extract key information from each document</li> <li>Lookup best practices via Context7 for your tech stack</li> <li>Map phases to semantic release-aligned git branches</li> <li>Validate with tiered consensus (multi-model AI review)</li> <li>Generate <code>docs/planning/PROJECT-PLAN.md</code></li> <li>Create initial TodoWrite checklist for Phase 0</li> </ol> <p>Output: <code>docs/planning/PROJECT-PLAN.md</code> containing:</p> <ul> <li>Git branch strategy for each phase</li> <li>Consolidated risk register</li> <li>Cross-referenced architecture decisions</li> <li>Success criteria per phase</li> <li>TodoWrite checklist for Phase 0</li> </ul>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#git-branch-strategy-semantic-release","title":"Git Branch Strategy (Semantic Release)","text":"<p>Phases are automatically mapped to semantic release branch types:</p> Phase Focus Branch Type Version Impact Example Foundation/Setup <code>feat/</code> Minor (0.X.0) <code>feat/phase-0-foundation</code> Core Features <code>feat/</code> Minor (0.X.0) <code>feat/phase-1-core</code> Additional Features <code>feat/</code> Minor (0.X.0) <code>feat/phase-2-advanced</code> Performance <code>perf/</code> Patch (0.0.X) <code>perf/phase-3-optimization</code> Documentation <code>docs/</code> None <code>docs/phase-4-documentation</code> Bug Fixes <code>fix/</code> Patch (0.0.X) <code>fix/phase-X-bugfixes</code>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#step-3-review-and-start-development","title":"Step 3: Review and Start Development","text":"<p>Review the synthesized plan:</p> <p>```bash</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#review-the-generated-plan","title":"Review the generated plan","text":"<p>cat docs/planning/PROJECT-PLAN.md</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#verify","title":"Verify:","text":"","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#-phase-deliverables-match-your-expectations","title":"- Phase deliverables match your expectations","text":"","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#-git-branch-types-align-with-semantic-release","title":"- Git branch types align with semantic release","text":"","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#-success-criteria-are-measurable","title":"- Success criteria are measurable","text":"<p>```text</p> <p>Start development with the milestone workflow:</p> <p>```bash</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#start-phase-0-creates-branch-sets-up-tracking","title":"Start Phase 0 (creates branch, sets up tracking)","text":"<p>/git/milestone start feat/phase-0-foundation ```text</p> <p>This will:</p> <ul> <li>Create the feature branch from main</li> <li>Set up git worktree if parallel development is needed</li> <li>Show semantic release impact for this branch type</li> <li>Create TodoWrite list from phase deliverables</li> </ul>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#phase-completion-workflow","title":"Phase Completion Workflow","text":"<p>When you complete a phase:</p> <p>```bash</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#1-validate-all-commits-match-branch-type","title":"1. Validate all commits match branch type","text":"<p>/git/milestone complete</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#2-create-pr-with-what-the-diff-summary","title":"2. Create PR with What the Diff summary","text":"<p>/git/pr-prepare --include_wtd=true</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#3-merge-pr-triggers-semantic-release-if-applicable","title":"3. Merge PR (triggers semantic release if applicable)","text":"","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#4-start-next-phase","title":"4. Start next phase","text":"<p>/git/milestone start feat/phase-1-core ```text</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#using-planning-documents-during-development","title":"Using Planning Documents During Development","text":"<p>Load context for a task:</p> <p><code>text Load context from project-vision.md sections 2-3 and adr/adr-001-*.md, then implement [feature] per tech-spec.md section [X].</code>text</p> <p>Validate code against specs:</p> <p><code>text Review this code against tech-spec.md section 6 (security). Flag any violations.</code>text</p> <p>Check phase progress:</p> <p><code>text Review PROJECT-PLAN.md Phase 1 deliverables and update status.</code>text</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#document-update-guidelines","title":"Document Update Guidelines","text":"Document Update When Roadmap After completing tasks, adjusting timelines ADR When making new architectural decisions Tech Spec When architecture changes significantly PVS When scope changes (rare) PROJECT-PLAN.md After each phase completion","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#planning-resources","title":"Planning Resources","text":"<ul> <li>Skill Reference: <code>.claude/skills/project-planning/SKILL.md</code></li> <li>Document Templates: <code>.claude/skills/project-planning/templates/</code></li> <li>Detailed Guidance: <code>.claude/skills/project-planning/reference/</code></li> <li>Git Milestone Workflow: <code>.claude/skills/git/workflows/milestone.md</code></li> <li>Project Plan Template: <code>docs/planning/project-plan-template.md</code></li> </ul>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#manual-registrations-required","title":"Manual Registrations Required","text":"<p>Some features require manual registration on external services:</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#openssf-best-practices-badge","title":"OpenSSF Best Practices Badge","text":"<p>The OpenSSF Best Practices badge requires manual project registration:</p> <ol> <li>Register your project: Visit https://www.bestpractices.dev/en</li> <li>Click \"Get Your Badge Now\"</li> <li>Enter your repository URL: <code>https://github.com/ByronWilliamsCPA/python_libs</code></li> <li>Complete the questionnaire answering questions about your project's security practices</li> <li>Get your badge ID (e.g., <code>12345</code>)</li> <li>Add the badge to your README:</li> </ol> <p><code>markdown [![OpenSSF Best Practices](https://www.bestpractices.dev/projects/YOUR_PROJECT_ID/badge)](https://www.bestpractices.dev/en/projects/YOUR_PROJECT_ID)</code>text</p> <p>Tip: Many questions can be answered \"Met\" based on this template's default configuration (CI/CD, security scanning, documentation, etc.).</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#codecov-configuration","title":"Codecov Configuration","text":"<ol> <li>Sign up/Login: Visit https://codecov.io and authenticate with GitHub</li> <li>Add repository: Navigate to your organization and add the repository</li> <li>Copy the upload token (optional for public repos, required for private)</li> <li>Add as GitHub secret: Repository Settings &gt; Secrets &gt; <code>CODECOV_TOKEN</code></li> </ol>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#sonarcloud-configuration","title":"SonarCloud Configuration","text":"<ol> <li>Sign up/Login: Visit https://sonarcloud.io and authenticate with GitHub</li> <li>Import your repository</li> <li>Get your project key: Should be <code>ByronWilliamsCPA_python_libs</code></li> <li>Create a token: Account &gt; Security &gt; Generate Token</li> <li>Add as GitHub secret: Repository Settings &gt; Secrets &gt; <code>SONAR_TOKEN</code></li> </ol>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#keeping-your-project-updated","title":"Keeping Your Project Updated","text":"<p>This template uses Cruft for template management, allowing you to receive updates.</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#check-for-template-updates","title":"Check for Template Updates","text":"<p>```bash</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#check-if-updates-are-available","title":"Check if updates are available","text":"<p>cruft check</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#see-what-would-change","title":"See what would change","text":"<p>cruft diff ```text</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#apply-template-updates","title":"Apply Template Updates","text":"<p>```bash</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#update-to-the-latest-template-version","title":"Update to the latest template version","text":"<p>cruft update</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#if-there-are-conflicts-resolve-them-manually","title":"If there are conflicts, resolve them manually","text":"","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#then-mark-as-resolved","title":"Then mark as resolved:","text":"<p>cruft update --skip ```text</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#best-practices-for-updates","title":"Best Practices for Updates","text":"<ol> <li>Create a branch before updating: <code>git checkout -b template-update</code></li> <li>Review all changes carefully with <code>cruft diff</code></li> <li>Test thoroughly after updating: <code>uv run pytest &amp;&amp; uv run ruff check .</code></li> <li>Commit with clear message: <code>git commit -m \"chore: update from cookiecutter template\"</code></li> </ol>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#handling-merge-conflicts","title":"Handling Merge Conflicts","text":"<p>When conflicts occur:</p> <p>```bash</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#after-cruft-update-shows-conflicts","title":"After cruft update shows conflicts","text":"<p>git status  # See conflicted files</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#edit-files-to-resolve-conflicts","title":"Edit files to resolve conflicts","text":"","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#then-stage-resolved-files","title":"Then stage resolved files","text":"<p>git add","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#complete-the-update","title":"Complete the update","text":"<p>cruft update --skip ```text</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#cicd-workflow-configuration","title":"CI/CD Workflow Configuration","text":"<p>Your project includes several GitHub Actions workflows:</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#core-workflows","title":"Core Workflows","text":"Workflow File Purpose CI Pipeline <code>ci.yml</code> Tests, linting, type checking Security Analysis <code>security-analysis.yml</code> Dependency scanning, CodeQL PR Validation <code>pr-validation.yml</code> Lock file and requirements sync validation OpenSSF Scorecard <code>scorecard.yml</code> Supply chain security assessment SBOM &amp; Security Scan <code>sbom.yml</code> Software Bill of Materials generation Release <code>release.yml</code> Automated semantic versioning and releases Publish to PyPI <code>publish-pypi.yml</code> Package publishing to PyPI Documentation <code>docs.yml</code> Build and deploy MkDocs REUSE Compliance <code>reuse.yml</code> License compliance checking SonarCloud <code>sonarcloud.yml</code> Code quality analysis","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#required-github-secrets","title":"Required GitHub Secrets","text":"<p>Set these in Repository Settings &gt; Secrets and variables &gt; Actions:</p> Secret Required For How to Get <code>PYPI_API_TOKEN</code> PyPI publishing pypi.org &gt; Account &gt; API tokens (or use Trusted Publishing) <code>CODECOV_TOKEN</code> Codecov uploads codecov.io &gt; Settings &gt; Upload Token <code>SONAR_TOKEN</code> SonarCloud analysis sonarcloud.io &gt; Account &gt; Security <code>SCORECARD_TOKEN</code> Scorecard (optional) GitHub PAT with repo scope","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#pypi-trusted-publishing-recommended","title":"PyPI Trusted Publishing (Recommended)","text":"<p>Instead of using API tokens, configure trusted publishing for enhanced security:</p> <ol> <li>Go to pypi.org and create or manage your project</li> <li>Navigate to \"Publishing\" settings</li> <li>Add a new trusted publisher with:</li> <li>Owner: <code>ByronWilliamsCPA</code></li> <li>Repository: <code>python-libs</code></li> <li>Workflow: <code>publish-pypi.yml</code></li> <li>Environment: <code>pypi</code></li> <li>No <code>PYPI_API_TOKEN</code> secret is needed with trusted publishing</li> </ol>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#badge-configuration","title":"Badge Configuration","text":"","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#automatic-badges-no-setup-required","title":"Automatic Badges (No Setup Required)","text":"<p>These badges work automatically once your repository is public:</p> <ul> <li>OpenSSF Scorecard: Updates weekly after first workflow run</li> <li>CI Pipeline: Shows status after first push</li> <li>Security Analysis: Shows status after first push</li> <li>SBOM &amp; Security Scan: Shows status after dependency changes</li> </ul>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#badges-requiring-registration","title":"Badges Requiring Registration","text":"Badge Service Registration URL OpenSSF Best Practices bestpractices.dev Register Project Codecov codecov.io Add Repository SonarCloud sonarcloud.io Import Project","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#adding-openssf-best-practices-badge","title":"Adding OpenSSF Best Practices Badge","text":"<p>After registration, add this badge to your README's \"Quality &amp; Security\" section:</p> <p><code>markdown [![OpenSSF Best Practices](https://www.bestpractices.dev/projects/YOUR_ID/badge)](https://www.bestpractices.dev/en/projects/YOUR_ID)</code>text</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#security-configuration","title":"Security Configuration","text":"","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#branch-protection-rules","title":"Branch Protection Rules","text":"<p>You can configure branch protection either via script (recommended) or manually through the GitHub UI.</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#option-1-automated-setup-recommended","title":"Option 1: Automated Setup (Recommended)","text":"<p>Use the included script to configure comprehensive branch protection:</p> <p>```bash</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#set-up-branch-protection-with-default-settings","title":"Set up branch protection with default settings","text":"<p>uv run python scripts/setup_github_protection.py</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#or-specify-custom-settings","title":"Or specify custom settings","text":"<p>uv run python scripts/setup_github_protection.py --enforce-admins --require-code-owner-reviews ```text</p> <p>The script configures:</p> <ul> <li>Required pull request reviews before merging</li> <li>Required status checks to pass</li> <li>Enforce rules for administrators</li> <li>Require signed commits</li> <li>Dismiss stale reviews on new commits</li> </ul>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#option-2-manual-ui-setup","title":"Option 2: Manual UI Setup","text":"<ol> <li>Go to Repository Settings &gt; Branches &gt; Add rule</li> <li>Apply to: <code>main</code></li> <li>Enable:</li> <li> Require a pull request before merging</li> <li> Require status checks to pass</li> <li> Require branches to be up to date</li> <li> Include administrators</li> </ol>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#required-status-checks","title":"Required Status Checks","text":"<p>Add these as required checks:</p> <ul> <li><code>CI / Test</code> (from CI workflow)</li> <li><code>CI / Lint</code> (from CI workflow)</li> <li><code>codecov/patch</code></li> <li><code>SonarCloud Code Analysis</code></li> </ul>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#security-policy","title":"Security Policy","text":"<p>Your <code>SECURITY.md</code> file is already configured. Update these sections:</p> <ol> <li>Supported Versions: Update as you release new versions</li> <li>Security Contact: Change <code>security@example.com</code> if needed</li> <li>PGP Key: Add your security team's PGP key for encrypted reports</li> </ol>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#reuse-compliance","title":"REUSE Compliance","text":"<p>Your project uses REUSE for license management:</p> <p>```bash</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#check-compliance","title":"Check compliance","text":"<p>reuse lint</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#add-license-headers-to-new-files","title":"Add license headers to new files","text":"<p>reuse addheader --license MIT --copyright \"Byron Williams\"  ```text","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#repository-management","title":"Repository Management","text":"","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#release-process","title":"Release Process","text":"<ol> <li>Update version in <code>pyproject.toml</code></li> <li>Update CHANGELOG.md with release notes</li> <li>Create a tag:</li> </ol> <p><code>bash    git tag -a v1.0.0 -m \"Release v1.0.0\"    git push origin v1.0.0</code></p> <ol> <li>Create GitHub Release from the tag</li> </ol>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#dependency-updates","title":"Dependency Updates","text":"<p>Renovate is configured to automatically create PRs for dependency updates. Review and merge these regularly.</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#code-quality-standards","title":"Code Quality Standards","text":"<p>This project enforces:</p> <ul> <li>80%+ test coverage (enforced via pytest-cov)</li> <li>Zero linting errors (enforced via Ruff)</li> <li>Type safety (enforced via BasedPyright)</li> <li>Security scanning (enforced via Bandit, Safety)</li> </ul>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#project-structure","title":"Project Structure","text":"<p><code>text python_libs/ \u251c\u2500\u2500 src/python_libs/    # Main package \u2502   \u251c\u2500\u2500 core/                               # Core functionality \u2502   \u251c\u2500\u2500 utils/                              # Utility functions \u251c\u2500\u2500 tests/                                  # Test suite \u251c\u2500\u2500 docs/                                   # Documentation \u251c\u2500\u2500 .github/workflows/                      # CI/CD workflows \u251c\u2500\u2500 pyproject.toml                          # Project configuration \u2514\u2500\u2500 README.md                               # Project readme</code>text</p>","tags":["guide","installation","development"]},{"location":"PROJECT_SETUP/#getting-help","title":"Getting Help","text":"<ul> <li>Template Issues: cookiecutter-python-template issues</li> <li>Cruft Documentation: cruft.github.io/cruft</li> <li>UV Documentation: docs.astral.sh/uv</li> <li>OpenSSF Scorecard: securityscorecards.dev</li> <li>OpenSSF Best Practices: bestpractices.dev</li> </ul>","tags":["guide","installation","development"]},{"location":"PYTHON_COMPATIBILITY/","title":"Python Version Compatibility Guide","text":"<p>This project supports Python 3.10, 3.11, 3.12, 3.13, and 3.14 with full testing across all versions.</p>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#version-support-matrix","title":"Version Support Matrix","text":"Python Version Support Status Nox Testing CI Testing Notes 3.10 \u2705 Supported \u2705 All versions \u2705 Full CI/CD Minimum version, requires backports 3.11 \u2705 Supported \u2705 All versions \u2705 Full CI/CD LTS version (EOL Oct 2027) 3.12 \u2705 Supported \u2705 All versions \u2705 Full CI/CD Default/recommended version 3.13 \u2705 Supported \u2705 All versions \u2705 Full CI/CD Latest stable, PEP 594 removals 3.14 \u2705 Supported \u2705 All versions \u2705 Full CI/CD Latest (Oct 2025), free-threaded, JIT 3.15+ \u26a0\ufe0f Not tested \u274c None \u274c No CI/CD May work but not guaranteed","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#python-310-support-backports-needed","title":"Python 3.10 Support (Backports Needed)","text":"<p>Since Python 3.10 is the minimum version, some features from newer versions require backport packages:</p>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#required-backports-for-310","title":"Required Backports for 3.10","text":"<pre><code>dependencies = [\n    # TOML support (tomllib added in 3.11)\n    \"tomli&gt;=2.0.0; python_version &lt; '3.11'\",\n\n    # Exception groups (added in 3.11)\n    \"exceptiongroup&gt;=1.1.0; python_version &lt; '3.11'\",\n\n    # Newer typing features\n    \"typing-extensions&gt;=4.12.0\",  # Always useful for backporting latest typing features\n]\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#code-patterns-for-310-compatibility","title":"Code Patterns for 3.10 Compatibility","text":"<pre><code># TOML parsing\nimport sys\nif sys.version_info &gt;= (3, 11):\n    import tomllib\nelse:\n    import tomli as tomllib\n\n# Or use try/except\ntry:\n    import tomllib\nexcept ModuleNotFoundError:\n    import tomli as tomllib\n\n# Exception groups (use exceptiongroup backport for 3.10)\ntry:\n    ExceptionGroup\nexcept NameError:\n    from exceptiongroup import ExceptionGroup\n\n# Typing features\nfrom typing_extensions import Self, TypeVarTuple, Never\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#built-in-features-python-311","title":"Built-in Features (Python 3.11+)","text":"<p>The following features are natively available in Python 3.11+ and do not require backport packages:</p>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#standard-library-additions","title":"Standard Library Additions","text":"<ul> <li><code>tomllib</code>: Native TOML parser (PEP 680)</li> </ul> <pre><code>import tomllib  # No need for tomli backport\n\nwith open(\"pyproject.toml\", \"rb\") as f:\n    data = tomllib.load(f)\n</code></pre> <ul> <li><code>asyncio.TaskGroup</code>: Structured concurrency (PEP 654)</li> </ul> <pre><code>import asyncio\n\nasync def main():\n    async with asyncio.TaskGroup() as tg:\n        tg.create_task(task1())\n        tg.create_task(task2())\n</code></pre> <ul> <li><code>ExceptionGroup</code>: Native exception groups (PEP 654)</li> </ul> <pre><code>try:\n    ...\nexcept* ValueError as eg:  # Note the * syntax\n    handle_value_errors(eg)\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#typing-improvements","title":"Typing Improvements","text":"<ul> <li><code>typing.Self</code>: Self-referential type annotations (PEP 673)</li> </ul> <pre><code>from typing import Self\n\nclass Builder:\n    def set_value(self, value: int) -&gt; Self:\n        self.value = value\n        return self\n</code></pre> <ul> <li><code>typing.TypeVarTuple</code>: Variadic generics (PEP 646)</li> <li><code>typing.Never</code>: Bottom type (PEP 484)</li> <li><code>typing.LiteralString</code>: Literal string type (PEP 675)</li> </ul>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#other-enhancements","title":"Other Enhancements","text":"<ul> <li>Fine-grained error locations in tracebacks</li> <li>Faster startup time (10-60% improvement)</li> <li>Better exception notes with <code>.add_note()</code></li> </ul>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#python-313-changes","title":"Python 3.13 Changes","text":"","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#pep-594-module-removals","title":"PEP 594: Module Removals","text":"<p>Python 3.13 removed the following deprecated modules. If your code uses them, you'll need replacements:</p>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#removed-modules","title":"Removed Modules","text":"Module Purpose Replacement <code>cgi</code>, <code>cgitb</code> CGI scripts Use <code>legacy-cgi</code> package or modern web frameworks <code>imghdr</code>, <code>sndhdr</code> Image/sound header detection Use <code>filetype</code> or <code>python-magic</code> <code>mailcap</code> Mailcap file handling Use <code>mailcap-fix</code> package <code>nntplib</code> NNTP protocol Use <code>nntplib-py3</code> package <code>telnetlib</code> Telnet protocol Use <code>telnetlib3</code> package <code>uu</code> UU encoding Use <code>base64</code> module <code>aifc</code>, <code>audioop</code>, <code>chunk</code>, <code>sunau</code> Audio file handling Use <code>audiofile</code> or specialized libraries <code>crypt</code> Unix password hashing Use <code>bcrypt</code> or <code>passlib</code> <code>msilib</code> Windows Installer Windows-specific, use <code>pywin32</code> <code>nis</code>, <code>spwd</code>, <code>ossaudiodev</code> Unix-specific modules Platform-specific alternatives <code>pipes</code> Shell command pipelines Use <code>subprocess</code> module <code>xdrlib</code> XDR data Use <code>xdrlib3</code> package","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#how-to-handle-removals","title":"How to Handle Removals","text":"<p>If you do use these modules, add conditional dependencies:</p> <pre><code># In pyproject.toml dependencies list\ndependencies = [\n    # ... other deps ...\n\n    # Add replacements for Python 3.13+\n    \"legacy-cgi&gt;=2.6.1; python_version &gt;= '3.13'\",  # For cgi module\n    \"filetype&gt;=1.2.0\",  # Better alternative to imghdr/sndhdr\n    \"python-magic&gt;=0.4.27\",  # Alternative file type detection\n]\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#python-313-improvements","title":"Python 3.13 Improvements","text":"<ul> <li>Experimental free-threaded mode (no GIL) with <code>python3.13t</code></li> <li>Just-in-Time (JIT) compiler (experimental, opt-in)</li> <li>Improved error messages with better suggestions</li> <li>Better typing support for generics</li> </ul>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#python-314-changes","title":"Python 3.14 Changes","text":"<p>Python 3.14.0 was released on October 7, 2025, with significant performance and concurrency improvements.</p>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#free-threaded-python-pep-779","title":"Free-Threaded Python (PEP 779)","text":"<p>Python 3.14 officially supports free-threaded mode (no Global Interpreter Lock):</p> <pre><code># Install free-threaded Python\nuv python install 3.14t\n\n# Check if GIL is disabled\npython -c \"import sys; print(f'GIL enabled: {sys._is_gil_enabled()}')\"\n</code></pre> <p>Important Considerations:</p> <ul> <li>Not all packages support free-threaded mode yet</li> <li>Some C extensions require GIL</li> <li>Performance may vary - benchmark your workload</li> <li>Use standard Python 3.14 unless you specifically need multi-threading</li> </ul>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#deferred-annotation-evaluation-pep-649","title":"Deferred Annotation Evaluation (PEP 649)","text":"<p>Breaking Change: Annotations are no longer evaluated at function definition time.</p> <pre><code># Python 3.13 and earlier\ndef func(x: expensive_type_check()):  # Evaluated immediately\n    pass\n\n# Python 3.14\ndef func(x: expensive_type_check()):  # Deferred until introspection\n    pass\n</code></pre> <p>Impact on Runtime Type Checking:</p> <ul> <li>Libraries like Pydantic and dataclasses handle this automatically</li> <li>Custom type introspection code may need updates</li> <li>Access annotations via <code>__annotations__</code> or <code>inspect.get_annotations()</code></li> </ul>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#template-strings-pep-750","title":"Template Strings (PEP 750)","text":"<p>Python 3.14 adds template strings (t-strings):</p> <pre><code>name = \"world\"\nmessage = t\"Hello {name}\"  # New syntax\n</code></pre> <p>This project does not require t-strings - standard f-strings work across all versions.</p>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#deprecations","title":"Deprecations","text":"<p><code>from __future__ import annotations</code> is deprecated:</p> <ul> <li>This template's <code>check_type_hints.py</code> currently enforces this import</li> <li>Deprecation in 3.14, removal not before Python 3.13 EOL (2029)</li> <li>Continue using it for now (required for 3.10 compatibility)</li> <li>We'll update the template before 2029</li> </ul> <p>NotImplemented Boolean Context:</p> <ul> <li>Using <code>NotImplemented</code> in boolean contexts now raises <code>TypeError</code></li> <li>Was <code>DeprecationWarning</code> since Python 3.9</li> </ul>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#new-features","title":"New Features","text":"<ul> <li>compression.zstd module: Native Zstandard compression</li> <li>pathlib enhancements: Recursive copy/move methods</li> <li>Experimental JIT compiler: Included in official binaries</li> <li>Better error messages: More context and suggestions</li> <li>Syntax highlighting: In default interactive shell</li> <li>Android platform support: Official binary releases</li> <li>Emscripten support: Tier 3 platform support</li> </ul>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#testing-with-python-314","title":"Testing with Python 3.14","text":"<pre><code># Install Python 3.14\nuv python install 3.14\n\n# Run tests with 3.14\nuv run --python 3.14 pytest\n\n# Test all versions including 3.14\nnox -s test\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#cross-version-dependency-patterns","title":"Cross-Version Dependency Patterns","text":"","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#conditional-dependencies-by-python-version","title":"Conditional Dependencies by Python Version","text":"<p>UV automatically installs the correct packages based on Python version:</p> <pre><code>dependencies = [\n    # Install only on older Python versions (if you support &lt; 3.11)\n    \"tomli&gt;=2.0.0; python_version &lt; '3.11'\",\n    \"exceptiongroup&gt;=1.1.0; python_version &lt; '3.11'\",\n\n    # Install only on newer Python versions\n    \"legacy-cgi&gt;=2.6.1; python_version &gt;= '3.13'\",\n\n    # Install on specific version ranges\n    \"typing-extensions&gt;=4.12.0; python_version &lt; '3.13'\",\n]\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#platform-specific-dependencies","title":"Platform-Specific Dependencies","text":"<p>Combine version and platform markers:</p> <pre><code>dependencies = [\n    # Windows-specific for Python 3.13+\n    \"pywin32&gt;=306; sys_platform == 'win32' and python_version &gt;= '3.13'\",\n\n    # Unix-specific backport\n    \"unix-helpers&gt;=1.0; sys_platform != 'win32'\",\n]\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#environment-markers-reference","title":"Environment Markers Reference","text":"Marker Example Description <code>python_version</code> <code>python_version &gt;= '3.11'</code> Python version comparison <code>python_full_version</code> <code>python_full_version == '3.11.2'</code> Exact version match <code>sys_platform</code> <code>sys_platform == 'linux'</code> Operating system <code>platform_machine</code> <code>platform_machine == 'x86_64'</code> CPU architecture <code>platform_system</code> <code>platform_system == 'Darwin'</code> OS name (Darwin=macOS) <code>implementation_name</code> <code>implementation_name == 'cpython'</code> Python implementation <p>See: PEP 508 - Dependency specification for Python Software Packages</p>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#type-hint-syntax","title":"Type Hint Syntax","text":"","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#modern-union-syntax-310","title":"Modern Union Syntax (3.10+)","text":"<p>This project requires the <code>from __future__ import annotations</code> import when using <code>|</code> union syntax:</p> <pre><code>from __future__ import annotations\n\ndef process(data: str | bytes) -&gt; int | None:\n    \"\"\"This is enforced by scripts/check_type_hints.py\"\"\"\n    ...\n</code></pre> <p>Why? While Python 3.10+ supports <code>|</code> natively, the future import:</p> <ul> <li>Ensures forward compatibility</li> <li>Makes runtime type evaluation consistent</li> <li>Improves code clarity across versions</li> <li>Required by our CI checks</li> </ul> <p>Validation: Run <code>python scripts/check_type_hints.py --fix</code> to automatically add missing imports.</p>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#typing-best-practices","title":"Typing Best Practices","text":"<pre><code>from __future__ import annotations\n\nfrom typing import TYPE_CHECKING, Self\n\nif TYPE_CHECKING:\n    # Import types only for type checking (avoids circular imports)\n    from mypackage.models import User\n\nclass UserManager:\n    def create(self, name: str) -&gt; Self:\n        \"\"\"Returns same type as the class.\"\"\"\n        return type(self)()\n\n    def get_user(self, user_id: int) -&gt; User:\n        \"\"\"Uses forward reference safely.\"\"\"\n        ...\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#tool-configuration","title":"Tool Configuration","text":"","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#ruff-linter-formatter","title":"Ruff (Linter &amp; Formatter)","text":"<p>Configured to target the selected Python version:</p> <pre><code>[tool.ruff]\ntarget-version = \"py312\"  # py311, py312, or py313\n</code></pre> <p>This ensures Ruff:</p> <ul> <li>Only suggests syntax available in your target version</li> <li>Flags usage of deprecated or removed features</li> <li>Applies version-appropriate optimizations</li> </ul>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#basedpyright-type-checker","title":"BasedPyright (Type Checker)","text":"<p>Configured to match your Python version:</p> <pre><code>[tool.basedpyright]\npythonVersion = \"3.12\"  # 3.11, 3.12, or 3.13\ntypeCheckingMode = \"strict\"\n</code></pre> <p>This ensures BasedPyright:</p> <ul> <li>Uses correct type semantics for your version</li> <li>Validates compatibility with your target version</li> <li>Checks typing features availability</li> </ul>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#testing-across-versions","title":"Testing Across Versions","text":"","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#nox-sessions","title":"Nox Sessions","text":"<p>Test across all supported versions:</p> <pre><code># Run tests on all Python versions (3.10, 3.11, 3.12, 3.13, 3.14)\nnox -s test\n\n# Run linting on all versions\nnox -s lint\n\n# Run type checking on all versions\nnox -s typecheck\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#cicd-matrix","title":"CI/CD Matrix","text":"<p>Our GitHub Actions workflow tests on all supported versions:</p> <pre><code>strategy:\n  matrix:\n    python-version: [\"3.10\", \"3.11\", \"3.12\", \"3.13\", \"3.14\"]\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#migration-guide","title":"Migration Guide","text":"","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#migrating-to-python-310","title":"Migrating to Python 3.10+","text":"<p>If migrating from Python 3.9 or earlier:</p> <ol> <li>Update Python version:</li> </ol> <pre><code># Install Python 3.10+\nuv python install 3.10\n\n# Update requires-python in pyproject.toml\nrequires-python = \"&gt;=3.10,&lt;3.15\"\n</code></pre> <ol> <li>Add backport packages for 3.10 compatibility:</li> </ol> <pre><code>uv add \"tomli&gt;=2.0.0; python_version &lt; '3.11'\"\nuv add \"exceptiongroup&gt;=1.1.0; python_version &lt; '3.11'\"\nuv add \"typing-extensions&gt;=4.12.0\"\n</code></pre> <ol> <li>Use conditional imports for 3.10/3.11+ compatibility:</li> </ol> <pre><code># TOML parsing - works on 3.10 and 3.11+\ntry:\n    import tomllib\nexcept ModuleNotFoundError:\n    import tomli as tomllib\n</code></pre> <ol> <li>Test across versions:</li> </ol> <pre><code>nox -s test\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#upgrading-from-python-310-to-311","title":"Upgrading from Python 3.10 to 3.11+","text":"<p>When dropping 3.10 support in the future:</p> <ol> <li>Remove backport packages:</li> </ol> <pre><code>uv remove tomli exceptiongroup\n</code></pre> <ol> <li>Update imports to use native modules:</li> </ol> <pre><code># Before (3.10 compat)\ntry:\n    import tomllib\nexcept ModuleNotFoundError:\n    import tomli as tomllib\n\n# After (3.11+ only)\nimport tomllib\n</code></pre> <ol> <li>Update requires-python:</li> </ol> <pre><code>requires-python = \"&gt;=3.11,&lt;3.15\"\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#preparing-for-python-314","title":"Preparing for Python 3.14","text":"<p>Python 3.14 (expected October 2025):</p> <ul> <li>Monitor deprecation warnings: <code>python -W default</code></li> <li>Review PEPs targeting 3.14</li> <li>Test with pre-release versions: <code>uv python install 3.14.0a1</code></li> </ul>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#troubleshooting","title":"Troubleshooting","text":"","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#import-errors-on-python-313","title":"Import Errors on Python 3.13","text":"<p>Problem: <code>ModuleNotFoundError: No module named 'cgi'</code></p> <p>Solution: Add the replacement package:</p> <pre><code>uv add \"legacy-cgi&gt;=2.6.1; python_version &gt;= '3.13'\"\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#type-hint-syntax-errors","title":"Type Hint Syntax Errors","text":"<p>Problem: <code>TypeError: unsupported operand type(s) for |: 'type' and 'type'</code></p> <p>Solution: Add future import:</p> <pre><code>from __future__ import annotations\n</code></pre> <p>Or run auto-fix:</p> <pre><code>python scripts/check_type_hints.py --fix\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#version-detection","title":"Version Detection","text":"<p>Check which Python version is active:</p> <pre><code># Show active Python version\npython --version\n\n# Show all available Python versions (with UV)\nuv python list\n\n# Install specific version\nuv python install 3.13\n\n# Use specific version\nuv run --python 3.13 pytest\n</code></pre>","tags":["guide","development","requirements"]},{"location":"PYTHON_COMPATIBILITY/#references","title":"References","text":"<ul> <li>Python 3.11 Release Notes</li> <li>Python 3.12 Release Notes</li> <li>Python 3.13 Release Notes</li> <li>PEP 594 - Removing dead batteries from the standard library</li> <li>UV Documentation - Dependency Specifiers</li> <li>PEP 508 - Dependency specification</li> </ul>","tags":["guide","development","requirements"]},{"location":"api-reference/","title":"API Reference","text":"<p>Complete API documentation for Python Libs.</p>","tags":["api","reference"]},{"location":"api-reference/#core-module","title":"Core Module","text":"","tags":["api","reference"]},{"location":"api-reference/#python_libs.core.config","title":"<code>python_libs.core.config</code>","text":"<p>Configuration settings for Python Libs.</p> <p>Settings are loaded from environment variables with the prefix 'PYTHON_LIBS_'. Pydantic-settings handles the parsing and validation.</p>","tags":["api","reference"]},{"location":"api-reference/#python_libs.core.config-classes","title":"Classes","text":"","tags":["api","reference"]},{"location":"api-reference/#python_libs.core.config.Settings","title":"<code>Settings</code>","text":"<p>               Bases: <code>BaseSettings</code></p> <p>Configuration settings for the application, loaded from environment variables.</p> <p>Attributes:</p> Name Type Description <code>log_level</code> <code>Literal['DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL']</code> <p>The logging level for the application.</p> <code>json_logs</code> <code>bool</code> <p>Flag to enable or disable JSON formatted logs.</p> <code>include_timestamp</code> <code>bool</code> <p>Flag to include timestamps in logs.</p>","tags":["api","reference"]},{"location":"api-reference/#utils-module","title":"Utils Module","text":"","tags":["api","reference"]},{"location":"api-reference/#logging","title":"Logging","text":"","tags":["api","reference"]},{"location":"api-reference/#python_libs.utils.logging","title":"<code>python_libs.utils.logging</code>","text":"<p>Structured logging configuration using structlog and rich.</p> <p>Provides JSON-formatted logs for production environments with rich console output for development. All logs include contextual information for debugging and monitoring.</p> <p>Features: - Rich console output for development - JSON-formatted logs for production - Correlation ID support for distributed tracing - Performance logging helpers</p> <p>Note: Module named \"logging\" intentionally shadows stdlib for project-specific configuration.</p>","tags":["api","reference"]},{"location":"api-reference/#python_libs.utils.logging-functions","title":"Functions","text":"","tags":["api","reference"]},{"location":"api-reference/#python_libs.utils.logging.setup_logging","title":"<code>setup_logging(level='INFO', json_logs=False, include_timestamp=True, include_correlation=True)</code>","text":"<p>Configure structured logging for the application.</p> <p>Sets up both standard logging and structlog with appropriate handlers for the environment (JSON for production, rich console for development).</p> <p>Parameters:</p> Name Type Description Default <code>level</code> <code>str</code> <p>Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL). Defaults to INFO.</p> <code>'INFO'</code> <code>json_logs</code> <code>bool</code> <p>If True, output JSON logs (production mode). If False, use rich console formatting (development mode). Defaults to False.</p> <code>False</code> <code>include_timestamp</code> <code>bool</code> <p>Whether to include timestamps in log output. Defaults to True.</p> <code>True</code> <code>include_correlation</code> <code>bool</code> <p>Whether to include correlation IDs from request context in log output. Defaults to True. Requires API framework.</p> <code>True</code> Example","tags":["api","reference"]},{"location":"api-reference/#python_libs.utils.logging.setup_logging--development-setup","title":"Development setup","text":"<p>setup_logging(level=\"DEBUG\", json_logs=False)</p>","tags":["api","reference"]},{"location":"api-reference/#python_libs.utils.logging.setup_logging--production-setup-with-correlation","title":"Production setup with correlation","text":"<p>setup_logging(level=\"INFO\", json_logs=True, include_correlation=True)</p>","tags":["api","reference"]},{"location":"api-reference/#python_libs.utils.logging.get_logger","title":"<code>get_logger(name)</code>","text":"<p>Get a structured logger instance.</p> <p>Creates or retrieves a structlog logger with the given name. This should typically be called with name to create module-specific loggers.</p> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>Logger name (typically name of the module).</p> required <p>Returns:</p> Type Description <code>BoundLogger</code> <p>Configured structlog logger instance with methods like:</p> <code>BoundLogger</code> <ul> <li>logger.info()</li> </ul> <code>BoundLogger</code> <ul> <li>logger.debug()</li> </ul> <code>BoundLogger</code> <ul> <li>logger.warning()</li> </ul> <code>BoundLogger</code> <ul> <li>logger.error()</li> </ul> <code>BoundLogger</code> <ul> <li>logger.exception()</li> </ul> Example <p>logger = get_logger(name) logger.info(\"Processing started\", document_id=\"doc_001\") logger.warning(\"Low confidence\", confidence=0.45, threshold=0.5) logger.error(\"Processing failed\", error=\"file_not_found\")</p>","tags":["api","reference"]},{"location":"api-reference/#python_libs.utils.logging.log_performance","title":"<code>log_performance(logger, operation, duration_ms, success=True, **context)</code>","text":"<p>Log performance metrics for an operation.</p> <p>Provides a standardized way to log performance data with operation name, duration, success status, and additional context.</p> <p>Parameters:</p> Name Type Description Default <code>logger</code> <code>BoundLogger</code> <p>Structlog logger instance from get_logger().</p> required <code>operation</code> <code>str</code> <p>Name of the operation being timed.</p> required <code>duration_ms</code> <code>float</code> <p>Duration in milliseconds.</p> required <code>success</code> <code>bool</code> <p>Whether the operation succeeded. Defaults to True.</p> <code>True</code> <code>**context</code> <code>object</code> <p>Additional context key-value pairs to include in the log.</p> <code>{}</code> Example <p>logger = get_logger(name) log_performance( ...     logger, ...     operation=\"image_processing\", ...     duration_ms=42.5, ...     success=True, ...     image_count=10, ...     output_dir=\"/results\", ... )</p>","tags":["api","reference"]},{"location":"cloudflare-api-handoff/","title":"Cloudflare API Package - Handoff Document","text":"<p>Date: 2025-12-04 Repository: python-libs (ByronWilliamsCPA/python-libs) Branch: <code>feat/assured-oss-artifact-registry</code> Target Repository: homelab-infra Package Version: 0.1.0</p>"},{"location":"cloudflare-api-handoff/#executive-summary","title":"Executive Summary","text":"<p>This document describes the <code>cloudflare-api</code> package built for managing Cloudflare IP lists and automating IP range group synchronization. The package was developed in the wrong repository (<code>python-libs</code>) but is ready for migration to <code>homelab-infra</code>.</p>"},{"location":"cloudflare-api-handoff/#what-was-built","title":"What Was Built","text":"<ol> <li>Cloudflare API Client - Python SDK wrapper for managing IP lists, firewall rules, and Access policies</li> <li>IP Range Groups System - Configuration-driven system to sync IP ranges from multiple sources (GitHub, GCP, AWS, static IPs) to Cloudflare lists</li> <li>CLI Tool - Command-line interface for syncing IP groups</li> <li>Comprehensive Tests - 83 tests covering all functionality</li> </ol>"},{"location":"cloudflare-api-handoff/#package-structure","title":"Package Structure","text":"<pre><code>packages/cloudflare-api/\n\u251c\u2500\u2500 src/cloudflare_api/\n\u2502   \u251c\u2500\u2500 __init__.py              # Main package exports\n\u2502   \u251c\u2500\u2500 client.py                # CloudflareAPIClient (IP list CRUD)\n\u2502   \u251c\u2500\u2500 exceptions.py            # Custom exception hierarchy\n\u2502   \u251c\u2500\u2500 models.py                # Pydantic models (IPList, IPListItem, etc.)\n\u2502   \u251c\u2500\u2500 settings.py              # CloudflareAPISettings (env config)\n\u2502   \u2514\u2500\u2500 ip_groups/               # IP Range Groups System\n\u2502       \u251c\u2500\u2500 __init__.py          # IP groups exports\n\u2502       \u251c\u2500\u2500 config.py            # Configuration models (YAML schema)\n\u2502       \u251c\u2500\u2500 fetchers.py          # IP source fetchers (GitHub, GCP, AWS, URL, static)\n\u2502       \u251c\u2500\u2500 manager.py           # IPGroupManager (orchestration)\n\u2502       \u2514\u2500\u2500 cli.py               # CLI commands\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 test_client.py           # Client tests (26 tests)\n\u2502   \u251c\u2500\u2500 test_models.py           # Model tests (13 tests)\n\u2502   \u251c\u2500\u2500 test_settings.py         # Settings tests (12 tests)\n\u2502   \u2514\u2500\u2500 test_ip_groups.py        # IP groups tests (32 tests)\n\u251c\u2500\u2500 pyproject.toml               # Package configuration\n\u2514\u2500\u2500 README.md                    # Package documentation\n</code></pre>"},{"location":"cloudflare-api-handoff/#core-components","title":"Core Components","text":""},{"location":"cloudflare-api-handoff/#1-cloudflare-api-client-clientpy","title":"1. Cloudflare API Client (client.py)","text":"<p>Purpose: High-level wrapper for Cloudflare's official Python SDK</p> <p>Key Methods: - <code>list_ip_lists()</code> - List all IP lists - <code>get_ip_list(list_id)</code> - Get list details - <code>get_ip_list_by_name(name)</code> - Find list by name - <code>create_ip_list(name, kind, description)</code> - Create new list - <code>update_ip_list(list_id, description)</code> - Update list - <code>delete_ip_list(list_id)</code> - Delete list - <code>get_ip_list_items(list_id)</code> - Get items in list - <code>add_ip_list_items(list_id, items)</code> - Add IPs (async) - <code>replace_ip_list_items(list_id, items)</code> - Replace all IPs (async) - <code>delete_ip_list_items(list_id, item_ids)</code> - Delete IPs (async) - <code>ensure_ip_list(name, kind, description)</code> - Get or create list - <code>sync_ip_list(list_id, ips, comments)</code> - Sync list to exact IPs</p> <p>Authentication: Uses <code>CLOUDFLARE_API_TOKEN</code> and <code>CLOUDFLARE_ACCOUNT_ID</code> from environment</p> <p>Error Handling: Converts Cloudflare SDK exceptions to custom exceptions: - <code>CloudflareAuthError</code> - 401 authentication failures - <code>CloudflareRateLimitError</code> - Rate limit exceeded - <code>CloudflareNotFoundError</code> - 404 not found - <code>CloudflareValidationError</code> - 400 bad request - <code>CloudflareConflictError</code> - 409 conflicts (name exists, list in use) - <code>CloudflareBulkOperationError</code> - Bulk operation failures - <code>CloudflareAPIError</code> - General API errors</p> <p>File Location: <code>packages/cloudflare-api/src/cloudflare_api/client.py</code> (692 lines)</p>"},{"location":"cloudflare-api-handoff/#2-ip-range-groups-system","title":"2. IP Range Groups System","text":""},{"location":"cloudflare-api-handoff/#configuration-schema-configpy","title":"Configuration Schema (config.py)","text":"<p>Purpose: Define IP groups and their sources in YAML</p> <p>Models: - <code>SourceType</code> - Enum: <code>static</code>, <code>url</code>, <code>github</code>, <code>google_cloud</code>, <code>aws</code>, <code>azure</code>, <code>cloudflare</code> - <code>IPSourceConfig</code> - Configuration for a single IP source - <code>IPGroupConfig</code> - Configuration for an IP group (maps to a Cloudflare list) - <code>IPGroupsConfig</code> - Root configuration with all groups</p> <p>Example Config (ip_groups.example.yaml): <pre><code>version: \"1.0\"\ncache_ttl_seconds: 3600\ncloudflare_list_prefix: \"\"\n\ngroups:\n  - name: github\n    cloudflare_list_name: github-ips\n    description: \"GitHub Actions and webhook IPs\"\n    enabled: true\n    sources:\n      - type: github\n        services: [actions, hooks, dependabot]\n\n  - name: home-network\n    cloudflare_list_name: home-ips\n    description: \"Home and office IPs\"\n    enabled: true\n    sources:\n      - type: static\n        ips: [\"203.0.113.50\", \"198.51.100.0/24\"]\n</code></pre></p> <p>File Location: <code>packages/cloudflare-api/src/cloudflare_api/ip_groups/config.py</code> (132 lines)</p>"},{"location":"cloudflare-api-handoff/#ip-fetchers-fetcherspy","title":"IP Fetchers (fetchers.py)","text":"<p>Purpose: Fetch IP ranges from various sources</p> <p>Fetcher Classes:</p> Fetcher Source Filters Notes <code>StaticIPFetcher</code> Hardcoded IPs in config IP version For home/office networks <code>URLIPFetcher</code> Generic URL (text or JSON) IP version, JSONPath For custom endpoints <code>GitHubIPFetcher</code> <code>https://api.github.com/meta</code> Services (actions, hooks, etc.), IP version GitHub Actions, webhooks <code>GoogleCloudIPFetcher</code> <code>https://www.gstatic.com/ipranges/cloud.json</code> Regions, services, IP version GCP IP ranges <code>AWSIPFetcher</code> <code>https://ip-ranges.amazonaws.com/ip-ranges.json</code> Regions, services, IP version AWS IP ranges <code>CloudflareIPFetcher</code> <code>https://www.cloudflare.com/ips-v4/6</code> IP version Cloudflare's own IPs <p>Key Features: - IP validation (IPv4/IPv6) - Version filtering (IPv4 only, IPv6 only, or both) - Region filtering (GCP, AWS) - Service filtering (GitHub: actions/hooks, AWS: EC2/S3, etc.) - JSONPath extraction for custom JSON APIs - Auto-detection of IP fields in JSON responses</p> <p>File Location: <code>packages/cloudflare-api/src/cloudflare_api/ip_groups/fetchers.py</code> (518 lines)</p>"},{"location":"cloudflare-api-handoff/#ip-group-manager-managerpy","title":"IP Group Manager (manager.py)","text":"<p>Purpose: Orchestrate fetching and syncing IP groups to Cloudflare</p> <p>Key Methods: - <code>from_config(path)</code> - Load manager from YAML config - <code>fetch_source_ips(source)</code> - Fetch IPs from single source (with caching) - <code>fetch_group_ips(group)</code> - Fetch all IPs for a group (all sources) - <code>preview_group(name)</code> - Preview changes without applying - <code>sync_group(name, dry_run)</code> - Sync a single group to Cloudflare - <code>sync_all(dry_run)</code> - Sync all enabled groups - <code>list_groups()</code> - List configured groups - <code>clear_cache()</code> - Clear cached IP data</p> <p>Caching: - Caches fetched IPs per source (default: 1 hour TTL) - Cache key = hash of source config - Invalidates on config change or TTL expiration</p> <p>Sync Algorithm: 1. Fetch IPs from all sources for the group 2. Deduplicate IPs 3. Ensure Cloudflare list exists (create if missing) 4. Get current IPs from Cloudflare 5. Calculate diff (added, removed, unchanged) 6. Replace all items in Cloudflare list if changed 7. Return <code>SyncResult</code> with stats</p> <p>File Location: <code>packages/cloudflare-api/src/cloudflare_api/ip_groups/manager.py</code> (443 lines)</p>"},{"location":"cloudflare-api-handoff/#cli-tool-clipy","title":"CLI Tool (cli.py)","text":"<p>Purpose: Command-line interface for managing IP groups</p> <p>Commands:</p> <pre><code># List configured groups\ncloudflare-ip-groups list [--json]\n\n# Preview changes for a group\ncloudflare-ip-groups preview &lt;group-name&gt; [--json]\n\n# Sync groups to Cloudflare\ncloudflare-ip-groups sync [--group &lt;name&gt;] [--dry-run]\n\n# Fetch IPs for a group (without syncing)\ncloudflare-ip-groups fetch &lt;group-name&gt; [--json] [--no-cache]\n</code></pre> <p>Configuration: - Default config path: <code>ip_groups.yaml</code> - Override with: <code>-c/--config &lt;path&gt;</code> - Verbose logging: <code>-v/--verbose</code></p> <p>Entry Point: Registered as console script in <code>pyproject.toml</code>: <pre><code>[project.scripts]\ncloudflare-ip-groups = \"cloudflare_api.ip_groups.cli:main\"\n</code></pre></p> <p>File Location: <code>packages/cloudflare-api/src/cloudflare_api/ip_groups/cli.py</code> (254 lines)</p>"},{"location":"cloudflare-api-handoff/#dependencies","title":"Dependencies","text":""},{"location":"cloudflare-api-handoff/#runtime-dependencies","title":"Runtime Dependencies","text":"<pre><code>dependencies = [\n    \"cloudflare&gt;=4.0.0\",      # Official Cloudflare SDK\n    \"pydantic&gt;=2.0.0\",        # Data validation\n    \"pydantic-settings&gt;=2.0.0\", # Settings management\n    \"httpx&gt;=0.25.0\",          # HTTP client for fetchers\n    \"pyyaml&gt;=6.0.0\",          # YAML config parsing\n]\n</code></pre>"},{"location":"cloudflare-api-handoff/#development-dependencies","title":"Development Dependencies","text":"<pre><code>dev = [\n    \"pytest&gt;=7.4.0\",\n    \"pytest-cov&gt;=4.1.0\",\n    \"pytest-asyncio&gt;=0.21.0\",\n    \"respx&gt;=0.21.0\",          # HTTP mocking for tests\n]\n</code></pre>"},{"location":"cloudflare-api-handoff/#environment-variables","title":"Environment Variables","text":"<pre><code># Required\nCLOUDFLARE_API_TOKEN=your-api-token-here\nCLOUDFLARE_ACCOUNT_ID=your-account-id-here\n\n# Optional\nCLOUDFLARE_ZONE_ID=your-zone-id        # For zone-level operations\nCLOUDFLARE_API_EMAIL=email@example.com # Legacy auth (not recommended)\nCLOUDFLARE_API_KEY=legacy-key          # Legacy auth (not recommended)\n\n# Optional: Timeouts\nCLOUDFLARE_BULK_OPERATION_TIMEOUT=300  # Seconds (default: 300)\nCLOUDFLARE_BULK_OPERATION_POLL_INTERVAL=2  # Seconds (default: 2)\n</code></pre>"},{"location":"cloudflare-api-handoff/#test-coverage","title":"Test Coverage","text":"<p>Total: 83 tests, all passing</p>"},{"location":"cloudflare-api-handoff/#test-breakdown","title":"Test Breakdown","text":"<ol> <li>Client Tests (test_client.py) - 26 tests</li> <li>IP list CRUD operations</li> <li>Item operations (add, replace, delete)</li> <li>Bulk operation handling</li> <li> <p>Error handling</p> </li> <li> <p>Model Tests (test_models.py) - 13 tests</p> </li> <li>IPList, IPListItem, BulkOperation models</li> <li>Enum validation (ListKind, BulkOperationStatus)</li> <li> <p>API dict conversion</p> </li> <li> <p>Settings Tests (test_settings.py) - 12 tests</p> </li> <li>Environment variable loading</li> <li>Singleton pattern</li> <li> <p>Validation</p> </li> <li> <p>IP Groups Tests (test_ip_groups.py) - 32 tests</p> </li> <li>Configuration loading</li> <li>All fetchers (static, URL, GitHub, GCP, AWS)</li> <li>IP validation</li> <li>Manager operations</li> <li>Caching</li> </ol> <p>Run Tests: <pre><code>uv run pytest packages/cloudflare-api/tests/ -v\n</code></pre></p>"},{"location":"cloudflare-api-handoff/#usage-examples","title":"Usage Examples","text":""},{"location":"cloudflare-api-handoff/#basic-api-client","title":"Basic API Client","text":"<pre><code>from cloudflare_api import CloudflareAPIClient\n\nclient = CloudflareAPIClient()\n\n# Create an IP list\nip_list = client.create_ip_list(\n    name=\"blocked-ips\",\n    kind=\"ip\",\n    description=\"Blocked IP addresses\"\n)\n\n# Add IPs\nclient.add_ip_list_items(ip_list.id, [\n    {\"ip\": \"1.2.3.4\", \"comment\": \"Spam bot\"},\n    {\"ip\": \"5.6.7.8/24\", \"comment\": \"Bad network\"},\n])\n\n# Get all items\nitems = client.get_ip_list_items(ip_list.id)\n\n# Sync to exact set of IPs\nclient.sync_ip_list(ip_list.id, [\"10.0.0.1\", \"10.0.0.2\"])\n</code></pre>"},{"location":"cloudflare-api-handoff/#ip-groups-configuration","title":"IP Groups Configuration","text":"<pre><code>from cloudflare_api.ip_groups import IPGroupManager\n\n# Load from config file\nmanager = IPGroupManager.from_config(\"ip_groups.yaml\")\n\n# List all groups\ngroups = manager.list_groups()\nfor group in groups:\n    print(f\"{group['name']}: {group['enabled']}\")\n\n# Preview changes\npreview = manager.preview_group(\"github\")\nprint(f\"Will add: {len(preview['to_add'])} IPs\")\nprint(f\"Will remove: {len(preview['to_remove'])} IPs\")\n\n# Sync all groups\nresults = manager.sync_all()\nfor result in results:\n    if result.error:\n        print(f\"\u274c {result.group_name}: {result.error}\")\n    else:\n        print(f\"\u2713 {result.group_name}: {result.ips_count} IPs\")\n</code></pre>"},{"location":"cloudflare-api-handoff/#cli-usage","title":"CLI Usage","text":"<pre><code># Create config file\ncp ip_groups.example.yaml ip_groups.yaml\n# Edit ip_groups.yaml with your IP groups\n\n# Set environment variables\nexport CLOUDFLARE_API_TOKEN=your-token\nexport CLOUDFLARE_ACCOUNT_ID=your-account-id\n\n# Preview changes\ncloudflare-ip-groups preview github\n\n# Sync all groups\ncloudflare-ip-groups sync\n\n# Dry run (preview without applying)\ncloudflare-ip-groups sync --dry-run\n</code></pre>"},{"location":"cloudflare-api-handoff/#automation-setup-cron-job","title":"Automation Setup (Cron Job)","text":""},{"location":"cloudflare-api-handoff/#example-crontab-entry","title":"Example Crontab Entry","text":"<pre><code># Sync IP groups every hour\n0 * * * * cd /path/to/homelab-infra &amp;&amp; /usr/bin/cloudflare-ip-groups sync &gt;&gt; /var/log/cloudflare-sync.log 2&gt;&amp;1\n\n# Sync every 6 hours\n0 */6 * * * cd /path/to/homelab-infra &amp;&amp; /usr/bin/cloudflare-ip-groups sync\n\n# Daily sync with notifications\n0 2 * * * cd /path/to/homelab-infra &amp;&amp; /usr/bin/cloudflare-ip-groups sync || echo \"Cloudflare sync failed\" | mail -s \"IP Groups Sync Failed\" admin@example.com\n</code></pre>"},{"location":"cloudflare-api-handoff/#systemd-timer-alternative","title":"Systemd Timer (Alternative)","text":"<p>Service: <code>/etc/systemd/system/cloudflare-sync.service</code> <pre><code>[Unit]\nDescription=Sync Cloudflare IP Groups\nAfter=network.target\n\n[Service]\nType=oneshot\nUser=homelab\nWorkingDirectory=/path/to/homelab-infra\nEnvironment=\"CLOUDFLARE_API_TOKEN=your-token\"\nEnvironment=\"CLOUDFLARE_ACCOUNT_ID=your-account-id\"\nExecStart=/usr/bin/cloudflare-ip-groups sync\n</code></pre></p> <p>Timer: <code>/etc/systemd/system/cloudflare-sync.timer</code> <pre><code>[Unit]\nDescription=Sync Cloudflare IP Groups Hourly\n\n[Timer]\nOnCalendar=hourly\nPersistent=true\n\n[Install]\nWantedBy=timers.target\n</code></pre></p> <p>Enable: <pre><code>sudo systemctl enable cloudflare-sync.timer\nsudo systemctl start cloudflare-sync.timer\n</code></pre></p>"},{"location":"cloudflare-api-handoff/#migration-steps-to-homelab-infra","title":"Migration Steps to homelab-infra","text":""},{"location":"cloudflare-api-handoff/#1-copy-package-files","title":"1. Copy Package Files","text":"<pre><code># In homelab-infra repository\nmkdir -p packages/cloudflare-api\ncp -r /home/byron/python-libs/packages/cloudflare-api/* packages/cloudflare-api/\n</code></pre>"},{"location":"cloudflare-api-handoff/#2-copy-example-configuration","title":"2. Copy Example Configuration","text":"<pre><code>cp /home/byron/python-libs/ip_groups.example.yaml ip_groups.example.yaml\n</code></pre>"},{"location":"cloudflare-api-handoff/#3-update-pyprojecttoml-root","title":"3. Update pyproject.toml (Root)","text":"<p>Add to workspace members: <pre><code>[tool.uv.workspace]\nmembers = [\n    \"packages/cloudflare-api\",\n    # ... other packages\n]\n\n[tool.uv.sources]\nbyronwilliamscpa-cloudflare-api = { workspace = true }\n</code></pre></p>"},{"location":"cloudflare-api-handoff/#4-install-package","title":"4. Install Package","text":"<pre><code># In homelab-infra\nuv sync --all-extras\n</code></pre>"},{"location":"cloudflare-api-handoff/#5-configure-environment","title":"5. Configure Environment","text":"<pre><code># Create .env file in homelab-infra\ncat &gt;&gt; .env &lt;&lt;EOF\nCLOUDFLARE_API_TOKEN=your-api-token-here\nCLOUDFLARE_ACCOUNT_ID=your-account-id-here\nEOF\n</code></pre>"},{"location":"cloudflare-api-handoff/#6-create-ip-groups-configuration","title":"6. Create IP Groups Configuration","text":"<pre><code># Copy example and customize\ncp ip_groups.example.yaml ip_groups.yaml\n\n# Edit ip_groups.yaml:\n# - Update home-network with your actual IPs\n# - Enable/disable groups as needed\n# - Configure which services/regions to include\n</code></pre>"},{"location":"cloudflare-api-handoff/#7-test-installation","title":"7. Test Installation","text":"<pre><code># List groups\ncloudflare-ip-groups list\n\n# Preview (dry run)\ncloudflare-ip-groups sync --dry-run\n\n# Sync\ncloudflare-ip-groups sync\n</code></pre>"},{"location":"cloudflare-api-handoff/#file-locations-python-libs-repo","title":"File Locations (python-libs repo)","text":"<p>All files are in branch: <code>feat/assured-oss-artifact-registry</code></p>"},{"location":"cloudflare-api-handoff/#core-package-files","title":"Core Package Files","text":"<pre><code>packages/cloudflare-api/\n\u251c\u2500\u2500 src/cloudflare_api/\n\u2502   \u251c\u2500\u2500 __init__.py                           # Line count: 66\n\u2502   \u251c\u2500\u2500 client.py                             # Line count: 692\n\u2502   \u251c\u2500\u2500 exceptions.py                         # Line count: 138\n\u2502   \u251c\u2500\u2500 models.py                             # Line count: 136\n\u2502   \u251c\u2500\u2500 settings.py                           # Line count: 136\n\u2502   \u2514\u2500\u2500 ip_groups/\n\u2502       \u251c\u2500\u2500 __init__.py                       # Line count: 46\n\u2502       \u251c\u2500\u2500 config.py                         # Line count: 132\n\u2502       \u251c\u2500\u2500 fetchers.py                       # Line count: 518\n\u2502       \u251c\u2500\u2500 manager.py                        # Line count: 443\n\u2502       \u2514\u2500\u2500 cli.py                            # Line count: 254\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 conftest.py                           # Line count: 62\n\u2502   \u251c\u2500\u2500 test_client.py                        # Line count: 626\n\u2502   \u251c\u2500\u2500 test_models.py                        # Line count: 208\n\u2502   \u251c\u2500\u2500 test_settings.py                      # Line count: 162\n\u2502   \u2514\u2500\u2500 test_ip_groups.py                     # Line count: 522\n\u251c\u2500\u2500 pyproject.toml                            # Line count: 67\n\u2514\u2500\u2500 README.md                                 # Line count: 325\n</code></pre>"},{"location":"cloudflare-api-handoff/#configuration-examples","title":"Configuration Examples","text":"<pre><code>ip_groups.example.yaml                        # Line count: 176\n</code></pre>"},{"location":"cloudflare-api-handoff/#documentation","title":"Documentation","text":"<pre><code>docs/cloudflare-api-handoff.md               # This file\n</code></pre> <p>Total Lines of Code: ~4,709 lines</p>"},{"location":"cloudflare-api-handoff/#key-design-decisions","title":"Key Design Decisions","text":""},{"location":"cloudflare-api-handoff/#1-official-cloudflare-sdk","title":"1. Official Cloudflare SDK","text":"<ul> <li>Uses <code>cloudflare&gt;=4.0.0</code> SDK instead of raw API calls</li> <li>Handles authentication, rate limiting, retries automatically</li> <li>Type-safe with SDK models</li> </ul>"},{"location":"cloudflare-api-handoff/#2-configuration-driven","title":"2. Configuration-Driven","text":"<ul> <li>YAML configuration for IP groups (not hardcoded)</li> <li>Easy to add/remove groups and sources</li> <li>Version controlled alongside infrastructure</li> </ul>"},{"location":"cloudflare-api-handoff/#3-source-abstraction","title":"3. Source Abstraction","text":"<ul> <li>Fetcher pattern for pluggable IP sources</li> <li>Easy to add new sources (Azure, custom APIs)</li> <li>Consistent interface for all sources</li> </ul>"},{"location":"cloudflare-api-handoff/#4-caching-strategy","title":"4. Caching Strategy","text":"<ul> <li>Caches fetched IPs to reduce API calls</li> <li>Invalidates on config change or TTL expiration</li> <li>Respects rate limits of external APIs</li> </ul>"},{"location":"cloudflare-api-handoff/#5-error-handling","title":"5. Error Handling","text":"<ul> <li>Custom exception hierarchy</li> <li>Converts SDK exceptions to domain exceptions</li> <li>Provides context in error messages</li> </ul>"},{"location":"cloudflare-api-handoff/#6-idempotent-syncing","title":"6. Idempotent Syncing","text":"<ul> <li><code>sync_ip_list()</code> replaces all items atomically</li> <li>Handles concurrent bulk operations</li> <li>Returns detailed diff (added, removed, unchanged)</li> </ul>"},{"location":"cloudflare-api-handoff/#7-testing-strategy","title":"7. Testing Strategy","text":"<ul> <li>Mocked HTTP responses (no live API calls)</li> <li>Tests all fetchers with realistic data</li> <li>Tests error conditions and edge cases</li> </ul>"},{"location":"cloudflare-api-handoff/#known-limitations","title":"Known Limitations","text":"<ol> <li>Azure Support: Azure fetcher defined but not tested (Azure IP ranges URL is a download link, not direct JSON)</li> <li>Bulk Operations: Cloudflare API has pending operation limits (handled with error)</li> <li>Large Lists: Very large IP lists (&gt;10,000 items) may hit API limits</li> <li>JSONPath: Simple JSONPath implementation (supports <code>key[*].field</code>, not complex expressions)</li> <li>Rate Limiting: No retry logic for rate limits (SDK handles it, but could be enhanced)</li> </ol>"},{"location":"cloudflare-api-handoff/#recommended-next-steps","title":"Recommended Next Steps","text":""},{"location":"cloudflare-api-handoff/#for-homelab-infra-integration","title":"For homelab-infra Integration","text":"<ol> <li>Migrate Package (see Migration Steps above)</li> <li>Configure IP Groups for homelab environment:</li> <li>Home/office network IPs</li> <li>GitHub Actions for CI/CD</li> <li>Cloud provider IPs (GCP, AWS)</li> <li>Setup Cron Job for hourly syncing</li> <li>Create Cloudflare Access Policies that reference the synced IP lists</li> <li>Monitor Sync Logs for failures</li> </ol>"},{"location":"cloudflare-api-handoff/#potential-enhancements","title":"Potential Enhancements","text":"<ol> <li>GitHub Action Workflow - Automate syncing on schedule or PR merge</li> <li>Alerting - Notify on sync failures (email, Slack, PagerDuty)</li> <li>Metrics - Track sync duration, IP count changes over time</li> <li>Webhooks - Trigger sync when infrastructure changes</li> <li>Backup/Restore - Export current Cloudflare lists before sync</li> <li>Diff Reports - Email detailed diff of IP changes</li> <li>Azure Support - Implement full Azure IP fetcher</li> <li>Web UI - Dashboard for viewing groups, previewing changes</li> </ol>"},{"location":"cloudflare-api-handoff/#support-questions","title":"Support &amp; Questions","text":"<p>Original Implementation: Built by Claude Code in <code>python-libs</code> repository Branch: <code>feat/assured-oss-artifact-registry</code> Tests: 83 tests, all passing Documentation: README.md in package directory</p> <p>Contact: Byron Williams byronawilliams@gmail.com</p>"},{"location":"cloudflare-api-handoff/#appendix-example-ip-groups-configuration","title":"Appendix: Example IP Groups Configuration","text":"<p>See ip_groups.example.yaml for complete example.</p> <p>Minimal Configuration: <pre><code>version: \"1.0\"\ncache_ttl_seconds: 3600\n\ngroups:\n  - name: home-network\n    cloudflare_list_name: home-ips\n    enabled: true\n    sources:\n      - type: static\n        ips:\n          - \"203.0.113.50\"        # Your home IP\n          - \"198.51.100.0/24\"     # Your office network\n\n  - name: github-actions\n    cloudflare_list_name: github-ips\n    enabled: true\n    sources:\n      - type: github\n        services: [actions]\n        ip_version: 4\n</code></pre></p> <p>Advanced Configuration (Multi-Source Group): <pre><code>  - name: ci-cd\n    cloudflare_list_name: ci-cd-ips\n    description: \"All CI/CD service IPs\"\n    enabled: true\n    sources:\n      # GitHub Actions\n      - type: github\n        services: [actions]\n\n      # Google Cloud Build regions\n      - type: google_cloud\n        regions: [us-central1, us-east1]\n        ip_version: 4\n\n      # Custom CI service\n      - type: url\n        url: \"https://ci.example.com/ips.txt\"\n</code></pre></p> <p>END OF HANDOFF DOCUMENT</p>"},{"location":"secure/","title":"python-libs Publishing Handoff Document","text":"<p>Repository: ByronWilliamsCPA/python-libs Last Updated: 2025-12-04 Status: Ready for Implementation</p>"},{"location":"secure/#overview","title":"Overview","text":"<p>This document provides everything needed to set up publishing for the <code>python-libs</code> monorepo to GCP Artifact Registry, with secrets managed via Infisical.</p>"},{"location":"secure/#whats-already-done","title":"What's Already Done \u2705","text":"Component Status Details Artifact Registry \u2705 Created <code>us-central1-python.pkg.dev/assured-oss-457903/python-libs</code> Service Account \u2705 Configured <code>assured-oss-accessor@assured-oss-457903.iam.gserviceaccount.com</code> (has writer access) Infisical Server \u2705 Running https://secrets.byronwilliamscpa.com Package Structure \u2705 Complete <code>cloudflare-auth</code> and <code>gcs-utilities</code> packages ready"},{"location":"secure/#what-you-need-to-do","title":"What You Need to Do","text":"<ol> <li>Configure Infisical project and secrets</li> <li>Create machine identity for GitHub Actions</li> <li>Add Infisical credentials to GitHub</li> <li>Add the publishing workflow</li> <li>Fix cloudflare-auth imports</li> <li>Test publish with gcs-utilities</li> <li>Publish cloudflare-auth</li> </ol>"},{"location":"secure/#part-1-infisical-setup","title":"Part 1: Infisical Setup","text":""},{"location":"secure/#11-create-project","title":"1.1 Create Project","text":"<ol> <li>Go to https://secrets.byronwilliamscpa.com</li> <li>Click + Add New Project</li> <li>Name: <code>python-libs</code></li> <li>Click Create Project</li> </ol>"},{"location":"secure/#12-add-gcp-secret","title":"1.2 Add GCP Secret","text":"<ol> <li>Select prod environment</li> <li>Click + Add Secret</li> <li>Configure:</li> <li>Key: <code>GCP_SA_KEY_BASE64</code></li> <li>Value: (see command below)</li> </ol> <pre><code># Generate base64-encoded service account key\ngcloud iam service-accounts keys create /tmp/sa-key.json \\\n    --iam-account=assured-oss-accessor@assured-oss-457903.iam.gserviceaccount.com\n\n# Copy this output as the secret value\ncat /tmp/sa-key.json | base64 -w 0\n\n# Clean up (important!)\nrm /tmp/sa-key.json\n</code></pre>"},{"location":"secure/#13-create-machine-identity","title":"1.3 Create Machine Identity","text":"<ol> <li>Go to Organization Settings \u2192 Machine Identities</li> <li>Click + Create Identity</li> <li>Name: <code>github-actions-python-libs</code></li> <li>Click Create</li> </ol>"},{"location":"secure/#14-add-universal-auth","title":"1.4 Add Universal Auth","text":"<ol> <li>Select the machine identity you just created</li> <li>Go to Authentication tab</li> <li>Click + Add Authentication Method</li> <li>Select Universal Auth</li> <li>Configure:</li> <li>Access Token TTL: <code>300</code> (5 minutes)</li> <li>Max TTL: <code>86400</code> (24 hours)</li> <li>Access Token Max Uses: <code>0</code> (unlimited)</li> <li>Click Create</li> <li>\u26a0\ufe0f IMPORTANT: Copy and save the Client ID and Client Secret now!</li> </ol>"},{"location":"secure/#15-grant-project-access","title":"1.5 Grant Project Access","text":"<ol> <li>Go back to Projects \u2192 python-libs</li> <li>Click Access Control in sidebar</li> <li>Click + Add Member</li> <li>Select Machine Identity tab</li> <li>Choose <code>github-actions-python-libs</code></li> <li>Role: Member</li> <li>Environments: Check prod</li> <li>Click Add</li> </ol>"},{"location":"secure/#part-2-github-configuration","title":"Part 2: GitHub Configuration","text":""},{"location":"secure/#21-add-repository-secrets","title":"2.1 Add Repository Secrets","text":"<ol> <li>Go to https://github.com/ByronWilliamsCPA/python-libs</li> <li>Click Settings \u2192 Secrets and variables \u2192 Actions</li> <li>Click New repository secret</li> <li>Add these two secrets:</li> </ol> Name Value <code>INFISICAL_CLIENT_ID</code> (Client ID from step 1.4) <code>INFISICAL_CLIENT_SECRET</code> (Client Secret from step 1.4)"},{"location":"secure/#22-add-publishing-workflow","title":"2.2 Add Publishing Workflow","text":"<p>Create <code>.github/workflows/publish.yml</code> with this content:</p> <pre><code># .github/workflows/publish.yml\n# Publishes packages to GCP Artifact Registry when tags are pushed\n# Secrets are fetched from Infisical\n\nname: Publish Package\n\non:\n  push:\n    tags:\n      - 'cloudflare-auth-v*'\n      - 'gcs-utilities-v*'\n\npermissions:\n  contents: read\n\nenv:\n  INFISICAL_DOMAIN: https://secrets.byronwilliamscpa.com\n  INFISICAL_PROJECT: python-libs\n  INFISICAL_ENV: prod\n  ARTIFACT_REGISTRY_URL: https://us-central1-python.pkg.dev/assured-oss-457903/python-libs/\n\njobs:\n  determine-package:\n    runs-on: ubuntu-latest\n    outputs:\n      package_dir: ${{ steps.parse.outputs.package_dir }}\n      package_name: ${{ steps.parse.outputs.package_name }}\n      version: ${{ steps.parse.outputs.version }}\n    steps:\n      - name: Parse tag\n        id: parse\n        run: |\n          TAG=\"${{ github.ref_name }}\"\n          echo \"Processing tag: $TAG\"\n\n          if [[ \"$TAG\" == cloudflare-auth-v* ]]; then\n            echo \"package_dir=packages/cloudflare-auth\" &gt;&gt; $GITHUB_OUTPUT\n            echo \"package_name=byronwilliamscpa-cloudflare-auth\" &gt;&gt; $GITHUB_OUTPUT\n            echo \"version=${TAG#cloudflare-auth-v}\" &gt;&gt; $GITHUB_OUTPUT\n          elif [[ \"$TAG\" == gcs-utilities-v* ]]; then\n            echo \"package_dir=packages/gcs-utilities\" &gt;&gt; $GITHUB_OUTPUT\n            echo \"package_name=byronwilliamscpa-gcs-utilities\" &gt;&gt; $GITHUB_OUTPUT\n            echo \"version=${TAG#gcs-utilities-v}\" &gt;&gt; $GITHUB_OUTPUT\n          else\n            echo \"::error::Unknown tag format: $TAG\"\n            exit 1\n          fi\n\n  build-and-publish:\n    needs: determine-package\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2\n\n      - name: Fetch secrets from Infisical\n        uses: Infisical/secrets-action@v1.0.7\n        with:\n          client-id: ${{ secrets.INFISICAL_CLIENT_ID }}\n          client-secret: ${{ secrets.INFISICAL_CLIENT_SECRET }}\n          env-slug: ${{ env.INFISICAL_ENV }}\n          project-slug: ${{ env.INFISICAL_PROJECT }}\n          domain: ${{ env.INFISICAL_DOMAIN }}\n\n      - name: Install uv\n        uses: astral-sh/setup-uv@6b9c6063abd6010835644d4c2e1bef4cf5cd0fca # v6.0.1\n        with:\n          enable-cache: true\n\n      - name: Set up Python\n        run: uv python install 3.12\n\n      - name: Verify version matches tag\n        working-directory: ${{ needs.determine-package.outputs.package_dir }}\n        run: |\n          TOML_VERSION=$(grep '^version = ' pyproject.toml | sed 's/version = \"\\(.*\\)\"/\\1/')\n          TAG_VERSION=\"${{ needs.determine-package.outputs.version }}\"\n          if [[ \"$TOML_VERSION\" != \"$TAG_VERSION\" ]]; then\n            echo \"::error::Version mismatch! pyproject.toml=$TOML_VERSION, tag=$TAG_VERSION\"\n            exit 1\n          fi\n\n      - name: Authenticate to Google Cloud\n        uses: google-github-actions/auth@71f986410dfbc7added4569d411d040a91dc6935 # v2.1.8\n        with:\n          credentials_json: ${{ env.GCP_SA_KEY_BASE64 }}\n\n      - name: Install keyring for Artifact Registry\n        run: pip install keyrings.google-artifactregistry-auth\n\n      - name: Build package\n        working-directory: ${{ needs.determine-package.outputs.package_dir }}\n        run: uv build\n\n      - name: Publish to Artifact Registry\n        working-directory: ${{ needs.determine-package.outputs.package_dir }}\n        run: uv publish --publish-url ${{ env.ARTIFACT_REGISTRY_URL }}\n\n      - name: Job summary\n        run: |\n          echo \"## \ud83d\udce6 Published: ${{ needs.determine-package.outputs.package_name }} v${{ needs.determine-package.outputs.version }}\" &gt;&gt; $GITHUB_STEP_SUMMARY\n          echo \"\" &gt;&gt; $GITHUB_STEP_SUMMARY\n          echo \"Registry: \\`us-central1-python.pkg.dev/assured-oss-457903/python-libs\\`\" &gt;&gt; $GITHUB_STEP_SUMMARY\n</code></pre>"},{"location":"secure/#part-3-fix-cloudflare-auth-imports","title":"Part 3: Fix cloudflare-auth Imports","text":"<p>The <code>cloudflare-auth</code> package has imports that reference <code>src.cloudflare_auth</code> and <code>src.config.settings</code>. These must be fixed before publishing.</p>"},{"location":"secure/#31-add-settingspy","title":"3.1 Add settings.py","text":"<p>Create <code>packages/cloudflare-auth/src/cloudflare_auth/settings.py</code>:</p> <pre><code>\"\"\"Cloudflare Access configuration settings.\n\nHybrid approach: reads from environment by default, but accepts injected settings.\n\"\"\"\n\nfrom functools import lru_cache\nfrom typing import Optional\n\nfrom pydantic import Field, field_validator\nfrom pydantic_settings import BaseSettings, SettingsConfigDict\n\n\nclass CloudflareSettings(BaseSettings):\n    \"\"\"Configuration for Cloudflare Access authentication.\"\"\"\n\n    model_config = SettingsConfigDict(\n        env_file=\".env\",\n        env_file_encoding=\"utf-8\",\n        extra=\"ignore\",\n        case_sensitive=False,\n    )\n\n    # Required\n    cloudflare_team_domain: str = Field(default=\"\", alias=\"CLOUDFLARE_TEAM_DOMAIN\")\n    cloudflare_audience_tag: str = Field(default=\"\", alias=\"CLOUDFLARE_AUDIENCE_TAG\")\n    cloudflare_enabled: bool = Field(default=True, alias=\"CLOUDFLARE_ENABLED\")\n\n    # Headers\n    jwt_header_name: str = Field(default=\"Cf-Access-Jwt-Assertion\", alias=\"CF_JWT_HEADER\")\n    email_header_name: str = Field(default=\"Cf-Access-Authenticated-User-Email\", alias=\"CF_EMAIL_HEADER\")\n\n    # Security\n    require_email_verification: bool = Field(default=True, alias=\"CF_REQUIRE_EMAIL_VERIFICATION\")\n    log_auth_failures: bool = Field(default=True, alias=\"CF_LOG_AUTH_FAILURES\")\n    require_cloudflare_headers: bool = Field(default=True, alias=\"CF_REQUIRE_CLOUDFLARE_HEADERS\")\n\n    # Access control\n    allowed_email_domains: list[str] = Field(default_factory=list, alias=\"CF_ALLOWED_EMAIL_DOMAINS\")\n    allowed_tunnel_ips: list[str] = Field(default_factory=list, alias=\"CF_ALLOWED_TUNNEL_IPS\")\n\n    # Cookies\n    cookie_domain: Optional[str] = Field(default=None, alias=\"CF_COOKIE_DOMAIN\")\n    cookie_path: str = Field(default=\"/\", alias=\"CF_COOKIE_PATH\")\n    cookie_secure: bool = Field(default=True, alias=\"CF_COOKIE_SECURE\")\n    cookie_samesite: str = Field(default=\"lax\", alias=\"CF_COOKIE_SAMESITE\")\n\n    # JWT\n    jwt_algorithm: str = Field(default=\"RS256\", alias=\"CF_JWT_ALGORITHM\")\n    jwt_cache_max_keys: int = Field(default=16, alias=\"CF_JWT_CACHE_MAX_KEYS\")\n\n    @field_validator(\"allowed_email_domains\", \"allowed_tunnel_ips\", mode=\"before\")\n    @classmethod\n    def parse_comma_separated(cls, v):\n        if isinstance(v, str):\n            return [item.strip() for item in v.split(\",\") if item.strip()] if v.strip() else []\n        return v or []\n\n    @property\n    def issuer(self) -&gt; str:\n        if not self.cloudflare_team_domain:\n            return \"\"\n        domain = self.cloudflare_team_domain.rstrip(\"/\")\n        return f\"https://{domain}\" if not domain.startswith(\"https://\") else domain\n\n    @property\n    def certs_url(self) -&gt; str:\n        return f\"{self.issuer}/cdn-cgi/access/certs\" if self.issuer else \"\"\n\n    def is_email_allowed(self, email: str) -&gt; bool:\n        if not self.allowed_email_domains:\n            return True\n        if \"@\" not in email:\n            return False\n        domain = email.split(\"@\")[-1].lower()\n        return domain in [d.lower() for d in self.allowed_email_domains]\n\n\n_settings_instance: Optional[CloudflareSettings] = None\n\n\ndef get_cloudflare_settings() -&gt; CloudflareSettings:\n    \"\"\"Get default settings (singleton, reads from environment).\"\"\"\n    global _settings_instance\n    if _settings_instance is None:\n        _settings_instance = CloudflareSettings()\n    return _settings_instance\n\n\ndef reset_settings() -&gt; None:\n    \"\"\"Reset singleton (for testing).\"\"\"\n    global _settings_instance\n    _settings_instance = None\n</code></pre>"},{"location":"secure/#32-update-pyprojecttoml","title":"3.2 Update pyproject.toml","text":"<p>Add <code>pydantic-settings</code> to dependencies in <code>packages/cloudflare-auth/pyproject.toml</code>:</p> <pre><code>dependencies = [\n    \"pydantic&gt;=2.0.0\",\n    \"pydantic-settings&gt;=2.0.0\",  # ADD THIS LINE\n    \"pyjwt&gt;=2.8.0\",\n    \"cryptography&gt;=41.0.0\",\n    \"httpx&gt;=0.25.0\",\n]\n</code></pre>"},{"location":"secure/#33-fix-imports","title":"3.3 Fix Imports","text":"<p>Update these files to change imports from <code>src.</code> to relative/package imports:</p> <p>Files to update: - <code>__init__.py</code> - <code>middleware.py</code> - <code>middleware_enhanced.py</code> - <code>validators.py</code></p> <p>Find and replace:</p> Find Replace With <code>from src.cloudflare_auth.</code> <code>from cloudflare_auth.</code> or <code>from .</code> <code>from src.config.settings import CloudflareSettings, get_cloudflare_settings</code> <code>from cloudflare_auth.settings import CloudflareSettings, get_cloudflare_settings</code> <p>Example for <code>__init__.py</code>:</p> <pre><code># Change FROM:\nfrom src.cloudflare_auth.middleware import CloudflareAuthMiddleware, get_current_user\n\n# Change TO:\nfrom cloudflare_auth.middleware import CloudflareAuthMiddleware, get_current_user\n# OR use relative imports:\nfrom .middleware import CloudflareAuthMiddleware, get_current_user\n</code></pre>"},{"location":"secure/#34-test-locally","title":"3.4 Test Locally","text":"<pre><code>cd packages/cloudflare-auth\nuv sync\nuv build\n\n# Verify wheel contents\nunzip -l dist/*.whl\n</code></pre>"},{"location":"secure/#part-4-publishing-packages","title":"Part 4: Publishing Packages","text":""},{"location":"secure/#41-first-publish-gcs-utilities-test-run","title":"4.1 First Publish: gcs-utilities (Test Run)","text":"<p>Start with <code>gcs-utilities</code> since it has no import issues:</p> <pre><code># Ensure you're on main with latest changes\ngit checkout main\ngit pull\n\n# Tag the release\ngit tag gcs-utilities-v0.1.0\ngit push --tags\n</code></pre> <p>Watch the Actions tab. The workflow should: 1. \u2705 Parse the tag 2. \u2705 Fetch secrets from Infisical 3. \u2705 Authenticate to GCP 4. \u2705 Build the package 5. \u2705 Publish to Artifact Registry</p>"},{"location":"secure/#42-verify-publication","title":"4.2 Verify Publication","text":"<pre><code># Install keyring\npip install keyrings.google-artifactregistry-auth\n\n# Authenticate\ngcloud auth application-default login\n\n# Check package is available\npip index versions byronwilliamscpa-gcs-utilities \\\n    --index-url https://us-central1-python.pkg.dev/assured-oss-457903/python-libs/simple\n</code></pre>"},{"location":"secure/#43-publish-cloudflare-auth","title":"4.3 Publish cloudflare-auth","text":"<p>After fixing imports (Part 3):</p> <pre><code>git add -A\ngit commit -m \"fix: update imports for package distribution\"\ngit push\n\ngit tag cloudflare-auth-v0.1.0\ngit push --tags\n</code></pre>"},{"location":"secure/#part-5-adding-new-packages","title":"Part 5: Adding New Packages","text":"<p>To add a new package to the monorepo:</p>"},{"location":"secure/#51-create-package-structure","title":"5.1 Create Package Structure","text":"<pre><code>mkdir -p packages/new-package/src/new_package\nmkdir -p packages/new-package/tests\n</code></pre>"},{"location":"secure/#52-create-pyprojecttoml","title":"5.2 Create pyproject.toml","text":"<pre><code>[project]\nname = \"byronwilliamscpa-new-package\"\nversion = \"0.1.0\"\ndescription = \"Description here\"\nreadme = \"README.md\"\nrequires-python = \"&gt;=3.10,&lt;3.15\"\nlicense = {text = \"MIT\"}\nauthors = [{name = \"Byron Williams\", email = \"byronawilliams@gmail.com\"}]\n\ndependencies = []\n\n[build-system]\nrequires = [\"hatchling\"]\nbuild-backend = \"hatchling.build\"\n\n[tool.hatch.build.targets.wheel]\npackages = [\"src/new_package\"]\n\n[tool.semantic_release]\nversion_toml = [\"pyproject.toml:project.version\"]\ntag_format = \"new-package-v{version}\"\n</code></pre>"},{"location":"secure/#53-update-workflow","title":"5.3 Update Workflow","text":"<p>Add the new tag pattern to <code>.github/workflows/publish.yml</code>:</p> <pre><code>on:\n  push:\n    tags:\n      - 'cloudflare-auth-v*'\n      - 'gcs-utilities-v*'\n      - 'new-package-v*'  # ADD THIS\n</code></pre> <p>Update the parse step:</p> <pre><code>elif [[ \"$TAG\" == new-package-v* ]]; then\n  echo \"package_dir=packages/new-package\" &gt;&gt; $GITHUB_OUTPUT\n  echo \"package_name=byronwilliamscpa-new-package\" &gt;&gt; $GITHUB_OUTPUT\n  echo \"version=${TAG#new-package-v}\" &gt;&gt; $GITHUB_OUTPUT\n</code></pre>"},{"location":"secure/#troubleshooting","title":"Troubleshooting","text":""},{"location":"secure/#infisical-access-denied","title":"\"Infisical: Access denied\"","text":"<ul> <li>Verify machine identity has access to the project</li> <li>Check environment is <code>prod</code> (not <code>dev</code>)</li> <li>Verify Client ID and Secret are correct</li> </ul>"},{"location":"secure/#gcp-permission-denied","title":"\"GCP: Permission denied\"","text":"<ul> <li>The secret <code>GCP_SA_KEY_BASE64</code> must be valid base64</li> <li>Service account needs <code>roles/artifactregistry.writer</code> on the repository</li> </ul>"},{"location":"secure/#version-mismatch-error","title":"\"Version mismatch\" error","text":"<ul> <li>Update <code>version</code> in <code>pyproject.toml</code> before tagging</li> <li>Tag format must match: <code>{package}-v{version}</code></li> </ul>"},{"location":"secure/#build-fails-with-import-errors","title":"Build fails with import errors","text":"<ul> <li>Ensure all <code>src.</code> imports are changed to relative/package imports</li> <li>Run <code>uv build</code> locally to test before pushing</li> </ul>"},{"location":"secure/#quick-reference","title":"Quick Reference","text":"Item Value Artifact Registry <code>us-central1-python.pkg.dev/assured-oss-457903/python-libs</code> Service Account <code>assured-oss-accessor@assured-oss-457903.iam.gserviceaccount.com</code> Infisical URL https://secrets.byronwilliamscpa.com Infisical Project <code>python-libs</code> GitHub Secrets <code>INFISICAL_CLIENT_ID</code>, <code>INFISICAL_CLIENT_SECRET</code>"},{"location":"secure/#tag-formats","title":"Tag Formats","text":"Package Tag Format Example cloudflare-auth <code>cloudflare-auth-v{version}</code> <code>cloudflare-auth-v0.1.0</code> gcs-utilities <code>gcs-utilities-v{version}</code> <code>gcs-utilities-v1.2.3</code>"},{"location":"secure/#contacts","title":"Contacts","text":"<ul> <li>Infrastructure Questions: Byron Williams</li> <li>Infisical Issues: Check https://secrets.byronwilliamscpa.com status</li> <li>GCP Issues: Check <code>assured-oss-457903</code> project in GCP Console</li> </ul>"},{"location":"template_feedback/","title":"Template Feedback","text":"<p>Purpose: Document issues discovered in this project that should be addressed in the cookiecutter-python-template.</p> <p>Generated From: cookiecutter-python-template v0.1.0 Project Created: PROJECT_CREATION_DATE</p>","tags":["feedback","template"]},{"location":"template_feedback/#how-to-use-this-file","title":"How to Use This File","text":"<p>When working on this project, if you discover any issue that originates from the template itself (not project-specific), add it here with the following format:</p> <pre><code>### [Short Title]\n\n- **Priority**: Critical / High / Medium / Low\n- **Category**: [Configuration / Documentation / Tooling / Structure / CI/CD / Security / Other]\n- **Discovered**: YYYY-MM-DD\n\n**Issue**: [Clear description of what's wrong or missing]\n\n**Context**: [How was this discovered? What were you trying to do?]\n\n**Suggested Fix**: [What should the template do differently?]\n\n**Affected Files**: [List template files that need changes]\n</code></pre>","tags":["feedback","template"]},{"location":"template_feedback/#feedback-items","title":"Feedback Items","text":"<p>No feedback items yet. Add issues as they are discovered.</p>","tags":["feedback","template"]},{"location":"template_feedback/#submitting-feedback","title":"Submitting Feedback","text":"<p>Once you've collected feedback, you can:</p> <ol> <li>Create an issue in the cookiecutter-python-template repository</li> <li>Submit a PR if you have fixes for the template</li> <li>Share this file with the template maintainers</li> </ol> <p>When submitting, reference this project as the source of the feedback.</p>","tags":["feedback","template"]},{"location":"ADRs/","title":"Architecture Decision Records (ADRs)","text":"<p>This directory contains Architecture Decision Records (ADRs) that document important architectural and design decisions made in Python Libs.</p>","tags":["adr","architecture","decisions"]},{"location":"ADRs/#what-is-an-adr","title":"What is an ADR?","text":"<p>An Architecture Decision Record (ADR) is a document that captures:</p> <ol> <li>The Decision: What architectural choice was made?</li> <li>The Context: Why was this decision needed? What problem were we solving?</li> <li>The Consequences: What are the trade-offs and implications?</li> <li>Alternatives: What other options were considered and why were they rejected?</li> </ol> <p>ADRs serve as:</p> <ul> <li>Historical Record: Why decisions were made and when</li> <li>Knowledge Sharing: Helps new team members understand the architecture</li> <li>Decision Rationale: Documents the reasoning behind choices</li> <li>Future Reference: Helps when revisiting decisions</li> </ul>","tags":["adr","architecture","decisions"]},{"location":"ADRs/#when-to-write-an-adr","title":"When to Write an ADR?","text":"<p>Write an ADR when you need to document:</p> <ul> <li>Major architectural choices</li> <li>Technology selection decisions</li> <li>API design decisions</li> <li>Infrastructure decisions</li> <li>Dependency choices</li> <li>Testing strategies</li> <li>Any decision that impacts multiple components</li> </ul>","tags":["adr","architecture","decisions"]},{"location":"ADRs/#adr-format","title":"ADR Format","text":"<p>All ADRs follow a consistent structure with YAML front matter. See adr-template.md for the complete template.</p>","tags":["adr","architecture","decisions"]},{"location":"ADRs/#front-matter","title":"Front Matter","text":"<pre><code>---\nschema_type: adr                          # Always \"adr\"\ntitle: \"ADR-NNN: Short descriptive title\"\ndescription: \"Brief one-line description\"\ntags:\n  - architecture\n  - decision\n  - area-of-concern\nstatus: published                         # proposed, published, deprecated, superseded\nowner: \"core-maintainer\"                  # Primary decision owner\nauthors:\n  - name: \"Author Name\"\npurpose: \"Why this ADR was written\"\n---\n</code></pre>","tags":["adr","architecture","decisions"]},{"location":"ADRs/#sections","title":"Sections","text":"<ol> <li>Status: Current status (proposed, published, deprecated, superseded)</li> <li>Context: Why this decision was needed</li> <li>Decision: What decision was made and how</li> <li>Consequences: Positive and negative impacts</li> <li>Alternatives: Options considered and why rejected</li> <li>Implementation: How the decision was implemented</li> <li>Performance Benchmarks: Metrics and measurements (if applicable)</li> <li>References: Links to related documents and code</li> </ol>","tags":["adr","architecture","decisions"]},{"location":"ADRs/#status-definitions","title":"Status Definitions","text":"<ul> <li>proposed: Under consideration, not yet approved</li> <li>published: Accepted and implemented</li> <li>deprecated: No longer used, replaced by newer approach</li> <li>superseded: Replaced by a newer ADR (should reference the new ADR)</li> </ul>","tags":["adr","architecture","decisions"]},{"location":"ADRs/#naming-convention","title":"Naming Convention","text":"<p>ADR files are named with sequential numbers:</p> <ul> <li><code>0001-adr-title-kebab-case.md</code></li> <li><code>0002-another-adr-title.md</code></li> <li><code>0031-comprehensive-benchmarking-framework.md</code></li> </ul> <p>Use the next available number and follow kebab-case for the title.</p>","tags":["adr","architecture","decisions"]},{"location":"ADRs/#workflow","title":"Workflow","text":"","tags":["adr","architecture","decisions"]},{"location":"ADRs/#creating-a-new-adr","title":"Creating a New ADR","text":"<ol> <li>Use the template: Copy adr-template.md to <code>NNNN-your-adr-title.md</code></li> <li>Fill in the sections: Complete all required sections</li> <li>Request review: Create a PR with the ADR</li> <li>Iterate: Address feedback and refine</li> <li>Approve and merge: Once consensus is reached</li> <li>Update status: Change status from \"proposed\" to \"published\"</li> </ol>","tags":["adr","architecture","decisions"]},{"location":"ADRs/#deprecating-an-adr","title":"Deprecating an ADR","text":"<p>If an ADR is no longer valid:</p> <ol> <li>Update the status to <code>deprecated</code></li> <li>Add a deprecation notice at the top</li> <li>Reference the replacement ADR if applicable</li> </ol> <p>Example:</p> <pre><code>&gt; **DEPRECATED (2025-11-17)**: This approach is no longer used.\n&gt; **Reason**: Replaced by more efficient algorithm\n&gt; **Reference**: See [ADR-032: Better Algorithm](0032-better-algorithm.md)\n</code></pre>","tags":["adr","architecture","decisions"]},{"location":"ADRs/#superseding-an-adr","title":"Superseding an ADR","text":"<p>If a newer ADR replaces an existing one:</p> <ol> <li>Update the old ADR status to <code>superseded</code></li> <li>Add a supersession notice referencing the new ADR</li> <li>The new ADR should reference the old ADR in Alternatives section</li> </ol>","tags":["adr","architecture","decisions"]},{"location":"ADRs/#examples-from-python-libs","title":"Examples from Python Libs","text":"<p>The repository may contain several example ADRs:</p> <ul> <li>Infrastructure Decisions: Platform choices, deployment strategies</li> <li>Architectural Patterns: Design patterns and architectural approaches</li> <li>Technology Selections: Framework, library, or tool choices</li> <li>API Design: API structure and design decisions</li> </ul>","tags":["adr","architecture","decisions"]},{"location":"ADRs/#best-practices","title":"Best Practices","text":"<ol> <li>Make Decisions Explicit: Even if a decision seems obvious, document it</li> <li>Include Trade-offs: Explain what we're gaining and what we're sacrificing</li> <li>Be Concise: Focus on the essential information</li> <li>Use Examples: Include code samples or diagrams when helpful</li> <li>Reference Alternatives: Show that alternatives were considered</li> <li>Document Implementation: Explain how the decision was actually implemented</li> <li>Update When Needed: If a decision changes, update the ADR</li> </ol>","tags":["adr","architecture","decisions"]},{"location":"ADRs/#linking-to-adrs","title":"Linking to ADRs","text":"<p>When referencing ADRs in code or docs, use:</p> <pre><code>See [ADR-001: Decision Title](docs/ADRs/0001-decision-title.md) for details.\n</code></pre>","tags":["adr","architecture","decisions"]},{"location":"ADRs/#questions","title":"Questions?","text":"<p>For questions about a specific ADR, reach out to:</p> <ul> <li>ADR Author: Listed in the <code>authors</code> field</li> <li>Owner: Listed in the <code>owner</code> field</li> <li>Team Discussion: Open a GitHub Discussion</li> </ul> <p>Reference: This ADR process is based on Nygard's ADR format with modifications for Python Libs.</p>","tags":["adr","architecture","decisions"]},{"location":"ADRs/adr-template/","title":"ADR-NNN: Short Descriptive Title of the Decision","text":"<p>Status: <code>proposed</code> \u2192 Change to <code>published</code> once approved, or <code>deprecated</code>/<code>superseded</code> if no longer valid</p> <p>For help with this template, see ADRs/README.md</p> <p>Decision Date: YYYY-MM-DD Deciders: List of people who made this decision Affected Teams: Teams impacted by this decision Implementation Target: When this will be implemented (if applicable)</p>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#context","title":"Context","text":"","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#problem-statement","title":"Problem Statement","text":"<p>Describe the problem or situation that prompted this decision. Include:</p> <ul> <li>What is the problem?: Clear description of the issue</li> <li>Why is it important?: Why does this need to be solved now?</li> <li>Who is affected?: Which teams or components are impacted?</li> <li>What are the constraints?: Budget, time, technical limitations?</li> </ul>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#current-state","title":"Current State","text":"<p>Describe the current situation before this decision:</p> <ul> <li>Existing approach: How is it currently done?</li> <li>Current limitations: What are the problems with the current approach?</li> <li>Why it's not sufficient: Why can't we continue with the status quo?</li> </ul>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#requirements","title":"Requirements","text":"<p>List the requirements that informed this decision:</p> <ul> <li>Must have: Non-negotiable requirements</li> <li>Should have: Important but not critical</li> <li>Nice to have: Desirable but not required</li> </ul> <p>Example:</p> <ul> <li>Must have: Backwards compatible with existing APIs</li> <li>Must have: No external service dependencies</li> <li>Should have: &lt;100ms latency per operation</li> <li>Nice to have: Self-documenting code</li> </ul>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#decision","title":"Decision","text":"","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#what-we-decided","title":"What We Decided","text":"<p>Clearly state the decision made:</p> <p>We will [action/choice] using [approach/technology]</p> <p>Example:</p> <p>We will standardize on Pydantic v2 for all data validation, using discriminated unions for polymorphic type handling.</p>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#why-this-decision","title":"Why This Decision","text":"<p>Explain the key reasons for this choice:</p> <ol> <li>Reason 1: How it solves the main problem</li> <li>Reason 2: Additional benefits</li> <li>Reason 3: How it meets requirements</li> </ol>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#how-it-works","title":"How It Works","text":"<p>Provide implementation details:</p> <ul> <li>High-level approach: Overview of the solution</li> <li>Architecture: Component interactions and data flow</li> <li>Integration points: How it connects to other systems</li> <li>Configuration: Key settings and customization options</li> </ul>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#pseudocodeexample","title":"Pseudocode/Example","text":"<pre><code># Example showing how the decision is implemented\nfrom pydantic import BaseModel, Field\n\nclass User(BaseModel):\n    \"\"\"User model with validation.\"\"\"\n    name: str = Field(..., min_length=1)\n    email: str = Field(..., regex=r'^[^@]+@[^@]+\\.[^@]+$')\n    age: int = Field(..., ge=0, le=150)\n\n# Usage\nuser = User(name=\"John\", email=\"john@example.com\", age=30)\n</code></pre>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#consequences","title":"Consequences","text":"","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#positive-consequences","title":"Positive Consequences","text":"<p>What benefits does this decision provide?</p> <ol> <li>Benefit 1: Specific improvement and impact</li> <li>Benefit 2: Technical or organizational advantage</li> <li>Benefit 3: Long-term value</li> </ol>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#negative-consequences","title":"Negative Consequences","text":"<p>What trade-offs or challenges does this introduce?</p> <ol> <li>Challenge 1: Specific limitation or drawback</li> <li>Challenge 2: Learning curve or migration effort</li> <li>Challenge 3: Ongoing maintenance requirement</li> </ol>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#neutral-consequences","title":"Neutral Consequences","text":"<p>What aspects are neither good nor bad?</p> <ol> <li>Change 1: No impact on specific area</li> <li>Change 2: Depends on future circumstances</li> <li>Change 3: Requires different approach elsewhere</li> </ol>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#alternatives-considered","title":"Alternatives Considered","text":"","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#alternative-1-namedescription","title":"Alternative 1: [Name/Description]","text":"<p>Approach: How this approach would work</p> <p>Advantages:</p> <ul> <li>Specific benefit 1</li> <li>Specific benefit 2</li> </ul> <p>Disadvantages:</p> <ul> <li>Specific drawback 1</li> <li>Specific drawback 2</li> </ul> <p>Why Not Chosen: Clear explanation of why this was rejected</p>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#alternative-2-namedescription","title":"Alternative 2: [Name/Description]","text":"<p>Approach: How this approach would work</p> <p>Advantages:</p> <ul> <li>Specific benefit 1</li> <li>Specific benefit 2</li> </ul> <p>Disadvantages:</p> <ul> <li>Specific drawback 1</li> <li>Specific drawback 2</li> </ul> <p>Why Not Chosen: Clear explanation of why this was rejected</p>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#alternative-3-namedescription","title":"Alternative 3: [Name/Description]","text":"<p>Approach: How this approach would work</p> <p>Advantages:</p> <ul> <li>Specific benefit 1</li> <li>Specific benefit 2</li> </ul> <p>Disadvantages:</p> <ul> <li>Specific drawback 1</li> <li>Specific drawback 2</li> </ul> <p>Why Not Chosen: Clear explanation of why this was rejected</p>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#implementation","title":"Implementation","text":"","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#implementation-steps","title":"Implementation Steps","text":"<ol> <li>Phase 1: First step and timeline</li> <li>Phase 2: Second step and timeline</li> <li>Phase 3: Final step and timeline</li> </ol>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#code-example","title":"Code Example","text":"<p>Show how the decision is implemented in actual code:</p> <pre><code># Concrete example of the implementation\nclass YourComponent:\n    \"\"\"Component implementing the ADR decision.\"\"\"\n\n    def __init__(self, config: YourConfig):\n        \"\"\"Initialize with configuration.\"\"\"\n        self.config = config\n\n    def process(self, data: InputData) -&gt; OutputData:\n        \"\"\"Process data using the decided approach.\"\"\"\n        validated = self.validate(data)\n        result = self.transform(validated)\n        return result\n</code></pre>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#configuration","title":"Configuration","text":"<p>Document any configuration options:</p> <pre><code># config.yaml\ndecision_option_1: value\ndecision_option_2: value\nnested:\n  option_3: default_value\n</code></pre>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#migration-path-if-applicable","title":"Migration Path (if applicable)","text":"<p>If this replaces existing functionality:</p> <ul> <li>Phase 1: Support both old and new approaches</li> <li>Phase 2: Deprecate old approach with warnings</li> <li>Phase 3: Remove old approach entirely</li> </ul>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#performance-metrics","title":"Performance &amp; Metrics","text":"<p>If applicable, document performance implications:</p>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#performance-benchmarks","title":"Performance Benchmarks","text":"Metric Before After Impact Operation latency XXms XXms YY% improvement Memory usage XXMb XXMb YY% reduction Throughput XX/sec XX/sec YY% improvement","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#validation-approach","title":"Validation Approach","text":"<p>How will we validate that this decision achieved its goals?</p> <ul> <li>Benchmark against baseline metrics</li> <li>A/B testing approach (if applicable)</li> <li>User acceptance testing</li> <li>Load testing results</li> </ul>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#references","title":"References","text":"","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#related-adrs","title":"Related ADRs","text":"<ul> <li>ADR-NNN: Previous Decision - Related context</li> <li>ADR-NNN: Future Decision - Builds on this ADR</li> </ul>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#external-references","title":"External References","text":"<ul> <li>Technology/Framework Documentation: <code>https://example.com/docs</code></li> <li>Research Paper or Article: <code>https://example.com/research</code></li> <li>Related GitHub Issues: <code>https://github.com/org/repo/issues/NNN</code></li> </ul>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#implementation-references","title":"Implementation References","text":"<ul> <li>Implementation File: <code>src/your_component.py</code></li> <li>Test Coverage: <code>tests/test_your_component.py</code></li> <li>Configuration: <code>config.yaml</code></li> </ul>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#questions-discussion","title":"Questions &amp; Discussion","text":"","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#frequently-asked-questions","title":"Frequently Asked Questions","text":"<p>Q: When should we reconsider this decision? A: If [specific condition] changes, we should revisit this ADR.</p> <p>Q: How does this relate to [other system]? A: It integrates via [specific interface/API].</p> <p>Q: What if the assumption [X] proves false? A: We would [specific fallback plan].</p>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#discussion-points","title":"Discussion Points","text":"<ul> <li>Key assumptions that should be validated</li> <li>Open questions for future consideration</li> <li>Feedback from stakeholders</li> </ul>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#appendices","title":"Appendices","text":"","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#appendix-a-research-analysis","title":"Appendix A: Research &amp; Analysis","text":"<p>Include any research done to inform this decision:</p> <ul> <li>Comparative analysis of options</li> <li>Survey results</li> <li>Performance testing results</li> <li>Industry best practices</li> </ul>","tags":["architecture","adr","decisions"]},{"location":"ADRs/adr-template/#appendix-b-examples-from-similar-projects","title":"Appendix B: Examples from Similar Projects","text":"<p>Cite how other projects or organizations have handled similar decisions:</p> <ul> <li>Project X approach and results</li> <li>Project Y lessons learned</li> <li>Industry standards and practices</li> </ul> <p>Last Updated: YYYY-MM-DD Reviewed By: List of reviewers Next Review: YYYY-MM-DD (or \"On demand\" if no scheduled review)</p>","tags":["architecture","adr","decisions"]},{"location":"development/architecture/","title":"Architecture","text":"<p>This document describes the architecture and design decisions for Python Libs.</p>","tags":["development","architecture"]},{"location":"development/architecture/#project-structure","title":"Project Structure","text":"<p><code>text python_libs/ \u251c\u2500\u2500 src/ \u2502   \u2514\u2500\u2500 python_libs/ \u2502       \u251c\u2500\u2500 __init__.py          # Package initialization \u2502       \u251c\u2500\u2500 core/                # Core functionality \u2502       \u2502   \u251c\u2500\u2500 config.py        # Configuration with Pydantic \u2502       \u2502   \u2514\u2500\u2500 ... \u2502       \u251c\u2500\u2500 utils/               # Utility modules \u2502       \u2502   \u251c\u2500\u2500 logging.py       # Structured logging \u2502       \u2502   \u2514\u2500\u2500 ... \u251c\u2500\u2500 tests/                       # Test suite \u251c\u2500\u2500 docs/                        # Documentation \u2514\u2500\u2500 pyproject.toml               # Project configuration</code>text</p>","tags":["development","architecture"]},{"location":"development/architecture/#design-principles","title":"Design Principles","text":"","tags":["development","architecture"]},{"location":"development/architecture/#1-type-safety","title":"1. Type Safety","text":"<p>All code is fully typed with BasedPyright strict mode validation.</p>","tags":["development","architecture"]},{"location":"development/architecture/#2-structured-logging","title":"2. Structured Logging","text":"<p>Uses structlog for structured, JSON-formatted logs in production.</p>","tags":["development","architecture"]},{"location":"development/architecture/#3-configuration-management","title":"3. Configuration Management","text":"<p>Pydantic Settings for type-safe configuration from environment variables.</p>","tags":["development","architecture"]},{"location":"development/architecture/#dependencies","title":"Dependencies","text":"<p>See <code>pyproject.toml</code> for the complete dependency list.</p>","tags":["development","architecture"]},{"location":"development/architecture/#architecture-decision-records","title":"Architecture Decision Records","text":"<p>See the ADRs directory for documented architecture decisions.</p>","tags":["development","architecture"]},{"location":"development/code-quality/","title":"Code Quality","text":"<p>This guide covers the code quality standards and tools for Python Libs.</p>","tags":["development","quality"]},{"location":"development/code-quality/#tools","title":"Tools","text":"","tags":["development","quality"]},{"location":"development/code-quality/#ruff","title":"Ruff","text":"<p>Fast Python linter and formatter:</p> <pre><code># Check for issues\nuv run ruff check .\n\n# Auto-fix issues\nuv run ruff check --fix .\n\n# Format code\nuv run ruff format .\n</code></pre>","tags":["development","quality"]},{"location":"development/code-quality/#basedpyright","title":"BasedPyright","text":"<p>Strict type checking:</p> <pre><code>uv run basedpyright src/\n</code></pre>","tags":["development","quality"]},{"location":"development/code-quality/#bandit","title":"Bandit","text":"<p>Security linting:</p> <pre><code>uv run bandit -r src/\n</code></pre>","tags":["development","quality"]},{"location":"development/code-quality/#pre-commit-hooks","title":"Pre-commit Hooks","text":"<p>Pre-commit hooks run automatically:</p> <pre><code># Install hooks\nuv run pre-commit install\n\n# Run all hooks manually\nuv run pre-commit run --all-files\n</code></pre>","tags":["development","quality"]},{"location":"development/code-quality/#standards","title":"Standards","text":"","tags":["development","quality"]},{"location":"development/code-quality/#code-style","title":"Code Style","text":"<ul> <li>Line length: 88 characters (Black compatible)</li> <li>Docstrings: Google style</li> <li>Type hints: Required for all public APIs</li> </ul>","tags":["development","quality"]},{"location":"development/code-quality/#docstring-coverage","title":"Docstring Coverage","text":"<ul> <li>Target: 85% coverage</li> <li>Check with: <code>uv run interrogate -c pyproject.toml src/</code></li> </ul>","tags":["development","quality"]},{"location":"development/code-quality/#quality-gates","title":"Quality Gates","text":"<p>All PRs must pass:</p> <ul> <li> All tests passing</li> <li> 80%+ coverage</li> <li> No type errors</li> <li> No linting errors</li> <li> Pre-commit hooks pass</li> </ul>","tags":["development","quality"]},{"location":"development/contributing/","title":"Contributing","text":"<p>Thank you for your interest in contributing to Python Libs!</p>","tags":["development","contributing"]},{"location":"development/contributing/#getting-started","title":"Getting Started","text":"","tags":["development","contributing"]},{"location":"development/contributing/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.12+</li> <li>UV package manager</li> <li>Git</li> </ul>","tags":["development","contributing"]},{"location":"development/contributing/#development-setup","title":"Development Setup","text":"<pre><code># Clone the repository\ngit clone https://github.com/ByronWilliamsCPA/python-libs\ncd python_libs\n\n# Install dependencies\nuv sync --all-extras\n\n# Install pre-commit hooks\nuv run pre-commit install\n</code></pre>","tags":["development","contributing"]},{"location":"development/contributing/#development-workflow","title":"Development Workflow","text":"","tags":["development","contributing"]},{"location":"development/contributing/#1-create-a-branch","title":"1. Create a Branch","text":"<pre><code>git checkout -b feat/your-feature-name\n</code></pre>","tags":["development","contributing"]},{"location":"development/contributing/#2-make-changes","title":"2. Make Changes","text":"<ul> <li>Write code with type hints</li> <li>Add tests for new functionality</li> <li>Update documentation</li> </ul>","tags":["development","contributing"]},{"location":"development/contributing/#3-run-quality-checks","title":"3. Run Quality Checks","text":"<pre><code># Run tests\nuv run pytest -v\n\n# Run linting\nuv run ruff check .\n\n# Run type checking\nuv run basedpyright src/\n</code></pre>","tags":["development","contributing"]},{"location":"development/contributing/#4-commit-changes","title":"4. Commit Changes","text":"<p>Use conventional commit messages:</p> <pre><code>git commit -m \"feat: add new feature\"\ngit commit -m \"fix: resolve bug in module\"\ngit commit -m \"docs: update documentation\"\n</code></pre>","tags":["development","contributing"]},{"location":"development/contributing/#5-create-pull-request","title":"5. Create Pull Request","text":"<p>Push your branch and create a PR against <code>main</code>.</p>","tags":["development","contributing"]},{"location":"development/contributing/#code-review","title":"Code Review","text":"<p>All contributions require:</p> <ul> <li>Passing CI checks</li> <li>Code review approval</li> <li>Documentation updates (if applicable)</li> </ul>","tags":["development","contributing"]},{"location":"development/contributing/#questions","title":"Questions?","text":"<p>Open an issue for questions or discussions.</p>","tags":["development","contributing"]},{"location":"development/testing/","title":"Testing","text":"<p>This guide covers the testing strategy and patterns for Python Libs.</p>","tags":["development","testing"]},{"location":"development/testing/#running-tests","title":"Running Tests","text":"","tags":["development","testing"]},{"location":"development/testing/#full-test-suite","title":"Full Test Suite","text":"<p>```bash</p>","tags":["development","testing"]},{"location":"development/testing/#run-all-tests-with-coverage","title":"Run all tests with coverage","text":"<p>uv run pytest -v --cov=src --cov-report=term-missing</p>","tags":["development","testing"]},{"location":"development/testing/#run-with-nox-across-python-versions","title":"Run with nox across Python versions","text":"<p>nox -s test ```text</p>","tags":["development","testing"]},{"location":"development/testing/#unit-tests-only","title":"Unit Tests Only","text":"<p><code>bash uv run pytest -m unit -v</code>text</p>","tags":["development","testing"]},{"location":"development/testing/#integration-tests","title":"Integration Tests","text":"<p><code>bash uv run pytest -m integration -v</code>text</p>","tags":["development","testing"]},{"location":"development/testing/#test-structure","title":"Test Structure","text":"<p><code>text tests/ \u251c\u2500\u2500 conftest.py          # Shared fixtures \u251c\u2500\u2500 unit/                # Unit tests \u2502   \u251c\u2500\u2500 test_config.py \u2502   \u2514\u2500\u2500 test_logging.py \u2514\u2500\u2500 integration/         # Integration tests     \u2514\u2500\u2500 ...</code>text</p>","tags":["development","testing"]},{"location":"development/testing/#coverage-requirements","title":"Coverage Requirements","text":"<ul> <li>Target: 80% overall coverage</li> <li>Unit tests: 85%+ coverage</li> <li>Integration tests: 70%+ coverage</li> </ul>","tags":["development","testing"]},{"location":"development/testing/#writing-tests","title":"Writing Tests","text":"","tags":["development","testing"]},{"location":"development/testing/#test-markers","title":"Test Markers","text":"<p>```python import pytest</p> <p>@pytest.mark.unit def test_unit_example():     \"\"\"Unit test example.\"\"\"     pass</p> <p>@pytest.mark.integration def test_integration_example():     \"\"\"Integration test example.\"\"\"     pass</p> <p>@pytest.mark.slow def test_slow_example():     \"\"\"Slow test - excluded from fast runs.\"\"\"     pass ```text</p>","tags":["development","testing"]},{"location":"development/testing/#continuous-integration","title":"Continuous Integration","text":"<p>Tests run automatically on:</p> <ul> <li>Pull request creation</li> <li>Push to main/develop branches</li> <li>Scheduled nightly builds</li> </ul>","tags":["development","testing"]},{"location":"guides/configuration/","title":"Configuration","text":"<p>This guide covers all configuration options for Python Libs.</p>","tags":["guide","configuration"]},{"location":"guides/configuration/#environment-variables","title":"Environment Variables","text":"<p>Python Libs uses environment variables for configuration:</p> Variable Description Default <code>LOG_LEVEL</code> Logging level (DEBUG, INFO, WARNING, ERROR) <code>INFO</code> <code>JSON_LOGS</code> Enable JSON log format <code>false</code>","tags":["guide","configuration"]},{"location":"guides/configuration/#configuration-file","title":"Configuration File","text":"<p>Create a <code>.env</code> file in your project root:</p> <pre><code># Logging\nLOG_LEVEL=INFO\nJSON_LOGS=false\n\n# Add your configuration here\n</code></pre>","tags":["guide","configuration"]},{"location":"guides/configuration/#pydantic-settings","title":"Pydantic Settings","text":"<p>Configuration is managed via Pydantic Settings for type safety:</p> <pre><code>from python_libs.core.config import settings\n\n# Access settings\nprint(settings.log_level)\n</code></pre>","tags":["guide","configuration"]},{"location":"guides/configuration/#development-vs-production","title":"Development vs Production","text":"","tags":["guide","configuration"]},{"location":"guides/configuration/#development","title":"Development","text":"<pre><code>LOG_LEVEL=DEBUG\nJSON_LOGS=false\n</code></pre>","tags":["guide","configuration"]},{"location":"guides/configuration/#production","title":"Production","text":"<pre><code>LOG_LEVEL=INFO\nJSON_LOGS=true\n</code></pre>","tags":["guide","configuration"]},{"location":"guides/overview/","title":"Overview","text":"<p>Shared Python libraries for ByronWilliamsCPA projects - JWT auth, GCS utilities, and more</p>","tags":["guide","overview"]},{"location":"guides/overview/#key-features","title":"Key Features","text":"","tags":["guide","overview"]},{"location":"guides/overview/#modern-python-development","title":"Modern Python Development","text":"<ul> <li>Python 3.12+ with full type annotations</li> <li>UV for fast dependency management</li> <li>Ruff for linting and formatting</li> <li>BasedPyright for strict type checking</li> </ul>","tags":["guide","overview"]},{"location":"guides/overview/#quality-assurance","title":"Quality Assurance","text":"<ul> <li>pytest with comprehensive coverage</li> <li>Pre-commit hooks for automated checks</li> <li>GitHub Actions CI/CD pipeline</li> </ul>","tags":["guide","overview"]},{"location":"guides/overview/#getting-started","title":"Getting Started","text":"<ol> <li>Installation: See the Configuration Guide</li> <li>Usage: Check the Usage Guide</li> <li>API: Browse the API Reference</li> </ol>","tags":["guide","overview"]},{"location":"guides/overview/#architecture","title":"Architecture","text":"<p>For details on the project architecture, see Architecture.</p>","tags":["guide","overview"]},{"location":"guides/usage/","title":"Usage","text":"<p>This guide covers common usage patterns for Python Libs.</p>","tags":["guide","usage"]},{"location":"guides/usage/#installation","title":"Installation","text":"","tags":["guide","usage"]},{"location":"guides/usage/#from-pypi","title":"From PyPI","text":"<pre><code>pip install python-libs\n</code></pre>","tags":["guide","usage"]},{"location":"guides/usage/#from-source","title":"From Source","text":"<pre><code>git clone https://github.com/ByronWilliamsCPA/python-libs\ncd python_libs\nuv sync --all-extras\n</code></pre>","tags":["guide","usage"]},{"location":"guides/usage/#library-usage","title":"Library Usage","text":"","tags":["guide","usage"]},{"location":"guides/usage/#basic-import","title":"Basic Import","text":"<pre><code>from python_libs import __version__\n\nprint(f\"Version: {__version__}\")\n</code></pre>","tags":["guide","usage"]},{"location":"guides/usage/#logging","title":"Logging","text":"<pre><code>from python_libs.utils.logging import get_logger, setup_logging\n\n# Setup logging\nsetup_logging(level=\"DEBUG\", json_logs=False)\n\n# Get a logger\nlogger = get_logger(__name__)\nlogger.info(\"Hello from Python Libs\")\n</code></pre>","tags":["guide","usage"]},{"location":"planning/","title":"Project Planning Documents","text":"<p>This directory contains the essential planning documents for Python Libs.</p>","tags":["planning","documentation"]},{"location":"planning/#quick-start","title":"Quick Start","text":"<p>Complete Guide: See PROJECT_SETUP.md for the full workflow.</p> <p>```bash</p>","tags":["planning","documentation"]},{"location":"planning/#1-generate-planning-documents","title":"1. Generate planning documents","text":"<p>/plan","tags":["planning","documentation"]},{"location":"planning/#2-synthesize-into-project-plan","title":"2. Synthesize into project plan","text":"<p>\"Synthesize my planning documents into a project plan\"</p>","tags":["planning","documentation"]},{"location":"planning/#3-review-docsplanningproject-planmd","title":"3. Review docs/planning/PROJECT-PLAN.md","text":"","tags":["planning","documentation"]},{"location":"planning/#4-start-development","title":"4. Start development","text":"<p>/git/milestone start feat/phase-0-foundation ```text</p>","tags":["planning","documentation"]},{"location":"planning/#documents","title":"Documents","text":"Document Purpose Status project-vision.md What &amp; Why Awaiting Generation tech-spec.md How to build Awaiting Generation roadmap.md Implementation plan Awaiting Generation adr/ Architecture decisions Awaiting Generation","tags":["planning","documentation"]},{"location":"planning/#using-documents-during-development","title":"Using Documents During Development","text":"","tags":["planning","documentation"]},{"location":"planning/#starting-a-session","title":"Starting a Session","text":"<p>```text Load context from: - project-vision.md sections 2-3 - adr/adr-001-*.md - tech-spec.md section [relevant section]</p> <p>Then implement [feature]. ```text</p>","tags":["planning","documentation"]},{"location":"planning/#validating-code","title":"Validating Code","text":"<p>```text Review this code against: - tech-spec.md section 6 (security) - adr/adr-002-*.md (relevant decision)</p> <p>Flag any violations. ```text</p>","tags":["planning","documentation"]},{"location":"planning/#updating-documents","title":"Updating Documents","text":"<p>Update documents when:</p> <ul> <li>Roadmap: After completing tasks</li> <li>ADR: When making architectural decisions</li> <li>Tech Spec: When architecture changes</li> <li>PVS: When scope changes</li> </ul>","tags":["planning","documentation"]},{"location":"planning/#document-relationships","title":"Document Relationships","text":"<p><code>text \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502   Project Vision &amp; Scope    \u2502  \u2190 WHAT &amp; WHY \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                \u2502                \u25bc \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502  Architecture Decisions     \u2502  \u2190 KEY CHOICES \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                \u2502                \u25bc \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502  Technical Specification    \u2502  \u2190 HOW \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                \u2502                \u25bc \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502  Development Roadmap        \u2502  \u2190 WHEN \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</code>text</p>","tags":["planning","documentation"]},{"location":"planning/#more-information","title":"More Information","text":"<ul> <li>Skill instructions: <code>.claude/skills/project-planning/SKILL.md</code></li> <li>Document templates: <code>.claude/skills/project-planning/templates/</code></li> <li>Detailed guidance: <code>.claude/skills/project-planning/reference/</code></li> </ul>","tags":["planning","documentation"]},{"location":"planning/project-plan-template/","title":"Python Libs - Project Plan","text":"<p>Project: Python Libs Description: Shared Python libraries for ByronWilliamsCPA projects - JWT auth, GCS utilities, and more Repository: <code>python_libs</code> Start Date: YYYY-MM-DD Target Completion: YYYY-MM-DD</p>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#executive-summary","title":"Executive Summary","text":"<p>Python Libs is a [brief description of what the project does]. This document outlines the complete implementation strategy, architecture, and phased development approach from initial conception through production deployment.</p> <p>Key Innovation: [What makes this approach unique or valuable?]</p> <p>Expected Outcomes:</p> <ul> <li>Objective 1</li> <li>Objective 2</li> <li>Objective 3</li> </ul> <p>Success Criteria:</p> <ul> <li>Metric 1: [target value or range]</li> <li>Metric 2: [target value or range]</li> <li>Metric 3: [target value or range]</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#project-scope-objectives","title":"Project Scope &amp; Objectives","text":"","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#in-scope-what-this-project-does","title":"\u2705 IN SCOPE - What This Project Does","text":"<p>Core Responsibilities:</p> <ul> <li>Feature/Capability 1</li> <li>Feature/Capability 2</li> <li>Feature/Capability 3</li> <li>Feature/Capability 4</li> </ul> <p>Deliverables:</p> <ul> <li>Deliverable 1</li> <li>Deliverable 2</li> <li>Deliverable 3</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#out-of-scope-what-this-project-does-not-do","title":"\u274c OUT OF SCOPE - What This Project Does NOT Do","text":"<p>Explicitly Excluded:</p> <ul> <li>Out of scope item 1</li> <li>Out of scope item 2</li> <li>Out of scope item 3</li> </ul> <p>Why Out of Scope:</p> <ul> <li>Reason 1</li> <li>Reason 2</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#system-architecture","title":"System Architecture","text":"","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#high-level-architecture","title":"High-Level Architecture","text":"<p>[Describe the overall system design]</p> <p><code>text \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502   Component/Module 1                 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502   \u2022 Responsibility 1                 \u2502 \u2502   \u2022 Responsibility 2                 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518             \u2193 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502   Component/Module 2                 \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502   \u2022 Responsibility 1                 \u2502 \u2502   \u2022 Responsibility 2                 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</code>text</p>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#module-responsibilities","title":"Module Responsibilities","text":"<p>Module 1 Name (<code>src/module1.py</code>)</p> <ul> <li>Core functionality description</li> <li>Key features and capabilities</li> <li>Dependencies and integration points</li> </ul> <p>Module 2 Name (<code>src/module2.py</code>)</p> <ul> <li>Core functionality description</li> <li>Key features and capabilities</li> <li>Dependencies and integration points</li> </ul> <p>Module 3 Name (<code>src/module3.py</code>)</p> <ul> <li>Core functionality description</li> <li>Key features and capabilities</li> <li>Dependencies and integration points</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#data-flow","title":"Data Flow","text":"<p>[Describe how data flows through the system]</p> <p><code>text Input \u2192 Processing \u2192 Output   \u2193         \u2193          \u2193 Step1    Step2       Step3</code>text</p>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#phased-development","title":"Phased Development","text":"","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#overview","title":"Overview","text":"<p>The project is developed in sequential phases, each with specific objectives, deliverables, and timelines.</p> Phase Dates Duration Focus Status Phase 0 Week 1-2 2 weeks Foundation &amp; Setup \u2705 Complete Phase 1 Week 3-5 3 weeks Core Features \ud83d\udd04 In Progress Phase 2 Week 6-8 3 weeks Advanced Features \ud83d\udea7 Planned Phase 3 Week 9-11 3 weeks Optimization \u23f3 Planned Phase 4 Week 12-13 2 weeks Documentation \u23f3 Planned","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#git-branch-strategy-for-phases","title":"Git Branch Strategy for Phases","text":"<p>Each phase should have its own development branch following semantic release conventions:</p> <p>```bash</p>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#phase-branches-follow-featphase-n-description","title":"Phase branches follow: feat/phase-{N}-{description}","text":"<p>feat/phase-0-foundation    # Foundation work (triggers minor bump) feat/phase-1-core          # Core features (triggers minor bump) feat/phase-2-advanced      # Advanced features (triggers minor bump) perf/phase-3-optimization  # Performance work (triggers patch bump) docs/phase-4-documentation # Documentation (no release)</p>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#start-phase-work-with-milestone-skill-auto-creates-branchworktree","title":"Start phase work with milestone skill (auto-creates branch/worktree)","text":"<p>/git/milestone start feat/phase-1-core</p>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#or-manually-for-simple-phases","title":"Or manually for simple phases","text":"<p>git checkout -b feat/phase-1-core ```text</p> <p>Phase Completion Workflow:</p> <ol> <li>Complete all deliverables in phase branch</li> <li>Run <code>/git/milestone complete</code> for validation</li> <li>Create PR with <code>/git/pr-prepare --include_wtd=true</code></li> <li>Merge triggers semantic release (if applicable)</li> <li>Start next phase branch</li> </ol>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#phase-0-foundation-setup-week-1-2-complete","title":"Phase 0: Foundation &amp; Setup (Week 1-2) \u2705 COMPLETE","text":"<p>Branch: <code>feat/phase-0-foundation</code></p> <p>Objectives:</p> <ul> <li>Establish project structure and configuration</li> <li>Setup development infrastructure</li> <li>Create baseline documentation</li> </ul> <p>Key Deliverables:</p> <ul> <li> Project skeleton with Poetry configuration</li> <li> Git repository with branch protection</li> <li> Pre-commit hooks and CI/CD pipeline</li> <li> Initial documentation structure</li> <li> Development environment setup guide</li> </ul> <p>Technical Details:</p> <ul> <li>Language/Framework: [Technology stack]</li> <li>Testing Framework: Pytest</li> <li>Documentation: MkDocs or Sphinx</li> <li>CI/CD: GitHub Actions</li> </ul> <p>Dependencies:</p> <ul> <li>None (foundation phase)</li> </ul> <p>Risks &amp; Mitigations:</p> <ul> <li>Risk 1: [Risk description] \u2192 Mitigation: [How to prevent/handle]</li> </ul> <p>Success Criteria:</p> <ul> <li> All tests pass (80%+ coverage)</li> <li> All pre-commit hooks pass</li> <li> Documentation builds without errors</li> <li> Team can run <code>poetry install</code> and start development</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#phase-1-core-features-week-3-5-in-progress","title":"Phase 1: Core Features (Week 3-5) \ud83d\udd04 IN PROGRESS","text":"<p>Branch: <code>feat/phase-1-core</code></p> <p>Objectives:</p> <ul> <li>Implement core functionality</li> <li>Create API/CLI interface</li> <li>Build comprehensive test suite</li> </ul> <p>Key Deliverables:</p> <ul> <li> Core module implementation</li> <li> CLI tool (if applicable)</li> <li> Unit tests (&gt;80% coverage)</li> <li> Integration tests</li> <li> User documentation</li> </ul> <p>Technical Details:</p> <p>Feature 1: [Name]</p> <ul> <li>Description: [What it does]</li> <li>Input/Output: [Data contract]</li> <li>Performance Target: [Latency, throughput, etc.]</li> <li>Dependencies: [Required libraries/services]</li> </ul> <p>Feature 2: [Name]</p> <ul> <li>Description: [What it does]</li> <li>Input/Output: [Data contract]</li> <li>Performance Target: [Latency, throughput, etc.]</li> <li>Dependencies: [Required libraries/services]</li> </ul> <p>Dependencies:</p> <ul> <li>Dependency 1 (v1.2.3)</li> <li>Dependency 2 (v2.0.0)</li> </ul> <p>Milestones:</p> <ul> <li>Week 3: Feature 1 implementation and testing</li> <li>Week 4: Feature 2 implementation and testing</li> <li>Week 5: Integration testing and documentation</li> </ul> <p>Risks &amp; Mitigations:</p> <ul> <li>Risk 1: [Risk] \u2192 Mitigation: [Solution]</li> <li>Risk 2: [Risk] \u2192 Mitigation: [Solution]</li> </ul> <p>Success Criteria:</p> <ul> <li> All features implemented and tested</li> <li> Code coverage \u226580%</li> <li> All pre-commit checks pass</li> <li> Documentation complete</li> <li> Performance targets met</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#phase-2-advanced-features-week-6-8-planned","title":"Phase 2: Advanced Features (Week 6-8) \ud83d\udea7 PLANNED","text":"<p>Branch: <code>feat/phase-2-advanced</code></p> <p>Objectives:</p> <ul> <li>Add advanced/optional features</li> <li>Performance optimization</li> <li>Enhanced error handling</li> </ul> <p>Key Deliverables:</p> <ul> <li> Advanced feature implementation</li> <li> Performance benchmarks</li> <li> Error handling and logging</li> <li> Extended documentation</li> </ul> <p>Technical Details:</p> <p>Feature 3: [Name]</p> <ul> <li>Description: [What it does]</li> <li>Input/Output: [Data contract]</li> <li>Performance Target: [Latency, throughput, etc.]</li> </ul> <p>Feature 4: [Name]</p> <ul> <li>Description: [What it does]</li> <li>Input/Output: [Data contract]</li> <li>Performance Target: [Latency, throughput, etc.]</li> </ul> <p>Dependencies:</p> <ul> <li>Dependency 3 (v1.0.0) [Optional for advanced features]</li> </ul> <p>Milestones:</p> <ul> <li>Week 6: Feature 3 implementation</li> <li>Week 7: Feature 4 implementation and optimization</li> <li>Week 8: Integration and documentation</li> </ul> <p>Success Criteria:</p> <ul> <li> All features implemented</li> <li> Performance targets achieved</li> <li> Backward compatibility maintained</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#phase-3-optimization-week-9-11-planned","title":"Phase 3: Optimization (Week 9-11) \ud83d\udea7 PLANNED","text":"<p>Branch: <code>perf/phase-3-optimization</code></p> <p>Objectives:</p> <ul> <li>Performance optimization</li> <li>Code refactoring</li> <li>Production hardening</li> </ul> <p>Key Deliverables:</p> <ul> <li> Performance benchmarks report</li> <li> Refactored code with improved maintainability</li> <li> Production deployment guide</li> <li> Scaling documentation</li> </ul> <p>Technical Details:</p> <p>Optimization Areas:</p> <ul> <li>Area 1: [What to optimize] \u2192 Target: [Performance metric]</li> <li>Area 2: [What to optimize] \u2192 Target: [Performance metric]</li> </ul> <p>Refactoring:</p> <ul> <li>Module 1 refactoring: [Description]</li> <li>Module 2 refactoring: [Description]</li> </ul> <p>Performance Targets:</p> <ul> <li>Latency: &lt;100ms per operation (CPU)</li> <li>Throughput: &gt;100 ops/sec</li> <li>Memory usage: &lt;100MB per worker</li> </ul> <p>Milestones:</p> <ul> <li>Week 9: Performance profiling and optimization plan</li> <li>Week 10: Implement optimizations</li> <li>Week 11: Benchmarking and verification</li> </ul> <p>Success Criteria:</p> <ul> <li> Performance targets met</li> <li> No functionality regression</li> <li> Code quality maintained (&gt;80% coverage)</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#phase-4-documentation-release-week-12-13-planned","title":"Phase 4: Documentation &amp; Release (Week 12-13) \u23f3 PLANNED","text":"<p>Branch: <code>docs/phase-4-documentation</code></p> <p>Objectives:</p> <ul> <li>Complete documentation</li> <li>Prepare for production release</li> <li>Create training materials</li> </ul> <p>Key Deliverables:</p> <ul> <li> Complete API documentation</li> <li> User guides and tutorials</li> <li> Deployment documentation</li> <li> Release notes</li> <li> Training materials</li> <li> Version 1.0.0 release</li> </ul> <p>Technical Details:</p> <p>Documentation:</p> <ul> <li>API Reference: Auto-generated from docstrings</li> <li>User Guide: Step-by-step usage instructions</li> <li>Architecture: ADRs and design documents</li> <li>Operations: Deployment, scaling, monitoring</li> </ul> <p>Release Preparation:</p> <ul> <li>Version bumping to 1.0.0</li> <li>Changelog compilation</li> <li>Release notes with migration guide</li> <li>GitHub release creation</li> </ul> <p>Milestones:</p> <ul> <li>Week 12: Documentation review and updates</li> <li>Week 13: Release preparation and publication</li> </ul> <p>Success Criteria:</p> <ul> <li> All documentation complete and current</li> <li> Version 1.0.0 released</li> <li> Release notes published</li> <li> Team trained and ready for support</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#performance-targets","title":"Performance Targets","text":"","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#quantitative-targets","title":"Quantitative Targets","text":"Metric Target Notes API Latency &lt;100ms P95 Single operation latency Throughput &gt;100 ops/sec Requests per second Memory Usage &lt;100MB Per worker/instance Test Coverage \u226580% Enforced by CI Documentation 100% Public APIs documented","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#qualitative-targets","title":"Qualitative Targets","text":"<ul> <li>Code Quality: All pre-commit checks pass</li> <li>Security: Zero known vulnerabilities</li> <li>Reliability: &gt;99.9% uptime</li> <li>Maintainability: Easy to understand and modify</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#risk-management","title":"Risk Management","text":"","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#identified-risks","title":"Identified Risks","text":"Risk Probability Impact Mitigation Risk 1: [Description] Medium High [Mitigation strategy] Risk 2: [Description] Low Critical [Mitigation strategy] Risk 3: [Description] High Medium [Mitigation strategy]","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#risk-response-strategy","title":"Risk Response Strategy","text":"<ol> <li>Risk 1: [How we will handle this risk]</li> <li>Risk 2: [How we will handle this risk]</li> <li>Risk 3: [How we will handle this risk]</li> </ol>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#dependencies-requirements","title":"Dependencies &amp; Requirements","text":"","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#external-dependencies","title":"External Dependencies","text":"<ul> <li>Dependency 1: [Version constraint] - [Purpose]</li> <li>Dependency 2: [Version constraint] - [Purpose]</li> <li>Dependency 3: [Version constraint] - [Purpose]</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#hardware-requirements-if-applicable","title":"Hardware Requirements (if applicable)","text":"<ul> <li>CPU: [Minimum specification]</li> <li>RAM: [Minimum specification]</li> <li>Storage: [Minimum specification]</li> <li>Network: [Bandwidth/connectivity requirements]</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#software-requirements","title":"Software Requirements","text":"<ul> <li>Python: 3.12+</li> <li>OS: Linux/macOS/Windows</li> <li>Database: [If applicable]</li> <li>Services: [If applicable]</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#resource-planning","title":"Resource Planning","text":"","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#team","title":"Team","text":"Role Person FTE Responsibilities Lead Byron Williams 1.0 Overall project lead Developer [Name] 1.0 Core development QA [Name] 0.5 Testing and quality","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#budget-if-applicable","title":"Budget (if applicable)","text":"<ul> <li>Development: [Cost estimate]</li> <li>Infrastructure: [Cost estimate]</li> <li>Third-party services: [Cost estimate]</li> <li>Total: [Total estimate]</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#timeline","title":"Timeline","text":"<ul> <li>Start Date: [Date]</li> <li>Target Completion: [Date]</li> <li>Contingency Buffer: 2 weeks</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#success-metrics","title":"Success Metrics","text":"","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#technical-metrics","title":"Technical Metrics","text":"<ul> <li> Code coverage \u226580%</li> <li> All tests passing</li> <li> Performance targets met</li> <li> Zero critical security issues</li> <li> Documentation complete</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#business-metrics","title":"Business Metrics","text":"<ul> <li> Feature parity with requirements</li> <li> User satisfaction</li> <li> Adoption rate</li> <li> Issue resolution time</li> <li> Uptime/reliability</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#related-documentation","title":"Related Documentation","text":"<ul> <li>CONTRIBUTING.md: How to contribute to the project</li> <li>ADRs/README.md: Architecture Decision Records</li> <li>README.md: Project overview</li> <li>Code of Conduct: Community guidelines (org-level)</li> </ul>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#change-log","title":"Change Log","text":"","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-plan-template/#document-updates","title":"Document Updates","text":"Date Author Change Rationale YYYY-MM-DD Byron Williams Initial plan Project kickoff YYYY-MM-DD [Name] Phase 1 update Progress tracking <p>Last Updated: YYYY-MM-DD Next Review: [Date or \"Quarterly\"] Approved By: [Name and Title]</p>","tags":["planning","roadmap","project","strategy"]},{"location":"planning/project-vision/","title":"Python Libs - Project Vision & Scope","text":"","tags":["planning","scope"]},{"location":"planning/project-vision/#project-vision-scope-python-libs","title":"Project Vision &amp; Scope: Python Libs","text":"<p>Status: Active | Version: 1.0 | Updated: 2025-12-04</p>","tags":["planning","scope"]},{"location":"planning/project-vision/#tldr","title":"TL;DR","text":"<p>Python Libs is a UV workspace monorepo providing shared, reusable Python utilities for ByronWilliamsCPA projects. It consolidates common patterns (GCS operations, authentication, logging, configuration) to eliminate duplication across repositories and establish organizational standards.</p>","tags":["planning","scope"]},{"location":"planning/project-vision/#problem-statement","title":"Problem Statement","text":"","tags":["planning","scope"]},{"location":"planning/project-vision/#pain-point","title":"Pain Point","text":"<p>Multiple projects (data_ingestor, image-preprocessing-detector, ledgerbase, magg, PromptCraft) duplicate identical utilities: GCS authentication patterns, structured logging setup, Pydantic configuration management, and error handling. Each project independently maintains these utilities, leading to:</p> <ul> <li>Inconsistent implementations across projects</li> <li>Duplicated bug fixes and security patches</li> <li>Increased maintenance burden</li> <li>Diverging patterns that complicate developer onboarding</li> </ul>","tags":["planning","scope"]},{"location":"planning/project-vision/#target-users","title":"Target Users","text":"<ul> <li>Primary: ByronWilliamsCPA developers working on Python projects</li> <li>Context: When starting new projects or needing cross-cutting concerns (auth, storage, logging)</li> </ul>","tags":["planning","scope"]},{"location":"planning/project-vision/#success-metrics","title":"Success Metrics","text":"<ul> <li>Code Duplication: Reduce duplicated utility code by 70% across active projects</li> <li>Onboarding Time: New project setup from template to first commit &lt; 30 minutes</li> <li>Adoption: 100% of new Python projects use python-libs packages</li> </ul>","tags":["planning","scope"]},{"location":"planning/project-vision/#solution-overview","title":"Solution Overview","text":"","tags":["planning","scope"]},{"location":"planning/project-vision/#core-value","title":"Core Value","text":"<p>A centralized, well-tested library of shared utilities that any Python project can import, reducing boilerplate and ensuring consistent patterns across the organization.</p>","tags":["planning","scope"]},{"location":"planning/project-vision/#key-capabilities-current-mvp","title":"Key Capabilities (Current + MVP)","text":"<ol> <li>GCS Utilities: Streamlined Google Cloud Storage operations with base64 credential handling</li> <li>Cloudflare Auth: Zero Trust authentication middleware for FastAPI applications</li> <li>Structured Logging: Consistent structlog+rich logging setup across all projects</li> <li>Configuration Management: Pydantic Settings patterns with environment validation</li> </ol>","tags":["planning","scope"]},{"location":"planning/project-vision/#scope-definition","title":"Scope Definition","text":"","tags":["planning","scope"]},{"location":"planning/project-vision/#in-scope-phase-1-foundation","title":"In Scope (Phase 1 - Foundation)","text":"<ul> <li>\u2705 gcs-utilities: Complete GCS client wrapper - Already implemented</li> <li>\u2705 cloudflare-auth: Cloudflare Access JWT validation - Already implemented</li> <li>\u2705 Core logging utilities: Unified structlog configuration</li> <li>\u2705 Core exceptions: Shared exception hierarchy</li> <li>\u2705 Configuration patterns: Base Pydantic Settings classes</li> </ul>","tags":["planning","scope"]},{"location":"planning/project-vision/#in-scope-phase-2-consolidation","title":"In Scope (Phase 2 - Consolidation)","text":"<ul> <li>\u2705 Framework adapters: Separate FastAPI-specific code from core logic</li> <li>\u2705 Financial utilities: Decimal precision utilities from ledgerbase patterns</li> <li>\u2705 Schema base classes: Reusable Pydantic models for cross-project validation</li> </ul>","tags":["planning","scope"]},{"location":"planning/project-vision/#in-scope-phase-3-distribution","title":"In Scope (Phase 3 - Distribution)","text":"<ul> <li>\u2705 Artifact Registry publishing: Private package distribution</li> <li>\u2705 Cookiecutter integration: Update template to use python-libs packages</li> <li>\u2705 Migration guides: Help existing projects adopt shared packages</li> </ul>","tags":["planning","scope"]},{"location":"planning/project-vision/#out-of-scope","title":"Out of Scope","text":"<ul> <li>\u274c Domain-specific logic: Business logic stays in individual projects</li> <li>\u274c ML/AI model code: Stays in RAG pipeline projects</li> <li>\u274c Database migrations: Project-specific, not shared</li> <li>\ud83d\udd04 Device detection utilities: Deferred pending RAG pipeline stabilization</li> </ul>","tags":["planning","scope"]},{"location":"planning/project-vision/#constraints","title":"Constraints","text":"","tags":["planning","scope"]},{"location":"planning/project-vision/#technical","title":"Technical","text":"<ul> <li>Platform: Python library packages (installable via UV/pip)</li> <li>Language: Python 3.10-3.14 (matching cookiecutter template)</li> <li>Architecture: UV workspace monorepo with independent packages</li> <li>Framework Strategy: Core logic framework-agnostic, with optional FastAPI adapters</li> </ul>","tags":["planning","scope"]},{"location":"planning/project-vision/#business","title":"Business","text":"<ul> <li>Resources: Single developer, async development</li> <li>Compatibility: Must work with existing projects without breaking changes</li> <li>Distribution: Private packages only (no public PyPI)</li> </ul>","tags":["planning","scope"]},{"location":"planning/project-vision/#assumptions-to-validate","title":"Assumptions to Validate","text":"<ul> <li> Git dependencies provide acceptable install performance for CI/CD</li> <li> Artifact Registry setup complexity is justified by caching benefits</li> <li> Framework-agnostic refactoring of cloudflare-auth is feasible without major rewrites</li> <li> Existing projects can migrate incrementally without disruption</li> </ul>","tags":["planning","scope"]},{"location":"planning/project-vision/#related-documents","title":"Related Documents","text":"<ul> <li>Architecture Decisions</li> <li>Technical Spec</li> <li>Roadmap</li> </ul>","tags":["planning","scope"]},{"location":"planning/roadmap/","title":"Python Libs - Development Roadmap","text":"","tags":["planning","roadmap"]},{"location":"planning/roadmap/#development-roadmap-python-libs","title":"Development Roadmap: Python Libs","text":"<p>Status: Active | Updated: 2025-12-04</p>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#tldr","title":"TL;DR","text":"<p>Consolidate shared utilities into python-libs across 4 phases: Foundation (complete existing packages), Stabilization (tests, docs, first consumers), Consolidation (refactor for reusability), Expansion (add new packages from pattern analysis), Distribution (Artifact Registry + cookiecutter integration).</p>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#timeline-overview","title":"Timeline Overview","text":"<pre><code>Phase 0: Foundation      \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 Complete  - Existing packages working\nPhase 1: Stabilization   \u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591 Planned   - Tests, docs, first consumers\nPhase 2: Consolidation   \u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591 Planned   - Framework-agnostic refactor\nPhase 3: Expansion       \u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591 Planned   - New packages from analysis\nPhase 4: Distribution    \u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591 Planned   - Artifact Registry, template\n</code></pre>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#milestones","title":"Milestones","text":"Milestone Target Status Dependencies M0: Workspace Setup Complete \u2705 Done None M1: First Consumer Phase 1 \u23f8\ufe0f Planned M0 M2: Framework-Agnostic Auth Phase 2 \u23f8\ufe0f Planned M1 M3: Logging Package Phase 3 \u23f8\ufe0f Planned M1 M4: Artifact Registry Phase 4 \u23f8\ufe0f Planned M1, M2","tags":["planning","roadmap"]},{"location":"planning/roadmap/#phase-0-foundation-complete","title":"Phase 0: Foundation (Complete)","text":"","tags":["planning","roadmap"]},{"location":"planning/roadmap/#objective","title":"Objective","text":"<p>Establish UV workspace monorepo with existing packages migrated.</p>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#deliverables","title":"Deliverables","text":"<ul> <li> UV workspace configured with <code>packages/*</code> members</li> <li> gcs-utilities package migrated</li> <li> cloudflare-auth package migrated</li> <li> Shared workspace utilities in <code>src/python_libs/</code></li> <li> CI/CD pipeline configured</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#success-criteria","title":"Success Criteria","text":"<ul> <li>\u2705 <code>uv sync</code> installs all packages</li> <li>\u2705 Tests pass for both packages</li> <li>\u2705 Pre-commit hooks working</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#phase-1-stabilization","title":"Phase 1: Stabilization","text":"","tags":["planning","roadmap"]},{"location":"planning/roadmap/#objective_1","title":"Objective","text":"<p>Prepare packages for external consumption with comprehensive tests, documentation, and first consumer migration.</p>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#deliverables_1","title":"Deliverables","text":"<ul> <li> Test coverage \u2265 80% for both packages</li> <li> API documentation generated</li> <li> README with usage examples for each package</li> <li> First consumer project using Git dependencies</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#success-criteria_1","title":"Success Criteria","text":"<ul> <li>\u2705 All tests passing with 80%+ coverage</li> <li>\u2705 Consumer project installs and uses package successfully</li> <li>\u2705 No breaking changes to existing package APIs</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#user-stories","title":"User Stories","text":"","tags":["planning","roadmap"]},{"location":"planning/roadmap/#us-101-package-documentation","title":"US-101: Package Documentation","text":"<p>As a developer consuming these packages I want clear documentation with examples So that I can integrate quickly without reading source code</p> <p>Acceptance Criteria:</p> <ul> <li> Each package has README with installation and basic usage</li> <li> API reference generated from docstrings</li> <li> Example code tested and working</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#us-102-first-consumer-migration","title":"US-102: First Consumer Migration","text":"<p>Migrate one project to validate distribution approach works with Git dependencies.</p>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#dependencies","title":"Dependencies","text":"<ul> <li>Requires: Phase 0 complete</li> <li>Blocks: Phase 2, Phase 3, Phase 4</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#phase-2-consolidation","title":"Phase 2: Consolidation","text":"","tags":["planning","roadmap"]},{"location":"planning/roadmap/#objective_2","title":"Objective","text":"<p>Refactor cloudflare-auth for framework-agnostic core per ADR-002.</p>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#deliverables_2","title":"Deliverables","text":"<ul> <li> cloudflare-auth/core/ with framework-agnostic logic</li> <li> cloudflare-auth/fastapi/ with FastAPI-specific code</li> <li> Optional dependencies configured (<code>[fastapi]</code>, <code>[redis]</code>)</li> <li> Migration guide for existing consumers</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#success-criteria_2","title":"Success Criteria","text":"<ul> <li>\u2705 Core validation works without FastAPI installed</li> <li>\u2705 FastAPI middleware works with <code>[fastapi]</code> extra</li> <li>\u2705 Existing consumers work after updating imports</li> <li>\u2705 Test coverage maintained at 80%+</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#user-stories_1","title":"User Stories","text":"","tags":["planning","roadmap"]},{"location":"planning/roadmap/#us-201-framework-agnostic-core","title":"US-201: Framework-Agnostic Core","text":"<p>As a CLI tool developer I want to validate Cloudflare tokens without FastAPI So that I can authenticate users in non-web contexts</p> <p>Acceptance Criteria:</p> <ul> <li> <code>from cloudflare_auth.core import CloudflareJWTValidator</code> works</li> <li> Validation succeeds/fails correctly with test tokens</li> <li> No FastAPI imports in core module</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#dependencies_1","title":"Dependencies","text":"<ul> <li>Requires: Phase 1 complete (tests, docs baseline)</li> <li>Blocks: Phase 4 (Artifact Registry)</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#phase-3-expansion","title":"Phase 3: Expansion","text":"","tags":["planning","roadmap"]},{"location":"planning/roadmap/#objective_3","title":"Objective","text":"<p>Add new packages based on pattern analysis from organizational repositories.</p>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#deliverables_3","title":"Deliverables","text":"<ul> <li> <code>python-libs-logging</code>: Unified structlog configuration</li> <li> Enhanced <code>python_libs.core.config</code>: Base Pydantic Settings</li> <li> Enhanced <code>python_libs.utils.financial</code>: Decimal precision utilities</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#candidate-packages-prioritized","title":"Candidate Packages (Prioritized)","text":"Package Source Pattern Priority Rationale Logging utilities image-preprocessing-detector, data_ingestor High Used in every project Config management Multiple projects High Reduces boilerplate Financial utilities ledgerbase Medium Specialized but valuable Schema base classes RAG projects Medium Cross-project validation Device detection image-preprocessing-detector Low RAG-specific, defer","tags":["planning","roadmap"]},{"location":"planning/roadmap/#success-criteria_3","title":"Success Criteria","text":"<ul> <li>\u2705 Each new package has tests and documentation</li> <li>\u2705 At least 2 consumer projects adopt each package</li> <li>\u2705 Reduces code duplication measurably</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#user-stories_2","title":"User Stories","text":"","tags":["planning","roadmap"]},{"location":"planning/roadmap/#us-301-logging-package","title":"US-301: Logging Package","text":"<p>As a developer starting a new project I want consistent structured logging setup So that I don't reinvent logging configuration</p> <p>Acceptance Criteria:</p> <ul> <li> Single function call configures structlog + rich</li> <li> JSON output mode for production</li> <li> Rich console output for development</li> <li> Correlation ID support</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#dependencies_2","title":"Dependencies","text":"<ul> <li>Requires: Phase 1 complete</li> <li>Can run in parallel with Phase 2</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#phase-4-distribution","title":"Phase 4: Distribution","text":"","tags":["planning","roadmap"]},{"location":"planning/roadmap/#objective_4","title":"Objective","text":"<p>Establish mature distribution via Artifact Registry and integrate with cookiecutter template.</p>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#deliverables_4","title":"Deliverables","text":"<ul> <li> Artifact Registry Python repository configured</li> <li> GitHub Actions workflow for publishing</li> <li> Consumer projects migrated from Git to Artifact Registry</li> <li> Cookiecutter template updated to use python-libs</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#success-criteria_4","title":"Success Criteria","text":"<ul> <li>\u2705 Packages published to Artifact Registry on release</li> <li>\u2705 Install time &lt; 10s (vs ~30s for Git)</li> <li>\u2705 New projects from template use python-libs by default</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#user-stories_3","title":"User Stories","text":"","tags":["planning","roadmap"]},{"location":"planning/roadmap/#us-401-artifact-registry-publishing","title":"US-401: Artifact Registry Publishing","text":"<p>As a package maintainer I want automatic publishing on release So that consumers get updates without manual intervention</p> <p>Acceptance Criteria:</p> <ul> <li> GitHub Action publishes on tag push</li> <li> Version matches Git tag</li> <li> Package installable from Artifact Registry URL</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#us-402-cookiecutter-integration","title":"US-402: Cookiecutter Integration","text":"<p>Update template to include python-libs as optional dependency with package selection prompts.</p>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#dependencies_3","title":"Dependencies","text":"<ul> <li>Requires: Phase 1, Phase 2 complete</li> <li>Cookiecutter integration can start after Phase 1</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#risk-register","title":"Risk Register","text":"Risk Probability Impact Mitigation Git dependency performance unacceptable Medium Medium Prioritize Artifact Registry migration Framework-agnostic refactor breaks consumers Low High Deprecation warnings, migration guide Artifact Registry setup complexity Medium Low Detailed documentation, start with Git Low adoption of new packages Medium Medium Migrate own projects first as proof","tags":["planning","roadmap"]},{"location":"planning/roadmap/#definition-of-done","title":"Definition of Done","text":"<p>A feature/package is complete when:</p> <ul> <li> Code reviewed and approved</li> <li> Tests written and passing (80%+ coverage)</li> <li> Documentation updated (README, API docs)</li> <li> No linting errors (Ruff, BasedPyright)</li> <li> Changelog updated</li> <li> Merged to main</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/roadmap/#related-documents","title":"Related Documents","text":"<ul> <li>Project Vision</li> <li>Technical Spec</li> <li>Architecture Decisions</li> </ul>","tags":["planning","roadmap"]},{"location":"planning/tech-spec/","title":"Python Libs - Technical Specification","text":"","tags":["planning","architecture"]},{"location":"planning/tech-spec/#technical-implementation-spec-python-libs","title":"Technical Implementation Spec: Python Libs","text":"<p>Status: Active | Version: 1.0 | Updated: 2025-12-04</p>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#tldr","title":"TL;DR","text":"<p>UV workspace monorepo hosting independent Python packages for shared utilities. Each package follows framework-agnostic core design with optional adapters. Distribution via Git dependencies initially, migrating to Artifact Registry.</p>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#technology-stack","title":"Technology Stack","text":"","tags":["planning","architecture"]},{"location":"planning/tech-spec/#core","title":"Core","text":"<ul> <li>Language: Python 3.10-3.14</li> <li>Package Manager: UV with workspace support</li> <li>Build Backend: Hatchling</li> </ul>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#code-quality","title":"Code Quality","text":"<ul> <li>Linter/Formatter: Ruff (88 chars, Google style)</li> <li>Type Checker: BasedPyright (strict mode)</li> <li>Testing: pytest with pytest-cov, pytest-asyncio</li> <li>Security: Bandit, pip-audit, Safety</li> </ul>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#infrastructure","title":"Infrastructure","text":"<ul> <li>CI/CD: GitHub Actions</li> <li>Documentation: MkDocs Material</li> <li>Version Control: Git with conventional commits</li> </ul>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#architecture","title":"Architecture","text":"","tags":["planning","architecture"]},{"location":"planning/tech-spec/#pattern","title":"Pattern","text":"<p>UV Workspace Monorepo - See ADR-001</p>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#component-diagram","title":"Component Diagram","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     python-libs (workspace)                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  packages/                                                       \u2502\n\u2502  \u251c\u2500\u2500 cloudflare-auth/          \u251c\u2500\u2500 gcs-utilities/               \u2502\n\u2502  \u2502   \u251c\u2500\u2500 core/                 \u2502   \u251c\u2500\u2500 client.py                \u2502\n\u2502  \u2502   \u2502   \u251c\u2500\u2500 models.py         \u2502   \u251c\u2500\u2500 exceptions.py            \u2502\n\u2502  \u2502   \u2502   \u251c\u2500\u2500 validators.py     \u2502   \u2514\u2500\u2500 __init__.py              \u2502\n\u2502  \u2502   \u2502   \u2514\u2500\u2500 exceptions.py     \u2502                                \u2502\n\u2502  \u2502   \u2514\u2500\u2500 fastapi/              \u2514\u2500\u2500 [future packages]            \u2502\n\u2502  \u2502       \u251c\u2500\u2500 middleware.py                                       \u2502\n\u2502  \u2502       \u2514\u2500\u2500 dependencies.py                                     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  src/python_libs/              (shared workspace utilities)      \u2502\n\u2502  \u251c\u2500\u2500 core/                                                       \u2502\n\u2502  \u2502   \u251c\u2500\u2500 config.py             # Base Pydantic Settings          \u2502\n\u2502  \u2502   \u2514\u2500\u2500 exceptions.py         # Shared exception hierarchy      \u2502\n\u2502  \u2514\u2500\u2500 utils/                                                      \u2502\n\u2502      \u251c\u2500\u2500 logging.py            # Structured logging setup        \u2502\n\u2502      \u2514\u2500\u2500 financial.py          # Decimal precision utilities     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#component-responsibilities","title":"Component Responsibilities","text":"Component Purpose Key Functions <code>gcs-utilities</code> Google Cloud Storage operations upload, download, list, delete with auth handling <code>cloudflare-auth</code> Zero Trust authentication JWT validation, middleware, user models <code>python_libs.core</code> Shared foundations Base config, exceptions <code>python_libs.utils</code> Cross-cutting utilities Logging setup, financial calculations","tags":["planning","architecture"]},{"location":"planning/tech-spec/#data-model","title":"Data Model","text":"","tags":["planning","architecture"]},{"location":"planning/tech-spec/#gcs-utilities-existing","title":"gcs-utilities (Existing)","text":"<pre><code>from gcs_utilities import GCSClient\n\nclient = GCSClient()  # Reads GCP_SA_KEY from env\nclient.upload_file(\"local.txt\", \"remote/path.txt\")\nfiles = client.list_files(prefix=\"remote/\")\n</code></pre> <p>Core Entities:</p> <pre><code>class GCSClient:\n    bucket_name: str | None\n    project_id: str | None\n    client: storage.Client\n\nclass GCSAuthError(Exception): ...\nclass GCSUploadError(Exception): ...\nclass GCSDownloadError(Exception): ...\nclass GCSNotFoundError(Exception): ...\n</code></pre>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#cloudflare-auth-existing-refactoring-planned","title":"cloudflare-auth (Existing, Refactoring Planned)","text":"<pre><code># Current (FastAPI-coupled)\nfrom cloudflare_auth import setup_cloudflare_auth_enhanced, get_current_user\n\n# Future (Framework-agnostic core)\nfrom cloudflare_auth.core import CloudflareJWTValidator\nfrom cloudflare_auth.fastapi import CloudflareAuthMiddleware\n</code></pre> <p>Core Entities:</p> <pre><code>class CloudflareUser:\n    email: str\n    user_id: str\n    user_tier: UserTier\n    iat: datetime\n    exp: datetime\n\nclass CloudflareJWTClaims:\n    email: str\n    sub: str\n    iat: int\n    exp: int\n    iss: str\n    aud: list[str]\n</code></pre>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#python_libscore-workspace-shared","title":"python_libs.core (Workspace Shared)","text":"<pre><code>from python_libs.core.config import BaseSettings\nfrom python_libs.core.exceptions import ValidationError, ConfigurationError\n</code></pre>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#python_libsutils-workspace-shared","title":"python_libs.utils (Workspace Shared)","text":"<pre><code>from python_libs.utils.logging import setup_logging, get_logger\nfrom python_libs.utils.financial import round_currency, validate_amount\n</code></pre>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#distribution","title":"Distribution","text":"","tags":["planning","architecture"]},{"location":"planning/tech-spec/#git-dependencies-phase-1","title":"Git Dependencies (Phase 1)","text":"<pre><code># Consumer pyproject.toml\n[project]\ndependencies = [\n    \"byronwilliamscpa-gcs-utilities @ git+https://github.com/ByronWilliamsCPA/python-libs.git@gcs-utilities-v0.1.0#subdirectory=packages/gcs-utilities\",\n]\n</code></pre>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#artifact-registry-phase-2","title":"Artifact Registry (Phase 2)","text":"<p>See ADR-003 for migration plan.</p>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#security","title":"Security","text":"","tags":["planning","architecture"]},{"location":"planning/tech-spec/#authentication-handling","title":"Authentication Handling","text":"<ul> <li>GCS: Base64-encoded service account keys via <code>GCP_SA_KEY</code> environment variable</li> <li>Cloudflare: JWT validation against Cloudflare Access public keys</li> <li>Credentials: Never logged, temporary files cleaned up automatically</li> </ul>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#input-validation","title":"Input Validation","text":"<ul> <li>Path traversal prevention in GCS operations (<code>_sanitize_gcs_path</code>)</li> <li>JWT size limits to prevent DoS</li> <li>Email sanitization in logs</li> </ul>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#data-protection","title":"Data Protection","text":"<ul> <li>At Rest: Credentials in environment variables or secrets manager</li> <li>In Transit: All external calls over HTTPS/TLS</li> <li>Sensitive Data: Never log credentials, tokens, or PII</li> </ul>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#error-handling","title":"Error Handling","text":"","tags":["planning","architecture"]},{"location":"planning/tech-spec/#strategy","title":"Strategy","text":"<p>Fail-fast with descriptive exceptions. Each package defines its own exception hierarchy inheriting from a base exception.</p>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#exception-hierarchy","title":"Exception Hierarchy","text":"<pre><code># gcs-utilities\nGCSError (base)\n\u251c\u2500\u2500 GCSAuthError\n\u251c\u2500\u2500 GCSConfigError\n\u251c\u2500\u2500 GCSUploadError\n\u251c\u2500\u2500 GCSDownloadError\n\u2514\u2500\u2500 GCSNotFoundError\n\n# cloudflare-auth\nCloudflareAuthError (base)\n\u251c\u2500\u2500 TokenValidationError\n\u251c\u2500\u2500 TokenExpiredError\n\u2514\u2500\u2500 InvalidAudienceError\n\n# python_libs.core\nPythonLibsError (base)\n\u251c\u2500\u2500 ConfigurationError\n\u251c\u2500\u2500 ValidationError\n\u2514\u2500\u2500 ExternalServiceError\n</code></pre>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#logging","title":"Logging","text":"<ul> <li>Format: Structured JSON via structlog</li> <li>Levels: DEBUG for operations, INFO for success, WARNING for recoverable issues, ERROR for failures</li> <li>Sensitive: Never log credentials, tokens, full file contents</li> </ul>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#performance","title":"Performance","text":"Metric Target Measurement Package install (Git) &lt; 30s CI/CD timing Package install (Artifact Registry) &lt; 10s CI/CD timing JWT validation &lt; 10ms Unit test benchmark GCS small file upload &lt; 2s Integration test","tags":["planning","architecture"]},{"location":"planning/tech-spec/#testing","title":"Testing","text":"","tags":["planning","architecture"]},{"location":"planning/tech-spec/#coverage-target","title":"Coverage Target","text":"<ul> <li>Minimum: 80%</li> <li>Critical paths (auth, credentials): 100%</li> </ul>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#test-types","title":"Test Types","text":"<ul> <li>Unit: Core logic, validators, models (no external calls)</li> <li>Integration: GCS operations with emulator, JWT with test tokens</li> <li>Package Tests: Each package has own test directory</li> </ul>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#test-structure","title":"Test Structure","text":"<pre><code>packages/\n\u251c\u2500\u2500 gcs-utilities/\n\u2502   \u2514\u2500\u2500 tests/\n\u2502       \u251c\u2500\u2500 test_client.py\n\u2502       \u251c\u2500\u2500 test_exceptions.py\n\u2502       \u2514\u2500\u2500 conftest.py\n\u251c\u2500\u2500 cloudflare-auth/\n\u2502   \u2514\u2500\u2500 tests/\n\u2502       \u251c\u2500\u2500 test_validators.py\n\u2502       \u251c\u2500\u2500 test_models.py\n\u2502       \u2514\u2500\u2500 conftest.py\n\u2514\u2500\u2500 tests/                    # Workspace-level tests\n    \u251c\u2500\u2500 unit/\n    \u2514\u2500\u2500 integration/\n</code></pre>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#versioning","title":"Versioning","text":"","tags":["planning","architecture"]},{"location":"planning/tech-spec/#semantic-versioning","title":"Semantic Versioning","text":"<p>Each package versioned independently following SemVer:</p> <ul> <li>Major: Breaking API changes</li> <li>Minor: New features, backward compatible</li> <li>Patch: Bug fixes, backward compatible</li> </ul>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#git-tags","title":"Git Tags","text":"<pre><code>gcs-utilities-v0.1.0\ncloudflare-auth-v0.2.0\n</code></pre>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#changelog","title":"Changelog","text":"<p>Each package maintains its own <code>CHANGELOG.md</code> following Keep a Changelog format.</p>","tags":["planning","architecture"]},{"location":"planning/tech-spec/#related-documents","title":"Related Documents","text":"<ul> <li>Project Vision</li> <li>Architecture Decisions</li> <li>Development Roadmap</li> </ul>","tags":["planning","architecture"]},{"location":"planning/adr/","title":"Architecture Decision Records","text":"<p>This directory contains Architecture Decision Records (ADRs) for Python Libs.</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/#what-are-adrs","title":"What Are ADRs?","text":"<p>ADRs document significant architectural decisions along with their context and consequences. They help:</p> <ul> <li>Prevent architectural drift during AI-assisted development</li> <li>Provide rationale for technical choices</li> <li>Enable future developers to understand why decisions were made</li> <li>Maintain consistency across coding sessions</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/#adr-index","title":"ADR Index","text":"ADR Title Status Date ADR-001 UV Workspace Monorepo Architecture Accepted 2025-12-04 ADR-002 Framework-Agnostic Core with Optional Adapters Accepted 2025-12-04 ADR-003 Private Package Distribution Strategy Accepted 2025-12-04","tags":["planning","architecture","decisions"]},{"location":"planning/adr/#creating-adrs","title":"Creating ADRs","text":"","tags":["planning","architecture","decisions"]},{"location":"planning/adr/#automatic-generation","title":"Automatic Generation","text":"<p>Run <code>/plan &lt;project description&gt;</code> to generate initial ADRs alongside other planning documents.</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/#manual-creation","title":"Manual Creation","text":"<p>When making a new architectural decision:</p> <pre><code>Create an ADR for [decision topic].\nUse template: .claude/skills/project-planning/templates/adr-template.md\nSave to: docs/planning/adr/adr-NNN-[decision-slug].md\n</code></pre>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/#naming-convention","title":"Naming Convention","text":"<p>ADRs follow this naming pattern:</p> <pre><code>adr-NNN-short-description.md\n\nExamples:\n- adr-001-database-choice.md\n- adr-002-auth-strategy.md\n- adr-003-api-design.md\n</code></pre>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/#when-to-create-an-adr","title":"When to Create an ADR","text":"<p>Create an ADR when:</p> <ul> <li>Choosing technology stack or framework</li> <li>Deciding on architectural patterns</li> <li>Selecting third-party services or libraries</li> <li>Making security or performance trade-offs</li> <li>Any decision that would be expensive to reverse</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/#adr-lifecycle","title":"ADR Lifecycle","text":"<pre><code>Proposed \u2192 Accepted \u2192 [Deprecated | Superseded]\n</code></pre> <ul> <li>Proposed: Under discussion</li> <li>Accepted: Decision made and in use</li> <li>Deprecated: No longer relevant</li> <li>Superseded: Replaced by another ADR</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/#template-reference","title":"Template Reference","text":"<p>See <code>.claude/skills/project-planning/templates/adr-template.md</code> for the full template structure.</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/#more-information","title":"More Information","text":"<ul> <li>Document Guide: <code>.claude/skills/project-planning/reference/document-guide.md</code></li> <li>Prompting Patterns: <code>.claude/skills/project-planning/reference/prompting-patterns.md</code></li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/","title":"ADR-001: UV Workspace Monorepo Architecture","text":"","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#adr-001-uv-workspace-monorepo-architecture","title":"ADR-001: UV Workspace Monorepo Architecture","text":"<p>Status: Accepted Date: 2025-12-04</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#tldr","title":"TL;DR","text":"<p>Use UV workspace monorepo to manage multiple independent packages (gcs-utilities, cloudflare-auth, etc.) in a single repository, enabling coordinated development while maintaining separate versioning and publishing.</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#context","title":"Context","text":"","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#problem","title":"Problem","text":"<p>The organization needs to share Python utilities across multiple projects (data_ingestor, image-preprocessing-detector, ledgerbase, magg). Options for structuring shared code include:</p> <ol> <li>Single monolithic package with all utilities</li> <li>Separate repositories for each utility package</li> <li>Monorepo with independent packages</li> </ol>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#constraints","title":"Constraints","text":"<ul> <li>Technical: Need independent versioning per package; some packages have different dependencies</li> <li>Business: Single developer maintaining multiple projects; minimize context-switching overhead</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#significance","title":"Significance","text":"<p>This decision affects how packages are developed, versioned, tested, and published. Wrong choice leads to either tight coupling (monolithic) or coordination overhead (multiple repos).</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#decision","title":"Decision","text":"<p>We will use UV workspace monorepo because it provides independent package management with unified development experience.</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#rationale","title":"Rationale","text":"<ul> <li>UV workspaces allow each package to have its own <code>pyproject.toml</code>, dependencies, and version</li> <li>Single <code>uv sync</code> installs all packages in development mode</li> <li>Cross-package dependencies resolved automatically within workspace</li> <li>Shared CI/CD, linting, and documentation infrastructure</li> <li>Already successfully using this pattern (current repo structure)</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#options-considered","title":"Options Considered","text":"","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#option-1-uv-workspace-monorepo","title":"Option 1: UV Workspace Monorepo \u2713","text":"<p>Pros: - \u2705 Single repository to manage - \u2705 Unified CI/CD pipeline - \u2705 Cross-package changes in single PR - \u2705 Shared dev dependencies and tooling - \u2705 Independent versioning per package</p> <p>Cons: - \u274c Larger repository size over time - \u274c Need discipline to maintain package boundaries</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#option-2-separate-repositories","title":"Option 2: Separate Repositories","text":"<p>Pros: - \u2705 Complete isolation between packages - \u2705 Independent release cycles</p> <p>Cons: - \u274c Coordination overhead for cross-package changes - \u274c Duplicated CI/CD, linting, documentation setup - \u274c Version compatibility issues between packages</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#option-3-single-monolithic-package","title":"Option 3: Single Monolithic Package","text":"<p>Pros: - \u2705 Simplest structure - \u2705 Single version to track</p> <p>Cons: - \u274c All-or-nothing dependency: projects must install everything - \u274c Tight coupling makes testing harder - \u274c Single failure can break entire package</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#consequences","title":"Consequences","text":"","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#positive","title":"Positive","text":"<ul> <li>\u2705 Reduced overhead: Single PR for cross-package changes</li> <li>\u2705 Consistent tooling: Shared Ruff, BasedPyright, pytest configuration</li> <li>\u2705 Easier onboarding: One repository to clone for all shared utilities</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#trade-offs","title":"Trade-offs","text":"<ul> <li>\u26a0\ufe0f Package discipline required: Must maintain clear boundaries between packages</li> <li>\u26a0\ufe0f CI complexity: Need to detect which packages changed for selective testing</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#technical-debt","title":"Technical Debt","text":"<ul> <li>Consider package-specific CI triggers if test times grow significantly</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#implementation","title":"Implementation","text":"","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#components-affected","title":"Components Affected","text":"<ol> <li>Root pyproject.toml: Workspace configuration with <code>[tool.uv.workspace]</code></li> <li>packages/*/pyproject.toml: Individual package configurations</li> <li>CI/CD: Single workflow testing all packages</li> </ol>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#current-structure","title":"Current Structure","text":"<pre><code>python-libs/\n\u251c\u2500\u2500 pyproject.toml              # Workspace root\n\u251c\u2500\u2500 packages/\n\u2502   \u251c\u2500\u2500 cloudflare-auth/\n\u2502   \u2502   \u251c\u2500\u2500 pyproject.toml      # Independent package\n\u2502   \u2502   \u2514\u2500\u2500 src/cloudflare_auth/\n\u2502   \u2514\u2500\u2500 gcs-utilities/\n\u2502       \u251c\u2500\u2500 pyproject.toml      # Independent package\n\u2502       \u2514\u2500\u2500 src/gcs_utilities/\n\u2514\u2500\u2500 src/python_libs/            # Shared workspace utilities\n</code></pre>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#validation","title":"Validation","text":"","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#success-criteria","title":"Success Criteria","text":"<ul> <li> Multiple packages coexist in single repository</li> <li> Each package independently versionable</li> <li> <code>uv sync</code> resolves all workspace dependencies</li> <li> CI/CD correctly tests affected packages only (future enhancement)</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#review-schedule","title":"Review Schedule","text":"<ul> <li>Initial: Complete (current architecture)</li> <li>Ongoing: Review if adding &gt;5 packages</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-001-monorepo-architecture/#related","title":"Related","text":"<ul> <li>Tech Spec: Package structure details</li> <li>ADR-002: Framework coupling strategy</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/","title":"ADR-002: Framework-Agnostic Core with Optional Adapters","text":"","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#adr-002-framework-agnostic-core-with-optional-adapters","title":"ADR-002: Framework-Agnostic Core with Optional Adapters","text":"<p>Status: Accepted Date: 2025-12-04</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#tldr","title":"TL;DR","text":"<p>Structure packages with framework-agnostic core logic and optional framework-specific adapters (e.g., FastAPI), enabling reuse across different contexts while providing convenient integrations.</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#context","title":"Context","text":"","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#problem","title":"Problem","text":"<p>The <code>cloudflare-auth</code> package currently requires FastAPI/Starlette as dependencies. This tight coupling prevents use in:</p> <ul> <li>CLI tools that validate tokens offline</li> <li>Background workers processing authenticated requests</li> <li>Future projects using different frameworks (Flask, Litestar)</li> <li>Non-web contexts needing auth logic</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#constraints","title":"Constraints","text":"<ul> <li>Technical: Cannot break existing FastAPI integrations</li> <li>Business: Limited time for major refactoring; must be incremental</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#significance","title":"Significance","text":"<p>Coupling to FastAPI limits reusability. If we add Flask support later, we'd either duplicate core logic or force a breaking refactor. Better to establish the pattern now.</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#decision","title":"Decision","text":"<p>We will separate framework-agnostic core from framework adapters because it maximizes reusability without sacrificing convenience.</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#rationale","title":"Rationale","text":"<ul> <li>Core logic (JWT validation, user models, token parsing) has no framework dependency</li> <li>Framework-specific code (middleware, request/response handling) is isolated</li> <li>Optional dependencies allow consumers to install only what they need</li> <li>Pattern is widely used (e.g., SQLAlchemy core vs ORM, Pydantic vs FastAPI)</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#options-considered","title":"Options Considered","text":"","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#option-1-framework-agnostic-core-optional-adapters","title":"Option 1: Framework-Agnostic Core + Optional Adapters \u2713","text":"<p>Pros: - \u2705 Core logic usable anywhere (CLI, workers, any framework) - \u2705 Optional dependencies keep install size small - \u2705 Easy to add new framework support - \u2705 Better testability (core logic tested without mocking framework)</p> <p>Cons: - \u274c Slightly more complex package structure - \u274c Refactoring effort for existing code</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#option-2-maintain-fastapi-coupling","title":"Option 2: Maintain FastAPI Coupling","text":"<p>Pros: - \u2705 No refactoring needed - \u2705 Simpler package structure</p> <p>Cons: - \u274c Cannot use in non-FastAPI contexts - \u274c Forces FastAPI dependency on all consumers - \u274c Harder to test core logic in isolation</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#option-3-separate-packages-per-framework","title":"Option 3: Separate Packages per Framework","text":"<p>Pros: - \u2705 Complete isolation</p> <p>Cons: - \u274c Duplicated core logic or complex dependency chain - \u274c Multiple packages to version and maintain - \u274c Overkill for current needs</p>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#consequences","title":"Consequences","text":"","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#positive","title":"Positive","text":"<ul> <li>\u2705 Broader applicability: Auth logic usable in CLI tools, workers, any framework</li> <li>\u2705 Better testing: Core logic tested without framework mocks</li> <li>\u2705 Future-proof: Easy to add Flask, Litestar adapters if needed</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#trade-offs","title":"Trade-offs","text":"<ul> <li>\u26a0\ufe0f Refactoring required: <code>cloudflare-auth</code> needs restructuring</li> <li>\u26a0\ufe0f Learning curve: Developers must understand core vs adapter distinction</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#technical-debt","title":"Technical Debt","text":"<ul> <li>Current <code>cloudflare-auth</code> middleware.py mixes core and FastAPI code; needs refactoring</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#implementation","title":"Implementation","text":"","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#components-affected","title":"Components Affected","text":"<ol> <li>cloudflare-auth/core/: Framework-agnostic JWT validation, models</li> <li>cloudflare-auth/fastapi/: Middleware, dependencies, request handling</li> <li>pyproject.toml: Optional dependencies for framework extras</li> </ol>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#target-structure","title":"Target Structure","text":"<pre><code>cloudflare-auth/\n\u251c\u2500\u2500 src/cloudflare_auth/\n\u2502   \u251c\u2500\u2500 __init__.py           # Public API\n\u2502   \u251c\u2500\u2500 core/                  # Framework-agnostic\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 models.py         # CloudflareUser, CloudflareJWTClaims\n\u2502   \u2502   \u251c\u2500\u2500 validators.py     # JWT validation logic\n\u2502   \u2502   \u2514\u2500\u2500 exceptions.py     # Auth exceptions\n\u2502   \u2514\u2500\u2500 fastapi/              # FastAPI-specific\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 middleware.py     # CloudflareAuthMiddleware\n\u2502       \u2514\u2500\u2500 dependencies.py   # get_current_user, require_admin\n\u2514\u2500\u2500 pyproject.toml\n</code></pre>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#optional-dependencies","title":"Optional Dependencies","text":"<pre><code>[project.optional-dependencies]\nfastapi = [\"fastapi&gt;=0.100.0\", \"starlette&gt;=0.27.0\"]\nredis = [\"redis&gt;=4.0.0\"]\nall = [\"fastapi&gt;=0.100.0\", \"starlette&gt;=0.27.0\", \"redis&gt;=4.0.0\"]\n</code></pre>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#usage-examples","title":"Usage Examples","text":"<pre><code># Core only (CLI, workers)\nfrom cloudflare_auth.core import CloudflareJWTValidator, CloudflareUser\nvalidator = CloudflareJWTValidator(team_domain=\"example\", policy_aud=\"...\")\nclaims = validator.validate_token(jwt_token)\n\n# With FastAPI\nfrom cloudflare_auth.fastapi import CloudflareAuthMiddleware, get_current_user\napp.add_middleware(CloudflareAuthMiddleware)\n</code></pre>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#validation","title":"Validation","text":"","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#success-criteria","title":"Success Criteria","text":"<ul> <li> Core validation works without FastAPI installed</li> <li> FastAPI middleware works with <code>[fastapi]</code> extra</li> <li> Existing FastAPI code migrates with minimal changes</li> <li> Test coverage maintained at 80%+</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#review-schedule","title":"Review Schedule","text":"<ul> <li>Initial: After Phase 2 refactoring</li> <li>Ongoing: When adding new framework adapters</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-002-framework-agnostic-design/#related","title":"Related","text":"<ul> <li>ADR-001: Monorepo structure</li> <li>ADR-003: Package distribution approach</li> <li>Tech Spec: Authentication details</li> </ul>","tags":["planning","architecture","decisions"]},{"location":"planning/adr/adr-003-distribution-strategy/","title":"ADR-003: Private Package Distribution Strategy","text":"","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#adr-003-private-package-distribution-strategy","title":"ADR-003: Private Package Distribution Strategy","text":"<p>Status: Accepted Date: 2025-12-04</p>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#tldr","title":"TL;DR","text":"<p>Start with Git dependencies for immediate usability, then migrate to Google Artifact Registry for better caching and integration with Assured OSS infrastructure.</p>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#context","title":"Context","text":"","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#problem","title":"Problem","text":"<p>python-libs packages need to be installable by other organization projects without publishing to public PyPI. Options include:</p> <ol> <li>Git dependencies (install directly from GitHub)</li> <li>GitHub Packages (GitHub's package registry)</li> <li>Google Artifact Registry (GCP-native Python repository)</li> <li>Third-party private PyPI (Gemfury, Packagr, etc.)</li> </ol>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#constraints","title":"Constraints","text":"<ul> <li>Technical: Must work with UV package manager; need authentication for CI/CD</li> <li>Business: No public distribution; prefer GCP integration (already using GCS, Assured OSS)</li> </ul>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#significance","title":"Significance","text":"<p>Distribution strategy affects install times, caching, security scanning integration, and developer experience. Wrong choice creates friction for package consumers.</p>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#decision","title":"Decision","text":"<p>We will use Git dependencies initially, migrating to Artifact Registry when caching benefits justify setup complexity.</p>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#rationale","title":"Rationale","text":"<ul> <li>Git dependencies work immediately with zero infrastructure</li> <li>UV has excellent Git dependency support with commit pinning</li> <li>Artifact Registry provides proper package caching and Assured OSS integration</li> <li>Two-phase approach balances immediate usability with long-term optimization</li> </ul>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#options-considered","title":"Options Considered","text":"","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#option-1-git-dependencies-artifact-registry","title":"Option 1: Git Dependencies \u2192 Artifact Registry \u2713","text":"<p>Pros: - \u2705 Immediate availability (Git works now) - \u2705 No infrastructure setup required initially - \u2705 UV supports Git dependencies natively - \u2705 Artifact Registry integrates with existing GCP infrastructure - \u2705 Assured OSS scanning available with Artifact Registry</p> <p>Cons: - \u274c Git dependencies slower (no package caching) - \u274c Migration effort when moving to Artifact Registry</p>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#option-2-github-packages-only","title":"Option 2: GitHub Packages Only","text":"<p>Pros: - \u2705 Integrated with GitHub (no separate service)</p> <p>Cons: - \u274c Python support is limited (no native pip/UV integration) - \u274c Requires PAT for authentication - \u274c No Assured OSS integration</p>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#option-3-third-party-private-pypi","title":"Option 3: Third-Party Private PyPI","text":"<p>Pros: - \u2705 Drop-in replacement for public PyPI</p> <p>Cons: - \u274c Additional service to manage and pay for - \u274c Another credential to manage - \u274c No GCP integration</p>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#option-4-artifact-registry-only-skip-git","title":"Option 4: Artifact Registry Only (Skip Git)","text":"<p>Pros: - \u2705 Full caching from day one</p> <p>Cons: - \u274c Significant upfront setup - \u274c Delays usability until infrastructure ready</p>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#consequences","title":"Consequences","text":"","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#positive","title":"Positive","text":"<ul> <li>\u2705 Immediate usability: Projects can use packages today via Git</li> <li>\u2705 GCP integration: Artifact Registry leverages existing infrastructure</li> <li>\u2705 Security scanning: Assured OSS integration when on Artifact Registry</li> </ul>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#trade-offs","title":"Trade-offs","text":"<ul> <li>\u26a0\ufe0f Initial performance: Git dependencies slower than cached packages</li> <li>\u26a0\ufe0f Migration work: Need to update consumer projects when switching</li> </ul>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#technical-debt","title":"Technical Debt","text":"<ul> <li>Document migration path from Git to Artifact Registry</li> <li>Consumer projects will need dependency updates during migration</li> </ul>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#implementation","title":"Implementation","text":"","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#phase-1-git-dependencies-immediate","title":"Phase 1: Git Dependencies (Immediate)","text":"<p>Consumer projects add dependencies like:</p> <pre><code># pyproject.toml\n[project]\ndependencies = [\n    \"byronwilliamscpa-gcs-utilities @ git+https://github.com/ByronWilliamsCPA/python-libs.git@v0.1.0#subdirectory=packages/gcs-utilities\",\n]\n\n# Or using UV sources for development\n[tool.uv.sources]\nbyronwilliamscpa-gcs-utilities = { git = \"https://github.com/ByronWilliamsCPA/python-libs.git\", subdirectory = \"packages/gcs-utilities\", tag = \"gcs-utilities-v0.1.0\" }\n</code></pre>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#phase-2-artifact-registry-future","title":"Phase 2: Artifact Registry (Future)","text":"<ol> <li>Create Python repository in Artifact Registry</li> <li>Configure GitHub Actions to publish on release</li> <li>Update consumer projects to use Artifact Registry URL</li> </ol> <pre><code># Future: Artifact Registry\n[[tool.uv.index]]\nname = \"byronwilliamscpa\"\nurl = \"https://us-python.pkg.dev/PROJECT_ID/python-libs/simple/\"\n\n[project]\ndependencies = [\n    \"byronwilliamscpa-gcs-utilities&gt;=0.1.0\",\n]\n</code></pre>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#components-affected","title":"Components Affected","text":"<ol> <li>Consumer pyproject.toml: Dependency declarations</li> <li>GitHub Actions: Publishing workflow (Phase 2)</li> <li>GCP Infrastructure: Artifact Registry repository (Phase 2)</li> </ol>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#validation","title":"Validation","text":"","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#success-criteria","title":"Success Criteria","text":"<p>Phase 1 (Git): - [ ] Consumer projects can install via Git URL - [ ] CI/CD pipelines work with Git dependencies - [ ] Version pinning works correctly</p> <p>Phase 2 (Artifact Registry): - [ ] Packages published to Artifact Registry on release - [ ] Consumer projects install from Artifact Registry - [ ] Install times improved vs Git dependencies</p>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#review-schedule","title":"Review Schedule","text":"<ul> <li>Initial: After 3 consumer projects using Git dependencies</li> <li>Migration trigger: When CI install times exceed 2 minutes</li> </ul>","tags":["planning","architecture","decisions","distribution"]},{"location":"planning/adr/adr-003-distribution-strategy/#related","title":"Related","text":"<ul> <li>ADR-001: Monorepo structure</li> <li>Tech Spec: CI/CD details</li> <li>Roadmap Phase 3: Distribution milestone</li> </ul>","tags":["planning","architecture","decisions","distribution"]},{"location":"project/changelog/","title":"Changelog","text":"<p>All notable changes to Python Libs will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>","tags":["project","changelog"]},{"location":"project/changelog/#unreleased","title":"Unreleased","text":"","tags":["project","changelog"]},{"location":"project/changelog/#added","title":"Added","text":"<ul> <li>Initial project structure from cookiecutter template</li> <li>Core configuration with Pydantic Settings</li> <li>Structured logging with structlog and rich</li> <li>Comprehensive test infrastructure</li> <li>Documentation with MkDocs Material</li> </ul>","tags":["project","changelog"]},{"location":"project/changelog/#changed","title":"Changed","text":"<ul> <li>None</li> </ul>","tags":["project","changelog"]},{"location":"project/changelog/#deprecated","title":"Deprecated","text":"<ul> <li>None</li> </ul>","tags":["project","changelog"]},{"location":"project/changelog/#removed","title":"Removed","text":"<ul> <li>None</li> </ul>","tags":["project","changelog"]},{"location":"project/changelog/#fixed","title":"Fixed","text":"<ul> <li>None</li> </ul>","tags":["project","changelog"]},{"location":"project/changelog/#security","title":"Security","text":"<ul> <li>None</li> </ul>","tags":["project","changelog"]},{"location":"project/changelog/#010-2025","title":"0.1.0 - 2025","text":"","tags":["project","changelog"]},{"location":"project/changelog/#added_1","title":"Added","text":"<ul> <li>Initial release of Python Libs</li> </ul>","tags":["project","changelog"]},{"location":"project/license/","title":"License","text":"<p>Python Libs is licensed under the MIT License.</p>","tags":["project","license"]},{"location":"project/license/#summary","title":"Summary","text":"<p>The MIT License is a permissive license that allows:</p> <ul> <li>Commercial use: Use in commercial projects</li> <li>Modification: Modify the source code</li> <li>Distribution: Distribute copies</li> <li>Private use: Use privately</li> </ul> <p>With the following conditions:</p> <ul> <li>License and copyright notice: Include the license in distributions</li> </ul>","tags":["project","license"]},{"location":"project/license/#full-license-text","title":"Full License Text","text":"<p>See the LICENSE file in the repository root.</p>","tags":["project","license"]},{"location":"project/license/#third-party-licenses","title":"Third-Party Licenses","text":"<p>This project uses open-source dependencies. See <code>pyproject.toml</code> for the full list.</p>","tags":["project","license"]},{"location":"project/license/#contact","title":"Contact","text":"<p>For licensing questions, contact: byronawilliams@gmail.com</p>","tags":["project","license"]},{"location":"project/roadmap/","title":"Roadmap","text":"<p>Development roadmap for Python Libs.</p>","tags":["project","roadmap"]},{"location":"project/roadmap/#current-version","title":"Current Version","text":"<p>v0.1.0 - Initial release</p>","tags":["project","roadmap"]},{"location":"project/roadmap/#planned-features","title":"Planned Features","text":"","tags":["project","roadmap"]},{"location":"project/roadmap/#phase-1-foundation","title":"Phase 1: Foundation","text":"<ul> <li> Core project structure</li> <li> Type-safe configuration</li> <li> Structured logging</li> <li> Test infrastructure</li> </ul>","tags":["project","roadmap"]},{"location":"project/roadmap/#phase-2-enhancement","title":"Phase 2: Enhancement","text":"<ul> <li> Additional features (TBD)</li> <li> Performance optimizations</li> <li> Extended documentation</li> </ul>","tags":["project","roadmap"]},{"location":"project/roadmap/#phase-3-production-ready","title":"Phase 3: Production Ready","text":"<ul> <li> Stability improvements</li> <li> Security hardening</li> <li> Production deployment guides</li> </ul>","tags":["project","roadmap"]},{"location":"project/roadmap/#release-schedule","title":"Release Schedule","text":"<p>Releases follow Semantic Versioning:</p> <ul> <li>Major (x.0.0): Breaking changes</li> <li>Minor (0.x.0): New features</li> <li>Patch (0.0.x): Bug fixes</li> </ul>","tags":["project","roadmap"]},{"location":"project/roadmap/#contributing","title":"Contributing","text":"<p>See the Contributing Guide to help shape the roadmap.</p>","tags":["project","roadmap"]},{"location":"project/roadmap/#detailed-planning","title":"Detailed Planning","text":"<p>For detailed project planning documents, see:</p> <ul> <li>Project Vision</li> <li>Technical Spec</li> <li>Development Roadmap</li> </ul>","tags":["project","roadmap"]}]}